{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./test/dummy/frontend/js/initializers/rails.js","webpack:///./test/dummy/frontend/js/services/notification_center.coffee","webpack:///./test/dummy/frontend/js/reducers/main/comments.js","webpack:///./test/dummy/frontend/js/reducers/main/index.js","webpack:///./test/dummy/frontend/js/reducers/main/articles.js","webpack:///./test/dummy/frontend/js/stores/main/index.js","webpack:///./test/dummy/frontend/js/reducers/admin/users.js","webpack:///./test/dummy/frontend/js/reducers/admin/index.js","webpack:///./test/dummy/frontend/js/reducers/admin/articles.js","webpack:///./test/dummy/frontend/js/stores/admin/index.js","webpack:///./test/dummy/frontend/js/selectors/articles.js","webpack:///./test/dummy/frontend/js/models/article.coffee","webpack:///./test/dummy/frontend/js/models/article/comment.coffee","webpack:///./test/dummy/frontend/js/models/user.coffee","webpack:///./test/dummy/frontend/js/views/shared/flash.coffee","webpack:///./test/dummy/frontend/js/controllers/concerns/disconnection.coffee","webpack:///./test/dummy/frontend/js/components/admin/comment.js","webpack:///./test/dummy/frontend/js/components/admin/CommentList.js","webpack:///./test/dummy/frontend/js/views/admin/articles/Edit.js","webpack:///./test/dummy/frontend/js/views/admin/articles/Form.js","webpack:///./test/dummy/frontend/js/components/admin/Article.js","webpack:///./test/dummy/frontend/js/containers/admin/StatefulArticleList.js","webpack:///./test/dummy/frontend/js/controllers/admin/Articles.js","webpack:///./test/dummy/frontend/js/views/admin/comments/Form.js","webpack:///./test/dummy/frontend/js/controllers/admin/Comments.js","webpack:///./test/dummy/frontend/js/components/admin/User.js","webpack:///./test/dummy/frontend/js/containers/admin/StatefulUserList.js","webpack:///./test/dummy/frontend/js/views/admin/users/Show.js","webpack:///./test/dummy/frontend/js/views/admin/users/Form.js","webpack:///./test/dummy/frontend/js/controllers/admin/Users.js","webpack:///./test/dummy/frontend/js/controllers/Admin.js","webpack:///./test/dummy/frontend/js/services/Connectivity.js","webpack:///./test/dummy/frontend/js/initializers/loco.js","webpack:///./test/dummy/frontend/js/selectors/comments.js","webpack:///./test/dummy/frontend/js/components/main/Comment.js","webpack:///./test/dummy/frontend/js/containers/main/articles/StatefulCommentList.js","webpack:///./test/dummy/frontend/js/containers/main/articles/CommentsNumber.js","webpack:///./test/dummy/frontend/js/views/main/articles/show.coffee","webpack:///./test/dummy/frontend/js/controllers/main/articles.coffee","webpack:///./test/dummy/frontend/js/containers/main/pages/LoadMoreLink.js","webpack:///./test/dummy/frontend/js/components/main/Article.js","webpack:///./test/dummy/frontend/js/containers/main/pages/StatefulArticleList.js","webpack:///./test/dummy/frontend/js/controllers/main/Pages.js","webpack:///./test/dummy/frontend/js/views/main/users/user_registration_form.coffee","webpack:///./test/dummy/frontend/js/controllers/main/users.coffee","webpack:///./test/dummy/frontend/js/controllers/Main.js","webpack:///./test/dummy/frontend/js/models/index.js","webpack:///./test/dummy/frontend/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Rails","start","notification_center_coffee","receivedSignal","signal","this","_pingSignal","_messageSignal","loco","namespaceController","constructor","App","Controllers","User","alert","view","_getRoomView","receivedMessage","message","author","controller","Rooms","action","getView","combineReducers","articles","state","arguments","undefined","type","_toConsumableArray","payload","concat","index","article","comments","_objectSpread","_defineProperty","articleId","comments_toConsumableArray","store","createStore","reducer","articles_toConsumableArray","users","users_toConsumableArray","findArticle","id","find","a","indexOf","article_coffee","superClass","Article","__super__","published","publishedAt","child","parent","hasProp","ctor","Base","identity","resources","url","paginate","per","main","admin","attributes","title","validations","presence","within","content","minimum","remoteName","createdAt","updatedAt","commentsCount","adminReview","adminRate","categoryId","adminReviewStartedAt","validate","vulgarityLevel","exec","addErrorMessage","for","setDefaultValuesForAdminReview","Date","now","comment_coffee","Comment","comment_coffee_hasProp","param","text","vulgarity","emotion","pinned","approved","user_coffee","user_coffee_hasProp","email","format","with","username","password","on","confirmation","passwordConfirmation","confirmed","console","log","flash_coffee","Flash","opts","ref","ref1","ref2","ref3","notice","warning","hide","flash_coffee_hasProp","setNotice","setAlert","setWarning","render","node","document","querySelector","classList","remove","add","textContent","hideAfterTime","time","setTimeout","disconnection_coffee","disconnectedForTooLong","_ref","comment","Services","strftime","react_default","createElement","href","propTypes","PropTypes","instanceOf","CommentModel","isRequired","CommentList","Fragment","map","admin_comment","arrayOf","Edit","_this","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","Views","_this2","reload","then","applyChanges","_renderArticle","connectWith","renderElement","admin_CommentList","getElementById","Form","Form_classCallCheck","Form_possibleConstructorReturn","Form_getPrototypeOf","UI","date","toString","className","ArticleModel","ArticleListWrapper","props","_useState2","_slicedToArray","useState","setArticles","useEffect","unsubscribe","subscribe","getState","list","admin_Article","Articles","resp","dispatch","StatefulArticleList","editView","params","all","renderComments","comments_Form_classCallCheck","comments_Form_possibleConstructorReturn","comments_Form_getPrototypeOf","form","commentId","resource","initObj","Env","test","commentFormObj","getObj","Comments","user","data-method","data-confirm","onClick","e","userId","preventDefault","emit","user_id","ping","UserModel","UserListWrapper","StatefulUserList_slicedToArray","setUsers","admin_User","Show","Show_classCallCheck","Show_possibleConstructorReturn","Show_getPrototypeOf","_updateEditLink","editLink","getAttribute","setAttribute","replace","users_Form_classCallCheck","users_Form_possibleConstructorReturn","users_Form_getPrototypeOf","Users","StatefulUserList","Admin","Mix","Disconnection","setScope","assign","commentsChanged","_ref3","diff","article_id","mainStore","AdminController","adminStore","_findArticle4","Connectivity_slicedToArray","Connectivity_objectSpread","Connectivity","Connectivity_classCallCheck","Connectivity_possibleConstructorReturn","Connectivity_getPrototypeOf","abbr","_ref2","findParams","_findArticle2","articleUpdated","_ref4","commentCreated","Deps","cable","ActionCable","createConsumer","NotificationCenter","connectivity","Loco","notifications","enable","size","postInit","getWire","setPollingTime","init","commentsForArticle","StatefulCommentList","StatefulCommentList_slicedToArray","setComments","main_Comment","number","CommentsNumber","CommentsNumber_slicedToArray","show_coffee","newComment","show_coffee_hasProp","renderArticle","dateService","textEl","receiver","innerHTML","Text","simpleFormat","insertAdjacentHTML","_articleReceivedSignal","_commentReceivedSignal","commentNode","Utils","Collection","renderedComment","JST","outerHTML","parentNode","removeChild","articles_coffee","articles_coffee_hasProp","show","res","total","stores_main","react_dom","articles_StatefulCommentList","articles_CommentsNumber","LoadMoreLink","LoadMoreLink_slicedToArray","page","setPage","_useState4","noMorePosts","setNoMorePosts","handleClick","currentPage","catch","err","StatefulArticleList_slicedToArray","main_Article","Pages","pages_StatefulArticleList","user_registration_form_coffee","UserRegistrationForm","user_registration_form_coffee_hasProp","delegator","callbackSuccess","_confirming","_confirmed","_created","style","display","location","users_coffee","users_coffee_hasProp","Main","Models","CustomModels"],"mappings":"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","file":"application.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([129,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import Rails from \"rails-ujs\";\n\nRails.start();\n","import { Env } from \"loco-js\"\n\nclass NotificationCenter\n  receivedSignal: (data) ->\n    switch data.signal\n      when 'ping'\n        this._pingSignal()\n      when 'message'\n        this._messageSignal data\n\n  _pingSignal: ->\n    return if Env.namespaceController.constructor isnt App.Controllers.User\n    alert 'Ping!'\n\n  _messageSignal: (data) ->\n    return if not view = this._getRoomView()\n    view.receivedMessage data.message, data.author\n\n  _getRoomView: ->\n    return false if Env.namespaceController.constructor isnt App.Controllers.User\n    return false if Env.controller.constructor isnt App.Controllers.User.Rooms\n    return false if Env.action isnt 'show'\n    Env.controller.getView 'show'\n\nexport default NotificationCenter","export default (state = {}, action) => {\n  switch (action.type) {\n    case \"ADD_COMMENTS\":\n      return {\n        ...state,\n        [action.payload.articleId]: [\n          ...state[action.payload.articleId],\n          ...action.payload.comments\n        ]\n      };\n    case \"SET_COMMENTS\":\n      return { [action.payload.articleId]: action.payload.comments };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\n\nimport articles from \"./articles\";\nimport comments from \"./comments\";\n\nexport default combineReducers({\n  articles,\n  comments\n});\n","export default (state = [], action) => {\n  switch (action.type) {\n    case \"SET_ARTICLES\":\n      return [...action.payload.articles];\n    case \"ADD_ARTICLES\":\n      return [...state, ...action.payload.articles];\n    case \"UPDATE_ARTICLE\":\n      return [\n        ...state.slice(0, action.payload.index),\n        action.payload.article,\n        ...state.slice(action.payload.index + 1)\n      ];\n    default:\n      return state;\n  }\n};\n","import { createStore } from \"redux\";\n\nimport reducer from \"reducers/main\";\n\nconst store = createStore(reducer, { articles: [], comments: [] });\n\nexport default store;\n","export default (state = [], action) => {\n  switch (action.type) {\n    case \"APPEND_USER\":\n      return [...state, ...action.payload.users];\n    case \"SET_USERS\":\n      return [...action.payload.users];\n    case \"PREPEND_USER\":\n      return [...action.payload.users, ...state];\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\n\nimport articles from \"./articles\";\nimport users from \"./users\";\n\nexport default combineReducers({\n  articles,\n  users\n});\n","export default (state = [], action) => {\n  switch (action.type) {\n    case \"PREPEND_ARTICLE\":\n      return [...action.payload.articles, ...state];\n    case \"SET_ARTICLES\":\n      return [...action.payload.articles];\n    case \"UPDATE_ARTICLE\":\n      return [\n        ...state.slice(0, action.payload.index),\n        action.payload.article,\n        ...state.slice(action.payload.index + 1)\n      ];\n    default:\n      return state;\n  }\n};\n","import { createStore } from \"redux\";\n\nimport reducer from \"reducers/admin\";\n\nconst store = createStore(reducer, { users: [], articles: [] });\n\nexport default store;\n","export const findArticle = (state, id) => {\n  const article = state.articles.find(a => a.id === id);\n  if (!article) return [null, null];\n  const index = state.articles.indexOf(article);\n  return [article, index];\n};\n","import { Models } from \"loco-js\"\n\nclass Article extends Models.Base\n  @identity = \"Article\"\n  @resources =\n    url: '/user/articles', paginate: {per: 5}\n    main:\n      url: '/articles', paginate: {per: 3}\n    admin:\n      url: '/admin/articles', paginate: {per: 4}\n\n  @attributes =\n    title:\n      validations:\n        presence: true\n        length: {within: [3, 255]}\n    content:\n      validations:\n        presence: true\n        length: {minimum: 100}\n      remoteName: \"text\"\n    createdAt:\n      type: \"Date\"\n      remoteName: \"created_at\"\n    updatedAt:\n      type: \"Date\"\n      remoteName: \"updated_at\"\n    commentsCount:\n      type: \"Int\"\n      remoteName: \"comments_count\"\n    publishedAt:\n      type: \"Date\"\n      remoteName: \"published_at\"\n    published: {}\n    adminReview:\n      remoteName: \"admin_review\"\n    adminRate:\n      type: \"Int\"\n      remoteName: \"admin_rate\"\n    categoryId:\n      type: \"Int\"\n      remoteName: \"category_id\"\n    adminReviewStartedAt:\n      remoteName: \"admin_review_started_at\"\n\n  @receivedSignal: (signal, data) ->\n\n  @validate = [\"vulgarityLevel\"]\n\n  constructor: (data) ->\n    super data\n    @published = if @publishedAt? then true else false\n\n  receivedSignal: (signal, data) ->\n\n  vulgarityLevel: ->\n    if (this.title? and /fuck/i.exec(this.title)) or (this.content? and /fuck/i.exec(this.content))\n      this.addErrorMessage \"Article contains strong language.\", for: 'base'\n\n  setDefaultValuesForAdminReview: ->\n    @adminRate ?= 3\n    @categoryId ?= 6\n    @adminReviewStartedAt = Date.now()\n\nexport default Article\n","import { Models } from \"loco-js\"\n\nclass Comment extends Models.Base\n  @identity = \"Article.Comment\"\n  @remoteName = \"Comment\"\n  @resources =\n    url: '/user/articles/:articleId/comments', paginate: {per: 10}\n    main:\n      url: '/articles/:articleId/comments', paginate: {per: 5, param: \"page-num\"}\n    admin:\n      url: '/admin/articles/:articleId/comments', paginate: {per: 5}\n\n  @attributes =\n    author:\n      validations:\n        presence: true\n    text:\n      validations:\n        presence: true\n        vulgarity: true\n    articleId:\n      type: \"Int\"\n      validations:\n        presence: true\n      remoteName: \"article_id\"\n    createdAt:\n      type: \"Date\"\n      remoteName: \"created_at\"\n    updatedAt:\n      type: \"Date\"\n      remoteName: \"updated_at\"\n    emotion:\n      type: \"Int\"\n    pinned:\n      type: \"Boolean\"\n    adminRate:\n      type: \"Int\"\n      remoteName: \"admin_rate\"\n    approved:\n      type: \"Boolean\"\n\n  constructor: (data) -> super data\n\n  @receivedSignal: (signal, data) ->\n\n  receivedSignal: (signal, data) ->\n\nexport default Comment\n","import { Models } from \"loco-js\"\n\nclass User extends Models.Base\n  @identity = \"User\"\n  @resources =\n    url: \"/users\"\n    admin:\n      url: \"/admin/users\"\n\n  @paginate = {per: 10}\n\n  @attributes =\n    email:\n      validations:\n        presence: true\n        format: {with: /^([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})$/i}\n    username:\n      validations:\n        presence: true\n        format: {with: /^[a-z][a-z0-9_\\-]*$/i}\n    password:\n      validations:\n        presence: {on: \"create\"}\n        confirmation: true\n    passwordConfirmation:\n      remoteName: \"password_confirmation\"\n    confirmed: {}\n    createdAt:\n      type: \"Date\"\n      remoteName: \"created_at\"\n    updatedAt:\n      type: \"Date\"\n      remoteName: \"updated_at\"\n\n  @receivedSignal: (signal, data) -> console.log \"App.Models.User.receivedSignal: #{signal}\"\n\n  constructor: (data) -> super data\n\n  receivedSignal: (signal, data) -> console.log \"App.Models.User#receivedSignal: #{signal}\"\n\nexport default User\n","import { Views } from \"loco-js\"\n\nclass Flash extends Views.Base\n  constructor: (opts = {}) ->\n    super opts\n    @notice = opts.notice ? null\n    @alert = opts.alert ? null\n    @warning = opts.warning ? null\n    @hide = opts.hide ? true\n\n  setNotice: (text) -> @notice = text\n  setAlert: (text) -> @alert = text\n  setWarning: (text) -> @warning = text\n\n  render: ->\n    node = document.querySelector('.flash')\n    node.classList.remove('notice')\n    node.classList.remove('alert')\n    node.classList.remove('warning')\n    if @notice?\n      node.classList.add('notice')\n      document.querySelector('.flash p').textContent = @notice\n    else if @alert?\n      node.classList.add('alert')\n      document.querySelector('.flash p').textContent = @alert\n    else if @warning?\n      node.classList.add('warning')\n      document.querySelector('.flash p').textContent = @warning\n    node.classList.remove('none') # slideDown initially\n    this.hideAfterTime() if @hide\n\n  hideAfterTime: (time = 4000) ->\n    setTimeout ->\n      document.querySelector('.flash').classList.add('none') # slideUp initially\n    , time\n\nexport default Flash","import Flash from \"views/shared/flash.coffee\"\n\nclass Disconnection\n  disconnectedForTooLong: (time) ->\n    msg = \"You have been disconnected from the server for too long. Reload page!\"\n    view = new Flash alert: msg, hide: false\n    view.render()\n\nexport default Disconnection","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Services } from \"loco-js\";\n\nimport CommentModel from \"models/article/comment.coffee\";\n\nfunction Comment({ comment }) {\n  const createdAt = new Services.Date(comment.createdAt).strftime(\"%d %b %y\");\n\n  return (\n    <p id={`comment_${comment.id}`}>\n      <b>{comment.author}</b> on <i>{createdAt}</i> (\n      <a\n        href={`/admin/articles/${comment.articleId}/comments/${\n          comment.id\n        }/edit`}\n      >\n        edit\n      </a>\n      )\n      <br />\n      {comment.text}\n    </p>\n  );\n}\n\nComment.propTypes = {\n  comment: PropTypes.instanceOf(CommentModel).isRequired\n};\n\nexport default Comment;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport CommentModel from \"models/article/comment.coffee\";\nimport Comment from \"components/admin/comment\";\n\nfunction CommentList({ comments }) {\n  if (comments.length === 0) {\n    return <p>No comments</p>;\n  }\n  return (\n    <>\n      {comments.map(comment => (\n        <Comment comment={comment} key={comment.id} />\n      ))}\n    </>\n  );\n}\n\nCommentList.propTypes = {\n  comments: PropTypes.arrayOf(PropTypes.instanceOf(CommentModel)).isRequired\n};\n\nexport default CommentList;\n","import React from \"react\";\nimport { render as renderElement } from \"react-dom\";\nimport { Views } from \"loco-js\";\n\nimport CommentList from \"components/admin/CommentList\";\n\nclass Edit extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n    this.article = null;\n  }\n\n  receivedSignal(signal) {\n    switch (signal) {\n      case \"updated\":\n        this.article.reload().then(() => {\n          this.article.applyChanges();\n          this._renderArticle();\n        });\n    }\n  }\n\n  render(article) {\n    this.article = article;\n    this.connectWith(article);\n    this._renderArticle();\n  }\n\n  renderComments(comments) {\n    renderElement(\n      <CommentList comments={comments} />,\n      document.getElementById(\"comments\")\n    );\n  }\n\n  _renderArticle() {\n    document.getElementById(\"article_author\").textContent = this.article.author;\n    document.getElementById(\"article_title\").textContent = this.article.title;\n    document.getElementById(\"article_text\").textContent = this.article.content;\n  }\n}\n\nexport default Edit;\n","import { Views, UI } from \"loco-js\";\n\nclass Form extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n  }\n\n  render(article) {\n    article.setDefaultValuesForAdminReview();\n    const form = new UI.Form({ id: \"edit_article_form\", for: article });\n    form.render();\n  }\n}\n\nexport default Form;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Services } from \"loco-js\";\n\nimport ArticleModel from \"models/article.coffee\";\n\nfunction Article({ article }) {\n  const date = new Services.Date(article.publishedAt).toString(\"short\");\n\n  return (\n    <article id={`article_${article.id}`}>\n      <h2>{article.title}</h2>\n      <p>\n        <i>\n          {article.author} wrote this on {date} /{\" \"}\n          <span className=\"comments_quantity\">\n            {article.commentsCount} comment\n            {article.commentsCount === 1 ? \"\" : \"s\"}\n          </span>\n        </i>\n      </p>\n      <p>{article.content}</p>\n      <p>\n        <a href={`/admin/articles/${article.id}/edit`}>Review</a>\n      </p>\n    </article>\n  );\n}\n\nArticle.propTypes = {\n  article: PropTypes.instanceOf(ArticleModel).isRequired\n};\n\nexport default Article;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/admin\";\nimport Article from \"components/admin/Article\";\nimport ArticleModel from \"models/article.coffee\";\n\nfunction ArticleListWrapper(props) {\n  const [articles, setArticles] = useState(props.articles);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() =>\n      setArticles(store.getState().articles)\n    );\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  const list = articles.map(article => (\n    <Article key={article.id} article={article} />\n  ));\n\n  return <>{list}</>;\n}\n\nArticleListWrapper.propTypes = {\n  articles: PropTypes.arrayOf(PropTypes.instanceOf(ArticleModel)).isRequired\n};\n\nexport default ArticleListWrapper;\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Controllers } from \"loco-js\";\n\nimport store from \"stores/admin\";\nimport Article from \"models/article.coffee\";\nimport Comment from \"models/article/comment.coffee\";\nimport Edit from \"views/admin/articles/Edit\";\nimport Form from \"views/admin/articles/Form\";\n\nimport ArticleList from \"containers/admin/StatefulArticleList\";\n\nclass Articles extends Controllers.Base {\n  published() {\n    Article.get(\"published\").then(resp => {\n      store.dispatch({\n        type: \"SET_ARTICLES\",\n        payload: { articles: resp.resources }\n      });\n      render(\n        <ArticleList articles={resp.resources} />,\n        document.getElementById(\"articles\")\n      );\n    });\n  }\n\n  edit() {\n    const editView = new Edit();\n    Article.find(this.params.id).then(article => {\n      editView.render(article);\n      new Form().render(article);\n    });\n    Comment.all({ articleId: this.params.id }).then(resp => {\n      editView.renderComments(resp.resources);\n    });\n  }\n}\n\nexport default Articles;\n","import { Env, UI, Views } from \"loco-js\";\n\nimport CommentModel from \"models/article/comment.coffee\";\n\nclass Form extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n  }\n\n  render(opts = {}) {\n    const form = new UI.Form({\n      for: new CommentModel({ id: opts.commentId, resource: \"admin\" }),\n      id: `edit_comment_${opts.commentId}`,\n      initObj: true\n    });\n    form.render();\n\n    // only for testing purpose\n    Env.test = { commentFormObj: form.getObj() };\n  }\n}\n\nexport default Form;\n","import { Controllers } from \"loco-js\";\n\nimport Form from \"views/admin/comments/Form\";\n\nclass Comments extends Controllers.Base {\n  edit() {\n    new Form().render({ commentId: this.params.id });\n  }\n}\n\nexport default Comments;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Env } from \"loco-js\";\n\nimport UserModel from \"models/user.coffee\";\n\nconst User = ({ user }) => {\n  const ping = (e, userId) => {\n    e.preventDefault();\n    Env.loco.emit({ signal: \"ping\", user_id: userId });\n  };\n\n  return (\n    <tr id={`user_${user.id}`}>\n      <td>{user.email}</td>\n      <td>{user.username}</td>\n      <td className=\"confirmed\">{user.confirmed ? \"Yes\" : \"No\"}</td>\n      <td>\n        <a href={`/admin/users/${user.id}`}>Show</a> |{\" \"}\n        <a href={`/admin/users/${user.id}/edit`}>Edit</a> |{\" \"}\n        <a\n          href={`/admin/users/${user.id}`}\n          data-method=\"delete\"\n          data-confirm=\"Are you sure?\"\n        >\n          Delete\n        </a>{\" \"}\n        |{\" \"}\n        <a href=\"#\" onClick={e => ping(e, user.id)}>\n          Ping\n        </a>\n      </td>\n    </tr>\n  );\n};\n\nUser.propTypes = {\n  user: PropTypes.instanceOf(UserModel).isRequired\n};\n\nexport default User;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/admin\";\nimport User from \"components/admin/User\";\nimport UserModel from \"models/user.coffee\";\n\nfunction UserListWrapper(props) {\n  const [users, setUsers] = useState(props.users);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => setUsers(store.getState().users));\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  const list = users.map(user => <User key={`user_${user.id}`} user={user} />);\n\n  return <>{list}</>;\n}\n\nUserListWrapper.propTypes = {\n  users: PropTypes.arrayOf(PropTypes.instanceOf(UserModel)).isRequired\n};\n\nexport default UserListWrapper;\n","import { Views } from \"loco-js\";\n\nclass Show extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n    this.user = opts.user;\n  }\n\n  render() {\n    document.getElementById(\"user_email\").textContent = this.user.email;\n    document.getElementById(\"user_username\").textContent = this.user.username;\n    document.getElementById(\"user_confirmed\").textContent = this.user.confirmed\n      ? \"Yes\"\n      : \"No\";\n    this._updateEditLink();\n  }\n\n  _updateEditLink() {\n    const editLink = document.getElementById(\"edit_link\");\n    const href = editLink.getAttribute(\"href\");\n    editLink.setAttribute(\"href\", href.replace(\"/0/\", \"/#{@user.id}/\"));\n  }\n}\n\nexport default Show;\n","import { UI, Views } from \"loco-js\";\n\nclass Form extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n    this.user = opts.user;\n  }\n\n  render() {\n    const form = new UI.Form({\n      for: this.user,\n      initObj: true,\n      id: \"admin_user_form\"\n    });\n    form.render();\n  }\n}\n\nexport default Form;\n","import React from \"react\";\nimport { render as renderElement } from \"react-dom\";\nimport { Controllers } from \"loco-js\";\n\nimport store from \"stores/admin\";\nimport User from \"models/user.coffee\";\nimport UserList from \"containers/admin/StatefulUserList\";\nimport Show from \"views/admin/users/Show\";\nimport Form from \"views/admin/users/Form\";\n\nclass Users extends Controllers.Base {\n  index() {\n    User.get(\"all\").then(resp => {\n      store.dispatch({ type: \"SET_USERS\", payload: { users: resp.resources } });\n      renderElement(\n        <UserList users={resp.resources} />,\n        document.querySelector(\"table tbody\")\n      );\n    });\n  }\n\n  show() {\n    User.find(this.params.id).then(user => new Show({ user: user }).render());\n  }\n\n  edit() {\n    const view = new Form({ user: new User({ id: this.params.id }) });\n    view.render();\n  }\n}\n\nexport default Users;\n","import { Controllers, Mix } from \"loco-js\";\n\nimport Disconnection from \"./concerns/disconnection.coffee\";\nimport Articles from \"./admin/Articles\";\nimport Comments from \"./admin/Comments\";\nimport Users from \"./admin/Users\";\n\nclass Admin extends Mix(Controllers.Base, Disconnection) {\n  initialize() {\n    this.setScope(\"admin\");\n  }\n}\n\nObject.assign(Admin, {\n  Articles,\n  Comments,\n  Users\n});\n\nexport default Admin;\n","import { Env, Views } from \"loco-js\";\n\nimport mainStore from \"stores/main\";\nimport adminStore from \"stores/admin\";\nimport { findArticle } from \"selectors/articles\";\n\nimport Article from \"models/article.coffee\";\nimport Comment from \"models/article/comment.coffee\";\nimport User from \"models/user.coffee\";\n\nimport AdminController from \"controllers/Admin\";\n\nconst articlePublished = ({ id }) => {\n  if (Env.namespaceController.constructor === AdminController) {\n    Article.find({ id, abbr: true, resource: \"admin\" }).then(article => {\n      adminStore.dispatch({\n        type: \"PREPEND_ARTICLE\",\n        payload: { articles: [article] }\n      });\n    });\n  } else {\n    Article.find({ id, abbr: true }).then(article => {\n      mainStore.dispatch({\n        type: \"ADD_ARTICLES\",\n        payload: { articles: [article] }\n      });\n    });\n  }\n};\n\nconst articleUpdated = ({ id }) => {\n  const findParams = { id: id, abbr: true };\n  let store = mainStore;\n\n  if (Env.namespaceController.constructor === AdminController) {\n    findParams[\"resource\"] = \"admin\";\n    store = adminStore;\n  }\n\n  const [article, index] = findArticle(store.getState(), id);\n  if (!article) return;\n  Article.find(findParams).then(article =>\n    store.dispatch({\n      type: \"UPDATE_ARTICLE\",\n      payload: { article, index }\n    })\n  );\n};\n\nconst commentsChanged = ({ article_id: articleId }, diff) => {\n  let store = mainStore;\n  if (Env.namespaceController.constructor === AdminController) {\n    store = adminStore;\n  }\n  const [article, index] = findArticle(store.getState(), articleId);\n  if (!article) return;\n  store.dispatch({\n    type: \"UPDATE_ARTICLE\",\n    payload: {\n      article: new Article({\n        ...article,\n        commentsCount: article.commentsCount + diff\n      }),\n      index: index\n    }\n  });\n};\n\n// TODO: check if the proper article is displayed\nconst commentCreated = ({ article_id: articleId, id }) => {\n  Comment.find({ articleId, id }).then(\n    comment =>\n      mainStore.dispatch({\n        type: \"ADD_COMMENTS\",\n        payload: { articleId, comments: [comment] }\n      })\n  );\n};\n\nclass Connectivity extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n  }\n\n  receivedSignal(signal, data) {\n    switch (signal) {\n      case \"Article published\":\n        articlePublished(data);\n        break;\n      case \"Article updated\":\n        articleUpdated(data);\n        break;\n      case \"Article.Comment created\":\n        commentsChanged(data, 1);\n        commentCreated(data);\n        break;\n      case \"Article.Comment destroyed\":\n        commentsChanged(data, -1);\n        break;\n      case \"User created\":\n        User.find(data.id).then(user =>\n          adminStore.dispatch({\n            type: \"PREPEND_USER\",\n            payload: { users: [user] }\n          })\n        );\n        break;\n    }\n  }\n\n  call() {\n    this.connectWith([Article, Comment, User]);\n  }\n}\n\nexport default Connectivity;\n","import { Deps, Env, Loco } from \"loco-js\";\nimport ActionCable from \"actioncable\";\nimport NotificationCenter from \"services/notification_center.coffee\";\nimport Connectivity from \"services/Connectivity\";\n\nDeps.cable = ActionCable.createConsumer();\nDeps.NotificationCenter = NotificationCenter;\n\nconst connectivity = new Connectivity();\n\nconst loco = new Loco({\n  notifications: {\n    enable: true,\n    log: true,\n    size: 10\n  },\n  postInit: () => {\n    connectivity.call();\n\n    if (\n      document.querySelector(\"body\").getAttribute(\"data-rails-env\") !== \"test\"\n    )\n      return;\n    Env.loco.getWire().setPollingTime(1000);\n  }\n});\n\nloco.init();\n","export const commentsForArticle = (state, articleId) => {\n  return state.comments[articleId];\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Services } from \"loco-js\";\n\nimport CommentModel from \"models/article/comment.coffee\";\n\nfunction Comment({ comment }) {\n  const createdAt = new Services.Date(comment.createdAt).strftime(\"%d %b %y\");\n\n  return (\n    <p id={`comment_${comment.id}`}>\n      <b>{comment.author}</b> on <i>{createdAt}</i> wrote:\n      <br />\n      {comment.text}\n    </p>\n  );\n}\n\nComment.propTypes = {\n  comment: PropTypes.instanceOf(CommentModel).isRequired\n};\n\nexport default Comment;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/main\";\nimport { commentsForArticle } from \"selectors/comments\";\nimport Comment from \"components/main/Comment\";\nimport CommentModel from \"models/article/comment.coffee\";\n\nfunction StatefulCommentList(props) {\n  const articleId = props.articleId;\n  const [comments, setComments] = useState(props.comments);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      setComments(commentsForArticle(store.getState(), articleId));\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  const list = comments.map(comment => (\n    <Comment key={comment.id} comment={comment} />\n  ));\n\n  if (comments.length === 0) {\n    return <p id=\"no_comments\">No comments.</p>;\n  }\n\n  return <>{list}</>;\n}\n\nStatefulCommentList.propTypes = {\n  articleId: PropTypes.number.isRequired,\n  comments: PropTypes.arrayOf(PropTypes.instanceOf(CommentModel)).isRequired\n};\n\nexport default StatefulCommentList;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/main\";\nimport { commentsForArticle } from \"selectors/comments\";\nimport CommentModel from \"models/article/comment.coffee\";\n\nfunction CommentsNumber(props) {\n  const [comments, setComments] = useState(props.comments);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      setComments(commentsForArticle(store.getState(), props.articleId));\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  return <>{`${comments.length} comment${comments.length === 1 ? '' : 's'}`}</>;\n}\n\nCommentsNumber.propTypes = {\n  articleId: PropTypes.number.isRequired,\n  comments: PropTypes.arrayOf(PropTypes.instanceOf(CommentModel)).isRequired\n};\n\nexport default CommentsNumber;\n","import { Helpers, Services, UI, Views } from \"loco-js\";\n\nimport Flash from \"views/shared/flash.coffee\";\n\nclass Show extends Views.Base\n  constructor: (opts = {}) ->\n    super opts\n    @article = null\n    @comments = []\n    @newComment = opts.comment\n\n  render: ->\n    form = new UI.Form for: @newComment, initObj: true, id: \"new_comment\"\n    form.render()\n\n  renderArticle: (article = null) ->\n    if not @article?\n      @article = article\n      this.connectWith @article, receiver: \"_articleReceivedSignal\"\n    document.getElementById(\"title\").textContent = @article.title\n    document.getElementById(\"author\").textContent = @article.author\n    dateService = new Services.Date @article.publishedAt\n    document.getElementById(\"pub_date\").textContent = dateService.toString('short')\n    textEl = document.getElementById \"text\"\n    textEl.innerHTML = \"\"\n    text = (new Helpers.Text).simpleFormat @article.content\n    textEl.insertAdjacentHTML \"beforeend\", text\n\n  _articleReceivedSignal: (signal, data) ->\n    switch signal\n      when 'updating'\n        txt = 'Author is currently editing article. Be aware of possible changes.'\n        flash = new Flash warning: txt\n        flash.render()\n      when 'updated'\n        @article.reload().then =>\n          @article.applyChanges()\n          this.renderArticle()\n      else\n        console.log \"App.Views.Main.Articles.Show#_articleReceivedSignal: #{signal}\"\n\n  _commentReceivedSignal: (signal, data) ->\n    switch signal\n      when 'updated'\n        comment = App.Utils.Collection.find @comments, (c) -> c.id is data.id\n        comment.reload().then =>\n          comment.applyChanges()\n          renderedComment = JST[\"templates/main/comments/comment\"] {comment: comment}\n          document.getElementById(\"comment_#{comment.id}\").outerHTML = renderedComment\n      when 'destroyed'\n        comment = App.Utils.Collection.find @comments, (c) -> c.id is data.id\n        @comments.splice @comments.indexOf(comment), 1\n        commentNode = document.getElementById(\"comment_#{comment.id}\")\n        commentNode.parentNode.removeChild(commentNode)\n\nexport default Show","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Controllers } from \"loco-js\";\n\nimport store from \"stores/main\";\nimport CommentList from \"containers/main/articles/StatefulCommentList\";\nimport CommentsNumber from \"containers/main/articles/CommentsNumber\";\n\nimport Article from \"models/article.coffee\";\nimport Comment from \"models/article/comment.coffee\";\nimport Show from \"views/main/articles/show.coffee\"\n\nclass Articles extends Controllers.Base\n  show: ->\n    newComment = new Comment articleId: @params.id\n    @view = new Show comment: newComment\n    @view.render()\n    this.connectWith [Comment]\n    Article.find(@params.id).then (article) =>\n      @view.renderArticle article\n    Comment.get(\"count\", articleId: @params.id).then (res) =>\n      Comment\n        .all(articleId: this.params.id, total: res.total)\n        .then (comments) =>\n          store.dispatch({ type: \"SET_COMMENTS\", payload: { articleId: this.params.id, comments } });\n          render(\n            React.createElement(CommentList, { articleId: this.params.id, comments }),\n            document.getElementById('comments')\n          )\n          render(\n            React.createElement(CommentsNumber, { articleId: this.params.id, comments }),\n            document.getElementById('comments_count')\n          )\n\nexport default Articles\n","import React, { useState } from \"react\";\n\nimport Article from \"models/article.coffee\";\nimport store from \"stores/main\";\n\nexport default function LoadMoreLink() {\n  const [page, setPage] = useState(1);\n  const [noMorePosts, setNoMorePosts] = useState(false);\n\n  function handleClick(e) {\n    e.preventDefault();\n    const currentPage = page + 1;\n    setPage(currentPage);\n    Article.get(\"all\", { page: currentPage })\n      .then(resp => {\n        if (resp.resources.length > 0) {\n          store.dispatch({\n            type: \"ADD_ARTICLES\",\n            payload: { articles: resp.resources }\n          });\n        } else {\n          setNoMorePosts(true);\n        }\n      })\n      .catch(err => alert(`Invalid URL: ${err}`));\n  }\n\n  function output() {\n    if (noMorePosts) return <span>No more posts.</span>;\n    else\n      return (\n        <a href=\"#\" id=\"load_more\" onClick={handleClick}>\n          Load more…\n        </a>\n      );\n  }\n\n  return output();\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Services } from \"loco-js\";\n\nimport ArticleModel from \"models/article.coffee\";\n\nfunction Article({ article }) {\n  const date = new Services.Date(article.publishedAt).toString(\"short\");\n\n  return (\n    <article id={`article_${article.id}`}>\n      <h2>{article.title}</h2>\n      <p>\n        <i>\n          {article.author} wrote this on {date} /{\" \"}\n          <a\n            href={`/articles/${article.id}#comments`}\n            className=\"comments_quantity\"\n          >\n            {article.commentsCount} comment\n            {article.commentsCount === 1 ? \"\" : \"s\"}\n          </a>\n        </i>\n      </p>\n      <p>{article.content}</p>\n      <p>\n        <a href={`/articles/${article.id}`}>Continued…</a>\n      </p>\n    </article>\n  );\n}\n\nArticle.propTypes = {\n  article: PropTypes.instanceOf(ArticleModel).isRequired\n};\n\nexport default Article;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/main\";\nimport Article from \"components/main/Article\";\nimport ArticleModel from \"models/article.coffee\";\n\nfunction StatefulArticleList(props) {\n  const [articles, setArticles] = useState(props.articles);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() =>\n      setArticles(store.getState().articles)\n    );\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  const list = articles.map(article => (\n    <Article key={article.id} article={article} />\n  ));\n\n  return <>{list}</>;\n}\n\nStatefulArticleList.propTypes = {\n  articles: PropTypes.arrayOf(PropTypes.instanceOf(ArticleModel)).isRequired\n};\n\nexport default StatefulArticleList;\n","import React from \"react\";\nimport { render as renderElement } from \"react-dom\";\nimport { Controllers } from \"loco-js\";\n\nimport store from \"stores/main\";\nimport Article from \"models/article.coffee\";\nimport LoadMoreLink from \"containers/main/pages/LoadMoreLink\";\nimport ArticleList from \"containers/main/pages/StatefulArticleList\";\n\nclass Pages extends Controllers.Base {\n  index() {\n    renderElement(\n      <LoadMoreLink />,\n      document.getElementById(\"load_more_wrapper\")\n    );\n\n    Article.get(\"all\", { page: 1 }).then(resp => {\n      store.dispatch({\n        type: \"SET_ARTICLES\",\n        payload: { articles: resp.resources }\n      });\n      renderElement(\n        <ArticleList articles={resp.resources} />,\n        document.getElementById(\"articles\")\n      );\n    });\n  }\n}\n\nexport default Pages;\n","import { UI, Views } from \"loco-js\"\n\nimport User from \"models/user.coffee\"\nimport Flash from \"views/shared/flash.coffee\"\n\nclass UserRegistrationForm extends Views.Base\n  constructor: (opts = {}) ->\n    super opts\n\n  render: ->\n    form = new UI.Form for: new User, delegator: this, callbackSuccess: '_created'\n    form.render()\n\n  receivedSignal: (signal, data) ->\n    switch signal\n      when 'confirming' then this._confirming()\n      when 'confirmed' then this._confirmed()\n\n  _created: (data) ->\n    this.connectWith new User(id: data.id)\n    document.querySelector('form').style.display = 'none'\n    document.getElementById('sign_in_paragraph').classList.remove('none')\n    document.getElementById('verification_info').classList.remove('none')\n    flash = new Flash notice: data.notice\n    flash.render()\n\n  _confirming: ->\n    document.getElementById('verification_info').textContent = document.getElementById('verification_progress').textContent\n\n  _confirmed: -> window.location.href = '/user/sessions/new?event=confirmed'\n\nexport default UserRegistrationForm","import { Controllers } from \"loco-js\"\n\nimport UserRegistrationForm from \"views/main/users/user_registration_form.coffee\"\n\nclass Users extends Controllers.Base\n  new: ->\n    view = new UserRegistrationForm\n    view.render()\n\nexport default Users\n","import { Controllers, Mix } from \"loco-js\";\n\nimport Disconnection from \"./concerns/disconnection.coffee\";\nimport Articles from \"./main/articles.coffee\";\nimport Pages from \"./main/Pages\";\nimport Users from \"./main/users.coffee\";\n\nclass Main extends Mix(Controllers.Base, Disconnection) {\n  initialize() {\n    this.setScope(\"main\");\n  }\n}\n\nObject.assign(Main, {\n  Articles,\n  Pages,\n  Users\n});\n\nexport default Main;\n","import Article from \"./article.coffee\";\nimport Comment from \"./article/comment.coffee\";\nimport User from \"./user.coffee\";\n\nObject.assign(Article, { Comment });\n\nconst Models = {\n  Article,\n  User\n};\n\nexport default Models;\n","import { Controllers, Models } from \"loco-js\";\n\nimport \"initializers/rails\";\nimport \"initializers/loco\";\n\nimport \"scaffold.css\";\nimport \"global.scss\";\n\nimport Admin from \"controllers/Admin\";\nimport Main from \"controllers/Main\";\n\nimport CustomModels from \"models\";\n\nObject.assign(Models, CustomModels);\n\nObject.assign(Controllers, {\n  Admin,\n  Main\n});\n"],"sourceRoot":""}