{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./test/dummy/frontend/js/initializers/rails.js","webpack:///./test/dummy/frontend/js/views/shared/flash.coffee","webpack:///./test/dummy/frontend/js/controllers/concerns/disconnection.coffee","webpack:///./test/dummy/frontend/js/reducers/user/comments.js","webpack:///./test/dummy/frontend/js/reducers/user/index.js","webpack:///./test/dummy/frontend/js/reducers/user/articles.js","webpack:///./test/dummy/frontend/js/stores/user.js","webpack:///./test/dummy/frontend/js/views/layouts/user.coffee","webpack:///./test/dummy/frontend/js/views/user/articles/show.coffee","webpack:///./test/dummy/frontend/js/models/article/comment.coffee","webpack:///./test/dummy/frontend/js/selectors/comments.js","webpack:///./test/dummy/frontend/js/containers/user/Comment.js","webpack:///./test/dummy/frontend/js/containers/user/CommentList.js","webpack:///./test/dummy/frontend/js/views/user/articles/form.coffee","webpack:///./test/dummy/frontend/js/models/article.coffee","webpack:///./test/dummy/frontend/js/components/user/Article.js","webpack:///./test/dummy/frontend/js/containers/user/ArticleList.js","webpack:///./test/dummy/frontend/js/controllers/user/articles.coffee","webpack:///./test/dummy/frontend/js/models/room/member.coffee","webpack:///./test/dummy/frontend/js/models/room.coffee","webpack:///./test/dummy/frontend/js/views/user/rooms/list.coffee","webpack:///./test/dummy/frontend/js/views/user/rooms/show.coffee","webpack:///./test/dummy/frontend/js/controllers/user/rooms.coffee","webpack:///./test/dummy/frontend/js/controllers/User.js","webpack:///./test/dummy/frontend/js/services/notification_center.coffee","webpack:///./test/dummy/frontend/js/reducers/admin/users.js","webpack:///./test/dummy/frontend/js/reducers/admin/index.js","webpack:///./test/dummy/frontend/js/reducers/admin/articles.js","webpack:///./test/dummy/frontend/js/stores/admin/index.js","webpack:///./test/dummy/frontend/js/reducers/main/comments.js","webpack:///./test/dummy/frontend/js/reducers/main/index.js","webpack:///./test/dummy/frontend/js/reducers/main/articles.js","webpack:///./test/dummy/frontend/js/stores/main/index.js","webpack:///./test/dummy/frontend/js/selectors/index.js","webpack:///./test/dummy/frontend/js/selectors/articles.js","webpack:///./test/dummy/frontend/js/models/user.coffee","webpack:///./test/dummy/frontend/js/components/admin/comment.js","webpack:///./test/dummy/frontend/js/components/admin/CommentList.js","webpack:///./test/dummy/frontend/js/views/admin/articles/Edit.js","webpack:///./test/dummy/frontend/js/views/admin/articles/Form.js","webpack:///./test/dummy/frontend/js/components/admin/Article.js","webpack:///./test/dummy/frontend/js/containers/admin/StatefulArticleList.js","webpack:///./test/dummy/frontend/js/controllers/admin/Articles.js","webpack:///./test/dummy/frontend/js/views/admin/comments/Form.js","webpack:///./test/dummy/frontend/js/controllers/admin/Comments.js","webpack:///./test/dummy/frontend/js/views/admin/sessions/form.coffee","webpack:///./test/dummy/frontend/js/controllers/admin/sessions.coffee","webpack:///./test/dummy/frontend/js/components/admin/User.js","webpack:///./test/dummy/frontend/js/containers/admin/StatefulUserList.js","webpack:///./test/dummy/frontend/js/views/admin/users/Show.js","webpack:///./test/dummy/frontend/js/views/admin/users/Form.js","webpack:///./test/dummy/frontend/js/controllers/admin/Users.js","webpack:///./test/dummy/frontend/js/controllers/Admin.js","webpack:///./test/dummy/frontend/js/components/main/Comment.js","webpack:///./test/dummy/frontend/js/containers/main/articles/StatefulCommentList.js","webpack:///./test/dummy/frontend/js/containers/main/articles/CommentsNumber.js","webpack:///./test/dummy/frontend/js/views/main/articles/Show.js","webpack:///./test/dummy/frontend/js/controllers/main/Articles.js","webpack:///./test/dummy/frontend/js/containers/main/pages/LoadMoreLink.js","webpack:///./test/dummy/frontend/js/components/main/Article.js","webpack:///./test/dummy/frontend/js/containers/main/pages/StatefulArticleList.js","webpack:///./test/dummy/frontend/js/controllers/main/Pages.js","webpack:///./test/dummy/frontend/js/views/main/users/user_registration_form.coffee","webpack:///./test/dummy/frontend/js/controllers/main/users.coffee","webpack:///./test/dummy/frontend/js/controllers/Main.js","webpack:///./test/dummy/frontend/js/services/Connectivity.js","webpack:///./test/dummy/frontend/js/initializers/loco.js","webpack:///./test/dummy/frontend/js/validators/vulgarity.coffee","webpack:///./test/dummy/frontend/js/validators/index.js","webpack:///./test/dummy/frontend/js/locales/base/pl.coffee","webpack:///./test/dummy/frontend/js/locales/models/user/pl.coffee","webpack:///./test/dummy/frontend/js/locales/validators/en.vulgarity.coffee","webpack:///./test/dummy/frontend/js/locales/validators/pl.vulgarity.coffee","webpack:///./test/dummy/frontend/js/controllers/index.js","webpack:///./test/dummy/frontend/js/models/index.js","webpack:///./test/dummy/frontend/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Rails","start","flash_coffee","superClass","Flash","opts","ref","ref1","ref2","ref3","__super__","constructor","this","notice","alert","warning","hide","child","parent","hasProp","ctor","loco","Base","setNotice","text","setAlert","setWarning","render","node","document","querySelector","classList","remove","add","textContent","hideAfterTime","time","setTimeout","disconnection_coffee","disconnectedForTooLong","combineReducers","articles","state","arguments","undefined","action","type","concat","_toConsumableArray","payload","filter","article","id","index","comments","_objectSpread","_defineProperty","articleId","comments_toConsumableArray","comment","find","indexOf","store","createStore","reducer","user_coffee","User","user_coffee_hasProp","show_coffee","Show","show_coffee_hasProp","renderArticle","connectWith","receiver","getElementById","title","content","publishedAt","style","display","_handlePublishing","_updateEditLink","articleReceivedSignal","signal","reload","then","_this","applyChanges","location","href","addEventListener","e","preventDefault","target","put","res","outerHTML","err","getAttribute","setAttribute","replace","comment_coffee","Comment","comment_coffee_hasProp","identity","remoteName","resources","url","paginate","per","main","param","admin","attributes","author","validations","presence","vulgarity","createdAt","updatedAt","emotion","pinned","adminRate","approved","receivedSignal","commentsForArticle","_ref","approveLink","_ref$isAdmin","isAdmin","_useState2","_slicedToArray","useState","approving","setApproving","Services","Date","strftime","handleApproving","updateAttribute","ok","dispatch","CommentModel","Comment_objectSpread","react_default","a","createElement","Fragment","className","onClick","data-method","data-confirm","propTypes","PropTypes","instanceOf","isRequired","bool","CommentList","props","CommentList_slicedToArray","setComments","useEffect","unsubscribe","subscribe","getState","list","map","user_Comment","number","arrayOf","form_coffee","Form","form","changes","form_coffee_hasProp","stores_user","_handleApplyingChanges","for","renderComments","all","resp","react_dom","user_CommentList","mark","_displayChanges","attrib","results","sel","getAttrRemoteName","len","querySelectorAll","attrName","getAttrName","is","fill","article_coffee","Article","published","article_coffee_hasProp","within","minimum","commentsCount","adminReview","categoryId","adminReviewStartedAt","validate","vulgarityLevel","exec","addErrorMessage","setDefaultValuesForAdminReview","now","onArticleDestroyed","confirm","delete","success","ArticleModel","func","ArticleList","ArticleList_slicedToArray","setArticles","user_Article","articles_coffee","articles_coffee_hasProp","initialize","layout","flash","params","message","user_ArticleList","show","showView","edit","view","member_coffee","Member","member_coffee_hasProp","room_coffee","Room","room_coffee_hasProp","list_coffee","List","list_coffee_hasProp","renderedRoom","roomNode","_memberJoined","room_id","_memberLeft","_renderRoom","room","insertAdjacentHTML","parentNode","removeChild","roomId","_membersNode","parseInt","rooms_show_coffee","rooms_show_coffee_hasProp","_handleSendingMessage","renderMembers","members","member","receivedMessage","renderedMessage","event","keyCode","emit","txt","li","username","rooms_coffee","rooms_coffee_hasProp","setView","Mix","Controllers","Disconnection","assign","Articles","Rooms","notification_center_coffee","_pingSignal","_messageSignal","namespaceController","controllers_User","_getRoomView","controller","getView","articles_toConsumableArray","users","users_toConsumableArray","main_articles_toConsumableArray","comments_objectSpread","comments_defineProperty","main_comments_toConsumableArray","createFinder","resourceType","parentId","resource","findArticle","findComment","models_user_coffee","models_user_coffee_hasProp","email","format","with","password","on","confirmation","passwordConfirmation","confirmed","console","log","admin_comment","Edit","Edit_classCallCheck","Edit_possibleConstructorReturn","Edit_getPrototypeOf","Views","_this2","_renderArticle","renderElement","admin_CommentList","Form_classCallCheck","Form_possibleConstructorReturn","Form_getPrototypeOf","UI","date","toString","ArticleListWrapper","StatefulArticleList_slicedToArray","admin_Article","StatefulArticleList","editView","comments_Form_classCallCheck","comments_Form_possibleConstructorReturn","comments_Form_getPrototypeOf","commentId","initObj","Env","test","commentFormObj","getObj","Comments","sessions_form_coffee","sessions_form_coffee_hasProp","delegator","callbackSuccess","_signedIn","sessions_coffee","sessions_coffee_hasProp","user","userId","user_id","ping","UserModel","UserListWrapper","StatefulUserList_slicedToArray","setUsers","admin_User","Show_classCallCheck","Show_possibleConstructorReturn","Show_getPrototypeOf","editLink","users_Form_classCallCheck","users_Form_possibleConstructorReturn","users_Form_getPrototypeOf","Users","StatefulUserList","Admin","setScope","Sessions","StatefulCommentList","StatefulCommentList_slicedToArray","main_Comment","CommentsNumber","CommentsNumber_slicedToArray","articles_Show_classCallCheck","articles_Show_possibleConstructorReturn","articles_Show_getPrototypeOf","newComment","dateService","textEl","innerHTML","Helpers","Text","simpleFormat","total","React","LoadMoreLink","LoadMoreLink_slicedToArray","page","setPage","_useState4","noMorePosts","setNoMorePosts","handleClick","currentPage","catch","pages_StatefulArticleList_slicedToArray","main_Article","Pages","pages_StatefulArticleList","user_registration_form_coffee","UserRegistrationForm","user_registration_form_coffee_hasProp","_confirming","_confirmed","_created","users_coffee","users_coffee_hasProp","Main","commentsChanged","_ref4","diff","article_id","mainStore","AdminController","adminStore","UserController","userStore","_findArticle4","Connectivity_slicedToArray","Connectivity_objectSpread","Connectivity","Connectivity_classCallCheck","Connectivity_possibleConstructorReturn","Connectivity_getPrototypeOf","abbr","_ref2","articlePublished","_ref3","findParams","_findArticle2","articleUpdated","_ref5","MainController","commentCreated","_ref6","commentDestroyed","_ref7","_findComment2","commentUpdated","Deps","cable","ActionCable","createConsumer","NotificationCenter","connectivity","Loco","notifications","enable","size","postInit","getWire","setPollingTime","init","vulgarity_coffee","Vulgarity","vulgarity_coffee_hasProp","vulgarWord","val","_getVulgarWord","RegExp","_addErrorMessage","TypeError","attr","getLocale","errors","messages","obj","Validators","pl","variants","few","num","String","last","models","ui","sending","connection","invalid_data","formats","default","short","long","day_names","abbr_day_names","month_names","abbr_month_names","accepted","blank","empty","equal_to","even","exclusion","greater_than","greater_than_or_equal_to","inclusion","invalid","less_than","less_than_or_equal_to","not_a_number","not_an_integer","odd","present","too_long","many","one","other","too_short","wrong_length","other_than","en","Models","Channels"],"mappings":"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","file":"application.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([129,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import Rails from \"rails-ujs\";\n\nRails.start();\n","import { Views } from \"loco-js\"\n\nclass Flash extends Views.Base\n  constructor: (opts = {}) ->\n    super opts\n    @notice = opts.notice ? null\n    @alert = opts.alert ? null\n    @warning = opts.warning ? null\n    @hide = opts.hide ? true\n\n  setNotice: (text) -> @notice = text\n  setAlert: (text) -> @alert = text\n  setWarning: (text) -> @warning = text\n\n  render: ->\n    node = document.querySelector('.flash')\n    node.classList.remove('notice')\n    node.classList.remove('alert')\n    node.classList.remove('warning')\n    if @notice?\n      node.classList.add('notice')\n      document.querySelector('.flash p').textContent = @notice\n    else if @alert?\n      node.classList.add('alert')\n      document.querySelector('.flash p').textContent = @alert\n    else if @warning?\n      node.classList.add('warning')\n      document.querySelector('.flash p').textContent = @warning\n    node.classList.remove('none') # slideDown initially\n    this.hideAfterTime() if @hide\n\n  hideAfterTime: (time = 4000) ->\n    setTimeout ->\n      document.querySelector('.flash').classList.add('none') # slideUp initially\n    , time\n\nexport default Flash","import Flash from \"views/shared/flash.coffee\"\n\nclass Disconnection\n  disconnectedForTooLong: (time) ->\n    msg = \"You have been disconnected from the server for too long. Reload page!\"\n    view = new Flash alert: msg, hide: false\n    view.render()\n\nexport default Disconnection","export default (state = {}, action) => {\n  switch (action.type) {\n    case \"ADD_COMMENTS\":\n      return {\n        ...state,\n        [action.payload.articleId]: [\n          ...state[action.payload.articleId],\n          ...action.payload.comments\n        ]\n      };\n    case \"REMOVE_COMMENT\":\n      if (state[action.payload.articleId] == null) return state;\n      return {\n        ...state,\n        [action.payload.articleId]: state[action.payload.articleId].filter(\n          comment => comment.id !== action.payload.id\n        )\n      };\n    case \"SET_COMMENTS\":\n      return { [action.payload.articleId]: action.payload.comments };\n    case \"UPDATE_COMMENT\": {\n      const articleId = action.payload.articleId;\n      let index = action.payload.index;\n      if (!index) {\n        const comment = state[articleId].find(\n          c => c.id === action.payload.comment.id\n        );\n        index = state[articleId].indexOf(comment);\n      }\n      return {\n        ...state,\n        [articleId]: [\n          ...state[articleId].slice(0, index),\n          action.payload.comment,\n          ...state[articleId].slice(index + 1)\n        ]\n      };\n    }\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\n\nimport articles from \"./articles\";\nimport comments from \"./comments\";\n\nexport default combineReducers({\n  articles,\n  comments\n});\n","export default (state = [], action) => {\n  switch (action.type) {\n    case \"ADD_ARTICLES\":\n      return [...state, ...action.payload.articles];\n    case \"REMOVE_ARTICLE\":\n      return state.filter(article => article.id !== action.payload.id);\n    case \"SET_ARTICLES\":\n      return [...action.payload.articles];\n    case \"UPDATE_ARTICLE\":\n      return [\n        ...state.slice(0, action.payload.index),\n        action.payload.article,\n        ...state.slice(action.payload.index + 1)\n      ];\n    default:\n      return state;\n  }\n};\n","import { createStore } from \"redux\";\n\nimport reducer from \"reducers/user\";\n\nconst store = createStore(reducer, { articles: [], comments: {} });\n\nexport default store;\n","import { Views } from \"loco-js\";\n\nclass User extends Views.Base\n  constructor: (opts = {}) -> super opts\n\nexport default User;\n","import { Views } from \"loco-js\";\n\nimport FlashView from \"views/shared/flash.coffee\";\n\nclass Show extends Views.Base\n  constructor: (opts = {}) ->\n    super opts\n    @article = null\n\n  renderArticle: (article = null) ->\n    if not @article?\n      this.connectWith article, receiver: \"articleReceivedSignal\"\n      @article = article\n    document.getElementById('article_title').textContent = @article.title\n    document.getElementById('article_text').textContent = @article.content\n    node = document.getElementById('publish_article')\n    if node and @article.publishedAt?\n      node.style.display = 'none'\n    else if node\n      node.style.display = ''\n    this._handlePublishing()\n    this._updateEditLink()\n\n  articleReceivedSignal: (signal, data) ->\n    switch signal\n      when \"updated\"\n        @article.reload().then =>\n          @article.applyChanges()\n          this.renderArticle()\n      when \"destroyed\"\n        window.location.href = \"/user/articles?message=deleted\"\n\n  _handlePublishing: ->\n    document.getElementById('publish_article').addEventListener 'click', (e) =>\n      e.preventDefault()\n      e.target.textContent = 'Publishing...'\n      @article.put(\"publish\")\n      .then (res) ->\n        document.getElementById('publish_article').outerHTML = '<span>Published!</span>'\n      .catch (err) ->\n        e.target.textContent = 'Publish'\n        flash = new FlashView alert: \"Connection error!\"\n        flash.render()\n\n  _updateEditLink: ->\n    href = document.getElementById('edit_link').getAttribute('href')\n    document.getElementById('edit_link').setAttribute('href', href.replace(\"/0/\", \"/#{@article.id}/\"))\n\nexport default Show;\n","import { Models } from \"loco-js\"\n\nclass Comment extends Models.Base\n  @identity = \"Article.Comment\"\n  @remoteName = \"Comment\"\n  @resources =\n    url: '/user/articles/:articleId/comments', paginate: {per: 10}\n    main:\n      url: '/articles/:articleId/comments', paginate: {per: 5, param: \"page-num\"}\n    admin:\n      url: '/admin/articles/:articleId/comments', paginate: {per: 5}\n\n  @attributes =\n    author:\n      validations:\n        presence: true\n    text:\n      validations:\n        presence: true\n        vulgarity: true\n    articleId:\n      type: \"Int\"\n      validations:\n        presence: true\n      remoteName: \"article_id\"\n    createdAt:\n      type: \"Date\"\n      remoteName: \"created_at\"\n    updatedAt:\n      type: \"Date\"\n      remoteName: \"updated_at\"\n    emotion:\n      type: \"Int\"\n    pinned:\n      type: \"Boolean\"\n    adminRate:\n      type: \"Int\"\n      remoteName: \"admin_rate\"\n    approved:\n      type: \"Boolean\"\n\n  constructor: (data) -> super data\n\n  @receivedSignal: (signal, data) ->\n\n  receivedSignal: (signal, data) ->\n\nexport default Comment\n","export const commentsForArticle = (state, articleId) => {\n  return state.comments[articleId];\n};\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Services } from \"loco-js\";\n\nimport store from \"stores/user\";\n\nimport CommentModel from \"models/article/comment.coffee\";\n\nfunction Comment({ comment, isAdmin = false }) {\n  const [approving, setApproving] = useState(false);\n\n  const createdAt = new Services.Date(comment.createdAt).strftime(\"%d %b %y\");\n\n  const handleApproving = e => {\n    e.preventDefault();\n    setApproving(true);\n    comment.approved = true;\n    comment.updateAttribute(\"approved\").then(res => {\n      if (!res.ok) return;\n      store.dispatch({\n        type: \"UPDATE_COMMENT\",\n        payload: {\n          articleId: comment.articleId,\n          comment: new CommentModel({ ...comment, approved: true })\n        }\n      });\n    });\n  };\n\n  const adminSection = () => {\n    let approveLink;\n\n    if (comment.approved) {\n      approveLink = (\n        <>\n          <span>approved</span> |{\" \"}\n        </>\n      );\n    } else if (approving) {\n      approveLink = (\n        <>\n          <span>approving...</span> |{\" \"}\n        </>\n      );\n    } else {\n      approveLink = (\n        <>\n          <a\n            href={`/user/articles/${comment.articleId}/comments/${\n              comment.id\n            }/approve`}\n            className=\"approve\"\n            onClick={handleApproving}\n          >\n            approve\n          </a>{\" \"}\n          |{\" \"}\n        </>\n      );\n    }\n\n    return (\n      <>\n        {\" \"}\n        ({approveLink}\n        <a\n          href={`/user/articles/${comment.articleId}/comments/${\n            comment.id\n          }/edit`}\n        >\n          edit\n        </a>{\" \"}\n        |{\" \"}\n        <a\n          href={`/user/articles/${comment.articleId}/comments/${comment.id}`}\n          data-method=\"delete\"\n          data-confirm=\"Are you sure?\"\n        >\n          delete\n        </a>\n        )\n      </>\n    );\n  };\n\n  return (\n    <p id={`comment_${comment.id}`}>\n      <b>{comment.author}</b> on <i>{createdAt}</i>\n      {isAdmin ? adminSection() : \"\"}\n      <br />\n      {comment.text}\n    </p>\n  );\n}\n\nComment.propTypes = {\n  comment: PropTypes.instanceOf(CommentModel).isRequired,\n  isAdmin: PropTypes.bool\n};\n\nexport default Comment;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/user\";\nimport { commentsForArticle } from \"selectors/comments\";\nimport Comment from \"containers/user/Comment\";\nimport CommentModel from \"models/article/comment.coffee\";\n\nfunction CommentList(props) {\n  const articleId = props.articleId;\n  const isAdmin = props.isAdmin || false;\n  const [comments, setComments] = useState(props.comments);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() =>\n      setComments(commentsForArticle(store.getState(), articleId))\n    );\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  if (comments.length === 0) return <p>No comments.</p>;\n\n  const list = comments.map(comment => (\n    <Comment key={comment.id} comment={comment} isAdmin={isAdmin} />\n  ));\n\n  return <>{list}</>;\n}\n\nCommentList.propTypes = {\n  articleId: PropTypes.number.isRequired,\n  isAdmin: PropTypes.bool,\n  comments: PropTypes.arrayOf(PropTypes.instanceOf(CommentModel)).isRequired\n};\n\nexport default CommentList;\n","import React from \"react\";\nimport { render as renderElement } from \"react-dom\";\nimport { UI, Views } from \"loco-js\";\n\nimport store from \"stores/user\";\n\nimport Comment from \"models/article/comment.coffee\";\n\nimport FlashView from \"views/shared/flash.coffee\";\n\nimport CommentList from \"containers/user/CommentList\";\n\nclass Form extends Views.Base\n  constructor: (opts = {}) ->\n    super(opts);\n    this.article = null;\n    this.form = null;\n    this.changes = null;\n\n  render: (article) ->\n    store.dispatch({\n      type: \"ADD_ARTICLES\",\n      payload: { articles: [article] }\n    });\n    this.article = article\n    this.connectWith(this.article);\n    this._handleApplyingChanges()\n    this.form = new UI.Form for: @article\n    this.form.render()\n\n  renderComments: (articleId) ->\n    Comment.all(articleId: articleId).then (resp) =>\n      store.dispatch({\n        type: \"SET_COMMENTS\",\n        payload: { articleId: articleId, comments: resp.resources }\n      });\n      renderElement(\n        React.createElement(CommentList, {\n          articleId: articleId,\n          comments: resp.resources,\n          isAdmin: true\n        }),\n        document.getElementById(\"comments\");\n      );\n\n  receivedSignal: (signal, data) ->\n    switch signal\n      when \"updating\"\n        if document.querySelector('h1').getAttribute('data-mark') isnt data.mark\n          flash = new FlashView warning: 'Uuups someone else started editing this article.'\n          flash.render()\n      when \"updated\"\n        @article.reload().then =>\n          this.changes = @article.changes()\n          this._displayChanges()\n      when \"destroyed\"\n        window.location.href = \"/user/articles?message=deleted\"\n\n  _displayChanges: ->\n    for attrib, changes of this.changes\n      sel = document.querySelector(\"a.apply_changes[data-for=#{@article.getAttrRemoteName(attrib)}]\")\n      continue unless sel\n      sel.classList.remove('none')\n\n  _handleApplyingChanges: ->\n    for sel in document.querySelectorAll('a.apply_changes')\n      sel.addEventListener 'click', (e) =>\n        e.preventDefault()\n        attrName = @article.getAttrName(e.target.getAttribute('data-for'))\n        @article[attrName] = this.changes[attrName].is\n        this.form.fill attrName\n        e.target.classList.add('none')\n\nexport default Form;\n","import { Models } from \"loco-js\"\n\nclass Article extends Models.Base\n  @identity = \"Article\"\n  @resources =\n    url: '/user/articles', paginate: {per: 5}\n    main:\n      url: '/articles', paginate: {per: 3}\n    admin:\n      url: '/admin/articles', paginate: {per: 4}\n\n  @attributes =\n    title:\n      validations:\n        presence: true\n        length: {within: [3, 255]}\n    content:\n      validations:\n        presence: true\n        length: {minimum: 100}\n      remoteName: \"text\"\n    createdAt:\n      type: \"Date\"\n      remoteName: \"created_at\"\n    updatedAt:\n      type: \"Date\"\n      remoteName: \"updated_at\"\n    commentsCount:\n      type: \"Int\"\n      remoteName: \"comments_count\"\n    publishedAt:\n      type: \"Date\"\n      remoteName: \"published_at\"\n    published: {}\n    adminReview:\n      remoteName: \"admin_review\"\n    adminRate:\n      type: \"Int\"\n      remoteName: \"admin_rate\"\n    categoryId:\n      type: \"Int\"\n      remoteName: \"category_id\"\n    adminReviewStartedAt:\n      remoteName: \"admin_review_started_at\"\n\n  @receivedSignal: (signal, data) ->\n\n  @validate = [\"vulgarityLevel\"]\n\n  constructor: (data) ->\n    super data\n    @published = if @publishedAt? then true else false\n\n  receivedSignal: (signal, data) ->\n\n  vulgarityLevel: ->\n    if (this.title? and /fuck/i.exec(this.title)) or (this.content? and /fuck/i.exec(this.content))\n      this.addErrorMessage \"Article contains strong language.\", for: 'base'\n\n  setDefaultValuesForAdminReview: ->\n    @adminRate ?= 3\n    @categoryId ?= 6\n    @adminReviewStartedAt = Date.now()\n\nexport default Article\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport ArticleModel from \"models/article.coffee\";\n\nimport store from \"stores/user\";\n\nfunction Article({ article, onArticleDestroyed }) {\n  const handleDeletingArticle = e => {\n    e.preventDefault();\n    if (!confirm(\"Are you sure?\")) return;\n    article.delete(null).then(data => {\n      if (data.success) {\n        store.dispatch({\n          type: \"REMOVE_ARTICLE\",\n          payload: { id: data.id }\n        });\n      }\n      onArticleDestroyed(data);\n    });\n  };\n\n  return (\n    <tr id={`article_${article.id}`}>\n      <td>{article.title}</td>\n      <td>{article.content}</td>\n      <td className=\"comments_quantity\">{article.commentsCount}</td>\n      <td className=\"published\">{article.publishedAt ? \"yes\" : \"no\"}</td>\n      <td>\n        <a href={`/user/articles/${article.id}`}>Show</a> |\n        <a href={`/user/articles/${article.id}/edit`}>Edit</a> |\n        <a\n          href={`/user/articles/${article.id}`}\n          className=\"delete_article\"\n          onClick={handleDeletingArticle}\n        >\n          Delete\n        </a>\n      </td>\n    </tr>\n  );\n}\n\nArticle.propTypes = {\n  article: PropTypes.instanceOf(ArticleModel).isRequired,\n  onArticleDestroyed: PropTypes.func.isRequired\n};\n\nexport default Article;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/user\";\nimport Article from \"components/user/Article\";\nimport ArticleModel from \"models/article.coffee\";\n\nfunction ArticleList(props) {\n  const [articles, setArticles] = useState(props.articles);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() =>\n      setArticles(store.getState().articles)\n    );\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  const list = articles.map(article => (\n    <Article\n      key={article.id}\n      article={article}\n      onArticleDestroyed={props.onArticleDestroyed}\n    />\n  ));\n\n  return <>{list}</>;\n}\n\nArticleList.propTypes = {\n  articles: PropTypes.arrayOf(PropTypes.instanceOf(ArticleModel)).isRequired,\n  onArticleDestroyed: PropTypes.func.isRequired\n};\n\nexport default ArticleList;\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Controllers } from \"loco-js\"\n\nimport store from \"stores/user\";\n\nimport UserLayout from \"views/layouts/user.coffee\";\nimport FlashView from \"views/shared/flash.coffee\";\nimport ShowView from \"views/user/articles/show.coffee\";\nimport FormView from \"views/user/articles/form.coffee\";\n\nimport Article from \"models/article.coffee\";\nimport Comment from \"models/article/comment.coffee\";\n\nimport ArticleList from \"containers/user/ArticleList\";\nimport CommentList from \"containers/user/CommentList\";\n\nclass Articles extends Controllers.Base\n  initialize: ->\n    this.layout = new UserLayout\n\n  onArticleDestroyed: (res) ->\n    flash = new FlashView\n    if res.success\n      flash.setNotice res.notice\n    else\n      flash.setAlert res.alert\n    flash.render()\n\n  index: ->\n    if this.params.message is 'deleted'\n      flash = new FlashView alert: 'Article has been deleted.'\n      flash.render()\n    Article.get(\"all\").then (resp) =>\n      store.dispatch({\n        type: \"SET_ARTICLES\",\n        payload: { articles: resp.resources }\n      });\n      render(\n        React.createElement(ArticleList, {\n          articles: resp.resources,\n          onArticleDestroyed: this.onArticleDestroyed\n        }),\n        document.getElementById(\"article_list\");\n      );\n\n  show: ->\n    this.showView = new ShowView\n    Article.find(this.params.id).then (article) =>\n      store.dispatch({\n        type: \"SET_ARTICLES\",\n        payload: { articles: [article] }\n      });\n      this.showView.renderArticle(article)\n    Comment.all(articleId: this.params.id).then (resp) =>\n      store.dispatch({\n        type: \"SET_COMMENTS\",\n        payload: { articleId: this.params.id, comments: resp.resources }\n      });\n      render(\n        React.createElement(CommentList, {\n          articleId: this.params.id,\n          comments: resp.resources\n        }),\n        document.getElementById(\"comments\");\n      );\n\n  new: ->\n    (new FormView).render(new Article);\n\n  edit: ->\n    view = new FormView;\n    Article.find(this.params.id).then (article) -> view.render(article)\n    view.renderComments(this.params.id)\n\nexport default Articles\n","import { Models } from \"loco-js\"\n\nclass Member extends Models.Base\n  @identity = \"Room.Member\"\n  @resources =\n    url: '/user/rooms/:roomId/members', paginate: {per: 100}\n\n  @attributes = {}\n\n  @receivedSignal: (signal, data) ->\n\n  @validate = []\n\n  constructor: (data) ->\n    super data\n\n  receivedSignal: (signal, data) ->\n\nexport default Member\n","import { Models } from \"loco-js\"\n\nclass Room extends Models.Base\n  @identity = \"Room\"\n  @resources = {}\n\n  @attributes = {}\n\n  @receivedSignal: (signal, data) ->\n\n  @validate = []\n\n  constructor: (data) ->\n    super data\n\n  receivedSignal: (signal, data) ->\n\nexport default Room;","import { Views } from \"loco-js\";\n\nimport Room from \"models/room.coffee\";\n\nclass List extends Views.Base\n  constructor: (opts = {}) ->\n    super(opts);\n\n  render: ->\n    this.connectWith(Room);\n\n  receivedSignal: (signal, data) ->\n    switch signal\n      when \"Room member_joined\"\n        this._memberJoined data.room_id\n      when \"Room member_left\"\n        this._memberLeft data.room_id\n      when \"Room created\"\n        renderedRoom = this._renderRoom(data.room);\n        document.getElementById('rooms_list').insertAdjacentHTML('beforeend', renderedRoom)\n      when \"Room destroyed\"\n        roomNode = document.getElementById(\"room_#{data.room_id}\")\n        roomNode.parentNode.removeChild(roomNode)\n\n  _memberJoined: (roomId) ->\n    node = this._membersNode roomId\n    node.textContent = parseInt(node.text()) + 1\n\n  _memberLeft: (roomId) ->\n    node = this._membersNode roomId\n    node.textContent = parseInt(node.text()) - 1\n\n  _membersNode: (roomId) ->\n    document.querySelector(\"#room_#{roomId} td.members\")\n\n  _renderRoom: (room) ->\n    \"\n    <tr id='room_#{room.id}'>\n      <td>#{room.name}</td>\n      <td class='members'>0</td>\n      <td>\n        <a rel='nofollow' data-method='patch' href='/user/rooms/#{room.id}/join'>Join</a> |\n        <a data-confirm='R U sure?' rel='nofollow' data-method='delete'\n          href='/user/rooms/#{room.id}'>Destroy</a>\n      </td>\n    </tr>\n    \"\n\nexport default List;","import { Env, Views } from \"loco-js\";\n\nimport Room from \"models/room.coffee\";\n\nclass Show extends Views.Base\n  constructor: (opts = {}) ->\n    super opts\n    @roomId = opts.id\n\n  render: ->\n    this.connectWith(Room);\n    this._handleSendingMessage()\n\n  renderMembers: (members) ->\n    for member in members\n      this._memberJoined member\n\n  receivedMessage: (message, author) ->\n    renderedMessage = \"<p><b>#{author}</b>: #{message}</p>\"\n    document.getElementById('messages').insertAdjacentHTML('beforeend', renderedMessage)\n\n  receivedSignal: (signal, data) ->\n    switch signal\n      when \"Room member_joined\"\n        return if data.room_id isnt @roomId\n        this._memberJoined data.member\n      when \"Room member_left\"\n        return if data.room_id isnt @roomId\n        this._memberLeft data.member\n\n  _handleSendingMessage: ->\n    document.querySelector('[data-behavior~=room-speaker]').addEventListener 'keypress', (event) =>\n      return if event.keyCode isnt 13\n      event.preventDefault()\n      Env.loco.emit(signal: 'message', txt: event.target.value, room_id: @roomId);\n      event.target.value = ''\n\n  _memberJoined: (member) ->\n    li = \"<li id='user_#{member.id}'>#{member.username}</li>\"\n    document.getElementById('members').insertAdjacentHTML('beforeend', li)\n\n  _memberLeft: (member) ->\n    node = document.querySelector(\"#members li#user_#{member.id}\")\n    node.parentNode.removeChild(node)\n\nexport default Show;\n","import { Controllers } from \"loco-js\";\n\nimport Member from \"models/room/member.coffee\";\n\nimport List from \"views/user/rooms/list.coffee\";\nimport Show from \"views/user/rooms/show.coffee\";\n\nclass Rooms extends Controllers.Base\n  initialize: ->\n\n  index: ->\n    view = new List\n    view.render()\n\n  show: ->\n    view = new Show id: @params.id\n    this.setView 'show', view\n    view.render()\n    Member.all(roomId: @params.id).then (resp) ->\n      view.renderMembers resp.resources\n\nexport default Rooms;","import { Controllers, Mix } from \"loco-js\";\n\nimport Disconnection from \"./concerns/disconnection.coffee\";\nimport Articles from \"./user/articles.coffee\";\nimport Rooms from \"./user/rooms.coffee\";\n\nclass User extends Mix(Controllers.Base, Disconnection) {}\n\nObject.assign(User, {\n  Articles,\n  Rooms\n});\n\nexport default User;\n","import { Env } from \"loco-js\";\n\nimport UserController from \"controllers/User\";\nimport RoomsController from \"controllers/user/rooms.coffee\";\n\nclass NotificationCenter\n  receivedSignal: (data) ->\n    switch data.signal\n      when 'ping'\n        this._pingSignal()\n      when 'message'\n        this._messageSignal data\n\n  _pingSignal: ->\n    return if Env.namespaceController.constructor isnt UserController\n    alert 'Ping!'\n\n  _messageSignal: (data) ->\n    return if not view = this._getRoomView()\n    view.receivedMessage data.message, data.author\n\n  _getRoomView: ->\n    return false if Env.namespaceController.constructor isnt UserController\n    return false if Env.controller.constructor isnt RoomsController\n    return false if Env.action isnt 'show'\n    Env.controller.getView 'show'\n\nexport default NotificationCenter","export default (state = [], action) => {\n  switch (action.type) {\n    case \"APPEND_USER\":\n      return [...state, ...action.payload.users];\n    case \"SET_USERS\":\n      return [...action.payload.users];\n    case \"PREPEND_USER\":\n      return [...action.payload.users, ...state];\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\n\nimport articles from \"./articles\";\nimport users from \"./users\";\n\nexport default combineReducers({\n  articles,\n  users\n});\n","export default (state = [], action) => {\n  switch (action.type) {\n    case \"PREPEND_ARTICLE\":\n      return [...action.payload.articles, ...state];\n    case \"SET_ARTICLES\":\n      return [...action.payload.articles];\n    case \"UPDATE_ARTICLE\":\n      return [\n        ...state.slice(0, action.payload.index),\n        action.payload.article,\n        ...state.slice(action.payload.index + 1)\n      ];\n    default:\n      return state;\n  }\n};\n","import { createStore } from \"redux\";\n\nimport reducer from \"reducers/admin\";\n\nconst store = createStore(reducer, { users: [], articles: [] });\n\nexport default store;\n","export default (state = {}, action) => {\n  switch (action.type) {\n    case \"ADD_COMMENTS\":\n      return {\n        ...state,\n        [action.payload.articleId]: [\n          ...state[action.payload.articleId],\n          ...action.payload.comments\n        ]\n      };\n    case \"REMOVE_COMMENT\":\n      if (state[action.payload.articleId] == null) return state;\n      return {\n        ...state,\n        [action.payload.articleId]: state[action.payload.articleId].filter(\n          comment => comment.id !== action.payload.id\n        )\n      };\n    case \"SET_COMMENTS\":\n      return { [action.payload.articleId]: action.payload.comments };\n    case \"UPDATE_COMMENT\": {\n      const articleId = action.payload.articleId;\n      return {\n        ...state,\n        [articleId]: [\n          ...state[articleId].slice(0, action.payload.index),\n          action.payload.comment,\n          ...state[articleId].slice(action.payload.index + 1)\n        ]\n      };\n    }\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\n\nimport articles from \"./articles\";\nimport comments from \"./comments\";\n\nexport default combineReducers({\n  articles,\n  comments\n});\n","export default (state = [], action) => {\n  switch (action.type) {\n    case \"ADD_ARTICLES\":\n      return [...state, ...action.payload.articles];\n    case \"SET_ARTICLES\":\n      return [...action.payload.articles];\n    case \"UPDATE_ARTICLE\":\n      return [\n        ...state.slice(0, action.payload.index),\n        action.payload.article,\n        ...state.slice(action.payload.index + 1)\n      ];\n    default:\n      return state;\n  }\n};\n","import { createStore } from \"redux\";\n\nimport reducer from \"reducers/main\";\n\nconst store = createStore(reducer, { articles: [], comments: {} });\n\nexport default store;\n","export const createFinder = resourceType => {\n  return function find(state, id, opts = {}) {\n    let resources = state[resourceType];\n    if (opts.parentId) resources = resources[opts.parentId];\n    const resource = resources.find(a => a.id === id);\n    if (!resource) return [null, null];\n    const index = resources.indexOf(resource);\n    return [resource, index];\n  };\n};\n","import { createFinder } from \"./index\";\n\nexport const findArticle = createFinder(\"articles\");\n\nexport const findComment = createFinder(\"comments\");\n","import { Models } from \"loco-js\"\n\nclass User extends Models.Base\n  @identity = \"User\"\n  @resources =\n    url: \"/users\"\n    admin:\n      url: \"/admin/users\"\n\n  @paginate = {per: 10}\n\n  @attributes =\n    email:\n      validations:\n        presence: true\n        format: {with: /^([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})$/i}\n    username:\n      validations:\n        presence: true\n        format: {with: /^[a-z][a-z0-9_\\-]*$/i}\n    password:\n      validations:\n        presence: {on: \"create\"}\n        confirmation: true\n    passwordConfirmation:\n      remoteName: \"password_confirmation\"\n    confirmed: {}\n    createdAt:\n      type: \"Date\"\n      remoteName: \"created_at\"\n    updatedAt:\n      type: \"Date\"\n      remoteName: \"updated_at\"\n\n  @receivedSignal: (signal, data) -> console.log \"User.receivedSignal: #{signal}\"\n\n  constructor: (data) -> super data\n\n  receivedSignal: (signal, data) -> console.log \"User#receivedSignal: #{signal}\"\n\nexport default User\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Services } from \"loco-js\";\n\nimport CommentModel from \"models/article/comment.coffee\";\n\nfunction Comment({ comment }) {\n  const createdAt = new Services.Date(comment.createdAt).strftime(\"%d %b %y\");\n\n  return (\n    <p id={`comment_${comment.id}`}>\n      <b>{comment.author}</b> on <i>{createdAt}</i> (\n      <a\n        href={`/admin/articles/${comment.articleId}/comments/${\n          comment.id\n        }/edit`}\n      >\n        edit\n      </a>\n      )\n      <br />\n      {comment.text}\n    </p>\n  );\n}\n\nComment.propTypes = {\n  comment: PropTypes.instanceOf(CommentModel).isRequired\n};\n\nexport default Comment;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport CommentModel from \"models/article/comment.coffee\";\nimport Comment from \"components/admin/comment\";\n\nfunction CommentList({ comments }) {\n  if (comments.length === 0) {\n    return <p>No comments</p>;\n  }\n  return (\n    <>\n      {comments.map(comment => (\n        <Comment comment={comment} key={comment.id} />\n      ))}\n    </>\n  );\n}\n\nCommentList.propTypes = {\n  comments: PropTypes.arrayOf(PropTypes.instanceOf(CommentModel)).isRequired\n};\n\nexport default CommentList;\n","import React from \"react\";\nimport { render as renderElement } from \"react-dom\";\nimport { Views } from \"loco-js\";\n\nimport CommentList from \"components/admin/CommentList\";\n\nclass Edit extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n    this.article = null;\n  }\n\n  receivedSignal(signal) {\n    switch (signal) {\n      case \"updated\":\n        this.article.reload().then(() => {\n          this.article.applyChanges();\n          this._renderArticle();\n        });\n    }\n  }\n\n  render(article) {\n    this.article = article;\n    this.connectWith(article);\n    this._renderArticle();\n  }\n\n  renderComments(comments) {\n    renderElement(\n      <CommentList comments={comments} />,\n      document.getElementById(\"comments\")\n    );\n  }\n\n  _renderArticle() {\n    document.getElementById(\"article_author\").textContent = this.article.author;\n    document.getElementById(\"article_title\").textContent = this.article.title;\n    document.getElementById(\"article_text\").textContent = this.article.content;\n  }\n}\n\nexport default Edit;\n","import { Views, UI } from \"loco-js\";\n\nclass Form extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n  }\n\n  render(article) {\n    article.setDefaultValuesForAdminReview();\n    const form = new UI.Form({ id: \"edit_article_form\", for: article });\n    form.render();\n  }\n}\n\nexport default Form;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Services } from \"loco-js\";\n\nimport ArticleModel from \"models/article.coffee\";\n\nfunction Article({ article }) {\n  const date = new Services.Date(article.publishedAt).toString(\"short\");\n\n  return (\n    <article id={`article_${article.id}`}>\n      <h2>{article.title}</h2>\n      <p>\n        <i>\n          {article.author} wrote this on {date} /{\" \"}\n          <span className=\"comments_quantity\">\n            {article.commentsCount} comment\n            {article.commentsCount === 1 ? \"\" : \"s\"}\n          </span>\n        </i>\n      </p>\n      <p>{article.content}</p>\n      <p>\n        <a href={`/admin/articles/${article.id}/edit`}>Review</a>\n      </p>\n    </article>\n  );\n}\n\nArticle.propTypes = {\n  article: PropTypes.instanceOf(ArticleModel).isRequired\n};\n\nexport default Article;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/admin\";\nimport Article from \"components/admin/Article\";\nimport ArticleModel from \"models/article.coffee\";\n\nfunction ArticleListWrapper(props) {\n  const [articles, setArticles] = useState(props.articles);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() =>\n      setArticles(store.getState().articles)\n    );\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  const list = articles.map(article => (\n    <Article key={article.id} article={article} />\n  ));\n\n  return <>{list}</>;\n}\n\nArticleListWrapper.propTypes = {\n  articles: PropTypes.arrayOf(PropTypes.instanceOf(ArticleModel)).isRequired\n};\n\nexport default ArticleListWrapper;\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Controllers } from \"loco-js\";\n\nimport store from \"stores/admin\";\nimport Article from \"models/article.coffee\";\nimport Comment from \"models/article/comment.coffee\";\nimport Edit from \"views/admin/articles/Edit\";\nimport Form from \"views/admin/articles/Form\";\n\nimport ArticleList from \"containers/admin/StatefulArticleList\";\n\nclass Articles extends Controllers.Base {\n  published() {\n    Article.get(\"published\").then(resp => {\n      store.dispatch({\n        type: \"SET_ARTICLES\",\n        payload: { articles: resp.resources }\n      });\n      render(\n        <ArticleList articles={resp.resources} />,\n        document.getElementById(\"articles\")\n      );\n    });\n  }\n\n  edit() {\n    const editView = new Edit();\n    Article.find(this.params.id).then(article => {\n      editView.render(article);\n      new Form().render(article);\n    });\n    Comment.all({ articleId: this.params.id }).then(resp => {\n      editView.renderComments(resp.resources);\n    });\n  }\n}\n\nexport default Articles;\n","import { Env, UI, Views } from \"loco-js\";\n\nimport CommentModel from \"models/article/comment.coffee\";\n\nclass Form extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n  }\n\n  render(opts = {}) {\n    const form = new UI.Form({\n      for: new CommentModel({ id: opts.commentId, resource: \"admin\" }),\n      id: `edit_comment_${opts.commentId}`,\n      initObj: true\n    });\n    form.render();\n\n    // only for testing purpose\n    Env.test = { commentFormObj: form.getObj() };\n  }\n}\n\nexport default Form;\n","import { Controllers } from \"loco-js\";\n\nimport Form from \"views/admin/comments/Form\";\n\nclass Comments extends Controllers.Base {\n  edit() {\n    new Form().render({ commentId: this.params.id });\n  }\n}\n\nexport default Comments;\n","import { UI, Views } from \"loco-js\";\n\nclass Form extends Views.Base\n  constructor: (opts = {}) ->\n    super opts\n\n  render: ->\n    form = new UI.Form id: 'sign_in_admin', delegator: this, callbackSuccess: '_signedIn'\n    form.render()\n\n  _signedIn: ->\n    window.location.href = \"/admin\"\n\nexport default Form;\n","import { Controllers } from \"loco-js\";\n\nimport Form from \"views/admin/sessions/form.coffee\";\n\nclass Sessions extends Controllers.Base\n  new: ->\n    (new Form).render();\n\nexport default Sessions;","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Env } from \"loco-js\";\n\nimport UserModel from \"models/user.coffee\";\n\nconst User = ({ user }) => {\n  const ping = (e, userId) => {\n    e.preventDefault();\n    Env.loco.emit({ signal: \"ping\", user_id: userId });\n  };\n\n  return (\n    <tr id={`user_${user.id}`}>\n      <td>{user.email}</td>\n      <td>{user.username}</td>\n      <td className=\"confirmed\">{user.confirmed ? \"Yes\" : \"No\"}</td>\n      <td>\n        <a href={`/admin/users/${user.id}`}>Show</a> |{\" \"}\n        <a href={`/admin/users/${user.id}/edit`}>Edit</a> |{\" \"}\n        <a\n          href={`/admin/users/${user.id}`}\n          data-method=\"delete\"\n          data-confirm=\"Are you sure?\"\n        >\n          Delete\n        </a>{\" \"}\n        |{\" \"}\n        <a href=\"#\" onClick={e => ping(e, user.id)}>\n          Ping\n        </a>\n      </td>\n    </tr>\n  );\n};\n\nUser.propTypes = {\n  user: PropTypes.instanceOf(UserModel).isRequired\n};\n\nexport default User;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/admin\";\nimport User from \"components/admin/User\";\nimport UserModel from \"models/user.coffee\";\n\nfunction UserListWrapper(props) {\n  const [users, setUsers] = useState(props.users);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => setUsers(store.getState().users));\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  const list = users.map(user => <User key={`user_${user.id}`} user={user} />);\n\n  return <>{list}</>;\n}\n\nUserListWrapper.propTypes = {\n  users: PropTypes.arrayOf(PropTypes.instanceOf(UserModel)).isRequired\n};\n\nexport default UserListWrapper;\n","import { Views } from \"loco-js\";\n\nclass Show extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n    this.user = opts.user;\n  }\n\n  render() {\n    document.getElementById(\"user_email\").textContent = this.user.email;\n    document.getElementById(\"user_username\").textContent = this.user.username;\n    document.getElementById(\"user_confirmed\").textContent = this.user.confirmed\n      ? \"Yes\"\n      : \"No\";\n    this._updateEditLink();\n  }\n\n  _updateEditLink() {\n    const editLink = document.getElementById(\"edit_link\");\n    const href = editLink.getAttribute(\"href\");\n    editLink.setAttribute(\"href\", href.replace(\"/0/\", \"/#{@user.id}/\"));\n  }\n}\n\nexport default Show;\n","import { UI, Views } from \"loco-js\";\n\nclass Form extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n    this.user = opts.user;\n  }\n\n  render() {\n    const form = new UI.Form({\n      for: this.user,\n      initObj: true,\n      id: \"admin_user_form\"\n    });\n    form.render();\n  }\n}\n\nexport default Form;\n","import React from \"react\";\nimport { render as renderElement } from \"react-dom\";\nimport { Controllers } from \"loco-js\";\n\nimport store from \"stores/admin\";\nimport User from \"models/user.coffee\";\nimport UserList from \"containers/admin/StatefulUserList\";\nimport Show from \"views/admin/users/Show\";\nimport Form from \"views/admin/users/Form\";\n\nclass Users extends Controllers.Base {\n  index() {\n    User.get(\"all\").then(resp => {\n      store.dispatch({ type: \"SET_USERS\", payload: { users: resp.resources } });\n      renderElement(\n        <UserList users={resp.resources} />,\n        document.querySelector(\"table tbody\")\n      );\n    });\n  }\n\n  show() {\n    User.find(this.params.id).then(user => new Show({ user: user }).render());\n  }\n\n  edit() {\n    const view = new Form({ user: new User({ id: this.params.id }) });\n    view.render();\n  }\n}\n\nexport default Users;\n","import { Controllers, Mix } from \"loco-js\";\n\nimport Disconnection from \"./concerns/disconnection.coffee\";\nimport Articles from \"./admin/Articles\";\nimport Comments from \"./admin/Comments\";\nimport Sessions from \"./admin/sessions.coffee\";\nimport Users from \"./admin/Users\";\n\nclass Admin extends Mix(Controllers.Base, Disconnection) {\n  initialize() {\n    this.setScope(\"admin\");\n  }\n}\n\nObject.assign(Admin, {\n  Articles,\n  Comments,\n  Sessions,\n  Users\n});\n\nexport default Admin;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Services } from \"loco-js\";\n\nimport CommentModel from \"models/article/comment.coffee\";\n\nfunction Comment({ comment }) {\n  const createdAt = new Services.Date(comment.createdAt).strftime(\"%d %b %y\");\n\n  return (\n    <p id={`comment_${comment.id}`}>\n      <b>{comment.author}</b> on <i>{createdAt}</i> wrote:\n      <br />\n      {comment.text}\n    </p>\n  );\n}\n\nComment.propTypes = {\n  comment: PropTypes.instanceOf(CommentModel).isRequired\n};\n\nexport default Comment;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/main\";\nimport { commentsForArticle } from \"selectors/comments\";\nimport Comment from \"components/main/Comment\";\nimport CommentModel from \"models/article/comment.coffee\";\n\nfunction StatefulCommentList(props) {\n  const articleId = props.articleId;\n  const [comments, setComments] = useState(props.comments);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      setComments(commentsForArticle(store.getState(), articleId));\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  const list = comments.map(comment => (\n    <Comment key={comment.id} comment={comment} />\n  ));\n\n  if (comments.length === 0) {\n    return <p id=\"no_comments\">No comments.</p>;\n  }\n\n  return <>{list}</>;\n}\n\nStatefulCommentList.propTypes = {\n  articleId: PropTypes.number.isRequired,\n  comments: PropTypes.arrayOf(PropTypes.instanceOf(CommentModel)).isRequired\n};\n\nexport default StatefulCommentList;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/main\";\nimport { commentsForArticle } from \"selectors/comments\";\nimport CommentModel from \"models/article/comment.coffee\";\n\nfunction CommentsNumber(props) {\n  const [comments, setComments] = useState(props.comments);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      setComments(commentsForArticle(store.getState(), props.articleId));\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  return <>{`${comments.length} comment${comments.length === 1 ? \"\" : \"s\"}`}</>;\n}\n\nCommentsNumber.propTypes = {\n  articleId: PropTypes.number.isRequired,\n  comments: PropTypes.arrayOf(PropTypes.instanceOf(CommentModel)).isRequired\n};\n\nexport default CommentsNumber;\n","import { Helpers, Services, UI, Views } from \"loco-js\";\n\nimport Flash from \"views/shared/flash.coffee\";\n\nclass Show extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n    this.article = null;\n    this.newComment = opts.comment;\n  }\n\n  render() {\n    const form = new UI.Form({\n      for: this.newComment,\n      initObj: true,\n      id: \"new_comment\"\n    });\n    form.render();\n  }\n\n  renderArticle(article = null) {\n    if (!this.article) {\n      this.article = article;\n      this.connectWith(this.article, { receiver: \"_articleReceivedSignal\" });\n    }\n    document.getElementById(\"title\").textContent = this.article.title;\n    document.getElementById(\"author\").textContent = this.article.author;\n    const dateService = new Services.Date(this.article.publishedAt);\n    document.getElementById(\"pub_date\").textContent = dateService.toString(\n      \"short\"\n    );\n    const textEl = document.getElementById(\"text\");\n    textEl.innerHTML = \"\";\n    const text = new Helpers.Text().simpleFormat(this.article.content);\n    textEl.insertAdjacentHTML(\"beforeend\", text);\n  }\n\n  _articleReceivedSignal(signal) {\n    switch (signal) {\n      case \"updating\": {\n        const txt =\n          \"Author is currently editing article. Be aware of possible changes.\";\n        const flash = new Flash({ warning: txt });\n        flash.render();\n        break;\n      }\n      case \"updated\":\n        this.article.reload().then(() => {\n          this.article.applyChanges();\n          this.renderArticle();\n        });\n    }\n  }\n}\n\nexport default Show;\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Controllers } from \"loco-js\";\n\nimport store from \"stores/main\";\nimport CommentList from \"containers/main/articles/StatefulCommentList\";\nimport CommentsNumber from \"containers/main/articles/CommentsNumber\";\n\nimport Article from \"models/article.coffee\";\nimport Comment from \"models/article/comment.coffee\";\nimport Show from \"views/main/articles/Show\";\n\nclass Articles extends Controllers.Base {\n  show() {\n    const newComment = new Comment({ articleId: this.params.id });\n    const view = new Show({ comment: newComment });\n    view.render();\n    Article.find(this.params.id).then(article => {\n      store.dispatch({\n        type: \"SET_ARTICLES\",\n        payload: { articles: [article] }\n      });\n      view.renderArticle(article);\n    });\n    Comment.get(\"count\", { articleId: this.params.id }).then(res => {\n      Comment.all({ articleId: this.params.id, total: res.total }).then(\n        comments => {\n          store.dispatch({\n            type: \"SET_COMMENTS\",\n            payload: { articleId: this.params.id, comments }\n          });\n          render(\n            React.createElement(CommentList, {\n              articleId: this.params.id,\n              comments\n            }),\n            document.getElementById(\"comments\")\n          );\n          render(\n            React.createElement(CommentsNumber, {\n              articleId: this.params.id,\n              comments\n            }),\n            document.getElementById(\"comments_count\")\n          );\n        }\n      );\n    });\n  }\n}\n\nexport default Articles;\n","import React, { useState } from \"react\";\n\nimport Article from \"models/article.coffee\";\nimport store from \"stores/main\";\n\nexport default function LoadMoreLink() {\n  const [page, setPage] = useState(1);\n  const [noMorePosts, setNoMorePosts] = useState(false);\n\n  function handleClick(e) {\n    e.preventDefault();\n    const currentPage = page + 1;\n    setPage(currentPage);\n    Article.get(\"all\", { page: currentPage })\n      .then(resp => {\n        if (resp.resources.length > 0) {\n          store.dispatch({\n            type: \"ADD_ARTICLES\",\n            payload: { articles: resp.resources }\n          });\n        } else {\n          setNoMorePosts(true);\n        }\n      })\n      .catch(err => alert(`Invalid URL: ${err}`));\n  }\n\n  function output() {\n    if (noMorePosts) return <span>No more posts.</span>;\n    else\n      return (\n        <a href=\"#\" id=\"load_more\" onClick={handleClick}>\n          Load more\n        </a>\n      );\n  }\n\n  return output();\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Services } from \"loco-js\";\n\nimport ArticleModel from \"models/article.coffee\";\n\nfunction Article({ article }) {\n  const date = new Services.Date(article.publishedAt).toString(\"short\");\n\n  return (\n    <article id={`article_${article.id}`}>\n      <h2>{article.title}</h2>\n      <p>\n        <i>\n          {article.author} wrote this on {date} /{\" \"}\n          <a\n            href={`/articles/${article.id}#comments`}\n            className=\"comments_quantity\"\n          >\n            {article.commentsCount} comment\n            {article.commentsCount === 1 ? \"\" : \"s\"}\n          </a>\n        </i>\n      </p>\n      <p>{article.content}</p>\n      <p>\n        <a href={`/articles/${article.id}`}>Continued</a>\n      </p>\n    </article>\n  );\n}\n\nArticle.propTypes = {\n  article: PropTypes.instanceOf(ArticleModel).isRequired\n};\n\nexport default Article;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport store from \"stores/main\";\nimport Article from \"components/main/Article\";\nimport ArticleModel from \"models/article.coffee\";\n\nfunction StatefulArticleList(props) {\n  const [articles, setArticles] = useState(props.articles);\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() =>\n      setArticles(store.getState().articles)\n    );\n\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  const list = articles.map(article => (\n    <Article key={article.id} article={article} />\n  ));\n\n  return <>{list}</>;\n}\n\nStatefulArticleList.propTypes = {\n  articles: PropTypes.arrayOf(PropTypes.instanceOf(ArticleModel)).isRequired\n};\n\nexport default StatefulArticleList;\n","import React from \"react\";\nimport { render as renderElement } from \"react-dom\";\nimport { Controllers } from \"loco-js\";\n\nimport store from \"stores/main\";\nimport Article from \"models/article.coffee\";\nimport LoadMoreLink from \"containers/main/pages/LoadMoreLink\";\nimport ArticleList from \"containers/main/pages/StatefulArticleList\";\n\nclass Pages extends Controllers.Base {\n  index() {\n    renderElement(\n      <LoadMoreLink />,\n      document.getElementById(\"load_more_wrapper\")\n    );\n\n    Article.get(\"all\", { page: 1 }).then(resp => {\n      store.dispatch({\n        type: \"SET_ARTICLES\",\n        payload: { articles: resp.resources }\n      });\n      renderElement(\n        <ArticleList articles={resp.resources} />,\n        document.getElementById(\"articles\")\n      );\n    });\n  }\n}\n\nexport default Pages;\n","import { UI, Views } from \"loco-js\"\n\nimport User from \"models/user.coffee\"\nimport Flash from \"views/shared/flash.coffee\"\n\nclass UserRegistrationForm extends Views.Base\n  constructor: (opts = {}) ->\n    super opts\n\n  render: ->\n    form = new UI.Form for: new User, delegator: this, callbackSuccess: '_created'\n    form.render()\n\n  receivedSignal: (signal, data) ->\n    switch signal\n      when 'confirming' then this._confirming()\n      when 'confirmed' then this._confirmed()\n\n  _created: (data) ->\n    this.connectWith new User(id: data.id)\n    document.querySelector('form').style.display = 'none'\n    document.getElementById('sign_in_paragraph').classList.remove('none')\n    document.getElementById('verification_info').classList.remove('none')\n    flash = new Flash notice: data.notice\n    flash.render()\n\n  _confirming: ->\n    document.getElementById('verification_info').textContent = document.getElementById('verification_progress').textContent\n\n  _confirmed: -> window.location.href = '/user/sessions/new?event=confirmed'\n\nexport default UserRegistrationForm","import { Controllers } from \"loco-js\"\n\nimport UserRegistrationForm from \"views/main/users/user_registration_form.coffee\"\n\nclass Users extends Controllers.Base\n  new: ->\n    view = new UserRegistrationForm\n    view.render()\n\nexport default Users\n","import { Controllers, Mix } from \"loco-js\";\n\nimport Disconnection from \"./concerns/disconnection.coffee\";\nimport Articles from \"./main/Articles\";\nimport Pages from \"./main/Pages\";\nimport Users from \"./main/users.coffee\";\n\nclass Main extends Mix(Controllers.Base, Disconnection) {\n  initialize() {\n    this.setScope(\"main\");\n  }\n}\n\nObject.assign(Main, {\n  Articles,\n  Pages,\n  Users\n});\n\nexport default Main;\n","import { Env, Views } from \"loco-js\";\n\nimport adminStore from \"stores/admin\";\nimport mainStore from \"stores/main\";\nimport userStore from \"stores/user\";\nimport { findArticle, findComment } from \"selectors/articles\";\n\nimport Article from \"models/article.coffee\";\nimport Comment from \"models/article/comment.coffee\";\nimport User from \"models/user.coffee\";\n\nimport AdminController from \"controllers/Admin\";\nimport MainController from \"controllers/Main\";\nimport UserController from \"controllers/User\";\n\nconst articleCreated = ({ id }) => {\n  if (Env.namespaceController.constructor !== UserController) return;\n  Article.find({ id, abbr: true }).then(article => {\n    userStore.dispatch({\n      type: \"ADD_ARTICLES\",\n      payload: { articles: [article] }\n    });\n  });\n};\n\nconst articlePublished = ({ id }) => {\n  if (Env.namespaceController.constructor === AdminController) {\n    Article.find({ id, abbr: true, resource: \"admin\" }).then(article => {\n      adminStore.dispatch({\n        type: \"PREPEND_ARTICLE\",\n        payload: { articles: [article] }\n      });\n    });\n  } else {\n    Article.find({ id, abbr: true }).then(article => {\n      mainStore.dispatch({\n        type: \"ADD_ARTICLES\",\n        payload: { articles: [article] }\n      });\n    });\n  }\n};\n\nconst articleUpdated = ({ id }) => {\n  const findParams = { id: id, abbr: true };\n  let store = mainStore;\n\n  if (Env.namespaceController.constructor === AdminController) {\n    findParams[\"resource\"] = \"admin\";\n    store = adminStore;\n  } else if (Env.namespaceController.constructor === UserController) {\n    store = userStore;\n  }\n\n  const [article, index] = findArticle(store.getState(), id);\n  if (!article) return;\n  Article.find(findParams).then(article =>\n    store.dispatch({\n      type: \"UPDATE_ARTICLE\",\n      payload: { article, index }\n    })\n  );\n};\n\nconst commentsChanged = ({ article_id: articleId }, diff) => {\n  let store = mainStore;\n  if (Env.namespaceController.constructor === AdminController) {\n    store = adminStore;\n  } else if (Env.namespaceController.constructor === UserController) {\n    store = userStore;\n  }\n  const [article, index] = findArticle(store.getState(), articleId);\nconsole.log(article);\nconsole.log(index);\n  if (!article) return;\n  store.dispatch({\n    type: \"UPDATE_ARTICLE\",\n    payload: {\n      article: new Article({\n        ...article,\n        commentsCount: article.commentsCount + diff\n      }),\n      index: index\n    }\n  });\n};\n\nconst commentCreated = ({ article_id: articleId, id }) => {\n  let store = userStore;\n  const findParams = { articleId, id };\n\n  if (Env.namespaceController.constructor === MainController) {\n    store = mainStore;\n    findParams[\"resource\"] = \"main\";\n  }\n  const [article] = findArticle(store.getState(), articleId);\n  if (!article) return;\n  Comment.find(findParams).then(comment =>\n    store.dispatch({\n      type: \"ADD_COMMENTS\",\n      payload: { articleId, comments: [comment] }\n    })\n  );\n};\n\nconst commentDestroyed = ({ article_id: articleId, id }) => {\n  let store = mainStore;\n  if (Env.namespaceController.constructor === UserController) {\n    store = userStore;\n  }\n  store.dispatch({\n    type: \"REMOVE_COMMENT\",\n    payload: { id, articleId }\n  });\n};\n\nconst commentUpdated = ({ article_id: articleId, id }) => {\n  let store = mainStore;\n  if (Env.namespaceController.constructor === UserController) {\n    store = userStore;\n  }\n  const [comment, index] = findComment(store.getState(), id, {\n    parentId: articleId\n  });\n  if (!comment) return;\n  comment.reload().then(() => {\n    comment.applyChanges();\n    store.dispatch({\n      type: \"UPDATE_COMMENT\",\n      payload: { comment, index, articleId }\n    });\n  });\n};\n\nclass Connectivity extends Views.Base {\n  constructor(opts = {}) {\n    super(opts);\n  }\n\n  receivedSignal(signal, data) {\n    switch (signal) {\n      case \"Article created\":\n        articleCreated(data);\n        break;\n      case \"Article published\":\n        articlePublished(data);\n        break;\n      case \"Article updated\":\n        articleUpdated(data);\n        break;\n      case \"Article.Comment created\":\n        commentsChanged(data, 1);\n        commentCreated(data);\n        break;\n      case \"Article.Comment destroyed\":\n        commentsChanged(data, -1);\n        commentDestroyed(data);\n        break;\n      case \"Article.Comment updated\":\n        commentUpdated(data);\n        break;\n      case \"User created\":\n        User.find(data.id).then(user =>\n          adminStore.dispatch({\n            type: \"PREPEND_USER\",\n            payload: { users: [user] }\n          })\n        );\n        break;\n    }\n  }\n\n  call() {\n    this.connectWith([Article, Comment, User]);\n  }\n}\n\nexport default Connectivity;\n","import { Deps, Env, Loco } from \"loco-js\";\nimport ActionCable from \"actioncable\";\nimport NotificationCenter from \"services/notification_center.coffee\";\nimport Connectivity from \"services/Connectivity\";\n\nDeps.cable = ActionCable.createConsumer();\nDeps.NotificationCenter = NotificationCenter;\n\nconst connectivity = new Connectivity();\n\nconst loco = new Loco({\n  notifications: {\n    enable: true,\n    log: true,\n    size: 10\n  },\n  postInit: () => {\n    connectivity.call();\n\n    if (\n      document.querySelector(\"body\").getAttribute(\"data-rails-env\") !== \"test\"\n    )\n      return;\n    Env.loco.getWire().setPollingTime(1000);\n  }\n});\n\nloco.init();\n","import { Env, I18n, Validators } from \"loco-js\";\n\nclass Vulgarity extends Validators.Base\n  @identity = 'Vulgarity'\n\n  constructor: -> super\n\n  validate: ->\n    return if not @val?\n    switch typeof @val\n      when 'string'\n        vulgarWord = this._getVulgarWord()\n        if ///#{vulgarWord}///i.exec @val\n          this._addErrorMessage()\n        else\n          return\n      else\n        throw new TypeError \"Vulgarity validator is applicable only for strings and #{@attr} isn't.\"\n\n  _addErrorMessage: ->\n    message = I18n[Env.loco.getLocale()].errors.messages.vulgarity\n    @obj.addErrorMessage message, for: @attr\n\n  _getVulgarWord: ->\n    switch Env.loco.getLocale()\n      when 'pl' then 'kurwa'\n      when 'en' then 'fuck'\n\nexport default Vulgarity\n","import { Validators } from \"loco-js\";\n\nimport Vulgarity from \"./vulgarity.coffee\";\n\nObject.assign(Validators, {\n  Vulgarity\n});\n","import { I18n, Utils } from \"loco-js\";\n\nI18n.pl =\n  variants:\n    few: (i) ->\n      num = parseInt Utils.String.last String(i)\n      [2,3,4].indexOf(num) isnt -1 and not(String(i).length is 2 && String(i)[0] is '1')\n  models: {}\n  attributes: {}\n  ui:\n    form:\n      sending: \"Wysyam...\"\n      success: \"Sukces\"\n      errors:\n        connection: \"Bd z poczeniem\"\n        invalid_data: \"Nieprawidowe dane\"\n  date:\n    formats:\n      default: \"%d-%m-%Y\"\n      short: \"%d %b\"\n      long: \"%B %d, %Y\"\n    day_names: [\"niedziela\", \"poniedziaek\", \"wtorek\", \"roda\", \"czwartek\", \"pitek\", \"sobota\"]\n    abbr_day_names: [\"nie\", \"pon\", \"wto\", \"ro\", \"czw\", \"pi\", \"sob\"]\n    month_names: [\"stycze\", \"luty\", \"marzec\", \"kwiecie\", \"maj\", \"czerwiec\", \"lipiec\", \"sierpie\", \"wrzesie\", \"padziernik\", \"listopad\", \"grudzie\"]\n    abbr_month_names: [\"sty\", \"lut\", \"mar\", \"kwi\", \"maj\", \"cze\", \"lip\", \"sie\", \"wrz\", \"pa\", \"lis\", \"gru\"]\n  errors:\n    messages:\n      accepted: \"musi zosta zaakceptowane\"\n      blank: \"nie moe by puste\"\n      confirmation: \"nie zgadza si z polem %{attribute}\"\n      empty: \"nie moe by puste\"\n      equal_to: \"musi by rwne %{count}\"\n      even: \"musi by parzyste\"\n      exclusion: \"jest zarezerwowane\"\n      greater_than: \"musi by wiksze od %{count}\"\n      greater_than_or_equal_to: \"musi by wiksze lub rwne %{count}\"\n      inclusion: \"nie znajduje si na licie dopuszczalnych wartoci\"\n      invalid: \"jest nieprawidowe\"\n      less_than: \"musi by mniejsze od %{count}\"\n      less_than_or_equal_to: \"musi by mniejsze lub rwne %{count}\"\n      not_a_number: \"nie jest liczb\"\n      not_an_integer: \"musi by liczb cakowit\"\n      odd: \"musi by nieparzyste\"\n      present: \"musi by puste\"\n      too_long:\n        few: \"jest za dugie (maksymalnie %{count} znaki)\"\n        many: \"jest za dugie (maksymalnie %{count} znakw)\"\n        one: \"jest za dugie (maksymalnie jeden znak)\"\n        other: \"jest za dugie (maksymalnie %{count} znakw)\"\n      too_short:\n        few: \"jest za krtkie (przynajmniej %{count} znaki)\"\n        many: \"jest za krtkie (przynajmniej %{count} znakw)\"\n        one: \"jest za krtkie (przynajmniej jeden znak)\"\n        other: \"jest za krtkie (przynajmniej %{count} znakw)\"\n      wrong_length:\n        few: \"ma nieprawidow dugo (powinna wynosi %{count} znaki)\"\n        many: \"ma nieprawidow dugo (powinna wynosi %{count} znakw)\"\n        one: \"ma nieprawidow dugo (powinna wynosi jeden znak)\"\n        other: \"ma nieprawidow dugo (powinna wynosi %{count} znakw)\"\n      other_than: \"musi by inna ni %{count}\"\n","import { I18n } from \"loco-js\";\n\nI18n.pl.models.User = 'Uytkownik'\nI18n.pl.attributes.User =\n  password: 'Haso'\n  passwordConfirmation: 'Powtrz haso'\n","import { I18n } from \"loco-js\";\n\nI18n.en.errors.messages.vulgarity = 'contains strong language.';\n","import { I18n } from \"loco-js\";\n\nI18n.pl.errors.messages.vulgarity = 'zawiera mocny jzyk.'\n","import { Controllers } from \"loco-js\";\n\nimport Admin from \"controllers/Admin\";\nimport Main from \"controllers/Main\";\nimport User from \"controllers/User\";\n\nObject.assign(Controllers, {\n  Admin,\n  Main,\n  User\n});\n","import { Models } from \"loco-js\";\n\nimport Article from \"./article.coffee\";\nimport Comment from \"./article/comment.coffee\";\nimport Member from \"./room/member.coffee\";\nimport Room from \"./room.coffee\";\nimport User from \"./user.coffee\";\n\nObject.assign(Article, { Comment });\nObject.assign(Room, { Member });\n\nObject.assign(Models, {\n  Article,\n  Room,\n  User\n});\n","import \"scaffold.css\";\nimport \"global.scss\";\n\nimport \"initializers/rails\";\nimport \"initializers/loco\";\nimport \"validators\";\nimport \"locales\";\nimport \"controllers\";\nimport \"models\";\n\nimport { Channels, Env } from \"loco-js\"\nwindow.test = {\n  Channels,\n  Env\n};"],"sourceRoot":""}