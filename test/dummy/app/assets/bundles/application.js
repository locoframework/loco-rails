!function(e){function t(t){for(var n,i,c=t[0],u=t[1],s=t[2],f=0,p=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(l&&l(t);p.length;)p.shift()();return a.push.apply(a,s||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,c=1;c<r.length;c++){var u=r[c];0!==o[u]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={0:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;a.push([151,1]),r()}({102:function(e,t,r){},103:function(e,t,r){},151:function(e,t,r){"use strict";r.r(t);r(102),r(103);var n=r(99);r.n(n).a.start();var o=r(1),a=r(7),i=r(100);r(19),r(12),r(17),r(8);function c(e){return{type:"ADD_ARTICLES",articles:e}}function u(e){return{type:"SET_ARTICLES",articles:e}}function s(e,t){return{type:"UPDATE_ARTICLE",article:e,index:t}}function l(e,t){return{type:"ADD_COMMENTS",articleId:t,comments:e}}function f(e,t){return{type:"SET_COMMENTS",comments:e,articleId:t}}function p(e,t,r){return{type:"UPDATE_COMMENT",comment:e,articleId:t,index:r}}var m=r(41),d=(r(18),r(91),r(26)),y=Object(d.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLES":return e.concat(t.articles);case"PREPEND_ARTICLES":return t.articles.concat(e);case"REMOVE_ARTICLE":return e.filter((function(e){return e.id!==t.id}));case"SET_ARTICLES":return t.articles;case"UPDATE_ARTICLE":e[t.index]=t.article;break;default:return e}})),b=(r(58),Object(d.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENTS":void 0===e[t.articleId]&&(e[t.articleId]=[]),e[t.articleId]=e[t.articleId].concat(t.comments);break;case"REMOVE_COMMENT":if(null==e[t.articleId])return e;e[t.articleId]=e[t.articleId].filter((function(e){return e.id!==t.id}));break;case"SET_COMMENTS":e[t.articleId]=t.comments;break;case"UPDATE_COMMENT":var r=t.articleId,n=t.index;if(!n){var o=e[r].find((function(e){return e.id===t.comment.id}));n=e[r].indexOf(o)}e[r][n]=t.comment;break;default:return e}}))),h=Object(d.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return t.users;case"PREPEND_USERS":return t.users.concat(e);default:return e}})),v=Object(m.a)({articles:y,comments:b,users:h}),g=Object(m.b)(v),w=function(e){return function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t[e];if(n.parentId&&(o=o[n.parentId]),void 0===o)return[null,null];var a=o.find((function(e){return e.id===r}));if(!a)return[null,null];var i=o.indexOf(a);return[a,i]}},O=w("articles"),E=w("comments");r(23);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,e);var t,r,n,o=k(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).published=null!=t.publishedAt,t}return t=a,(r=[{key:"vulgarityLevel",value:function(){(null!=this.title&&/fuck/i.exec(this.title)||null!=this.content&&/fuck/i.exec(this.content))&&this.addErrorMessage("Article contains strong language.",{for:"base"})}},{key:"setDefaultValuesForAdminReview",value:function(){this.adminRate=null==this.adminRate?3:this.adminRate,this.categoryId=null==this.categoryId?6:this.categoryId,this.adminReviewStartedAt=Date.now()}}])&&S(t.prototype,r),n&&S(t,n),a}(o.Models.Base);A(I,"identity","Article"),A(I,"resources",{url:"/user/articles",paginate:{per:5},main:{url:"/articles",paginate:{per:3}},admin:{url:"/admin/articles",paginate:{per:4}}}),A(I,"attributes",{title:{validations:{presence:!0,length:{within:[3,255]}}},content:{validations:{presence:!0,length:{minimum:100}},remoteName:"text"},createdAt:{type:"Date",remoteName:"created_at"},updatedAt:{type:"Date",remoteName:"updated_at"},commentsCount:{type:"Int",remoteName:"comments_count"},publishedAt:{type:"Date",remoteName:"published_at"},published:{},adminReview:{remoteName:"admin_review"},adminRate:{type:"Int",remoteName:"admin_rate"},categoryId:{type:"Int",remoteName:"category_id"},adminReviewStartedAt:{remoteName:"admin_review_started_at"}}),A(I,"validate",["vulgarityLevel"]);var P=I;function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var o=z(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return M(this,r)}}function M(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(r,e);var t=D(r);function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.call(this,e)}return r}(o.Models.Base);N(B,"identity","Article.Comment"),N(B,"remoteName","Comment"),N(B,"resources",{url:"/user/articles/:articleId/comments",paginate:{per:10},main:{url:"/articles/:articleId/comments",paginate:{per:5,param:"page-num"}},admin:{url:"/admin/articles/:articleId/comments",paginate:{per:5}}}),N(B,"attributes",{author:{validations:{presence:!0}},text:{validations:{presence:!0,vulgarity:!0}},articleId:{type:"Int",validations:{presence:!0},remoteName:"article_id"},createdAt:{type:"Date",remoteName:"created_at"},updatedAt:{type:"Date",remoteName:"updated_at"},emotion:{type:"Int"},pinned:{type:"Boolean"},adminRate:{type:"Int",remoteName:"admin_rate"},approved:{type:"Boolean"}});var L=B;function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var o=V(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $(this,r)}}function $(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(r,e);var t=F(r);function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.call(this,e)}return r}(o.Models.Base);H(W,"identity","User"),H(W,"resources",{url:"/users",admin:{url:"/admin/users"}}),H(W,"paginate",{per:10}),H(W,"attributes",{email:{validations:{presence:!0,format:{with:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i}}},username:{validations:{presence:!0,format:{with:/^[a-z][a-z0-9_-]*$/i}}},password:{validations:{presence:{on:"create"},confirmation:!0}},passwordConfirmation:{remoteName:"password_confirmation"},confirmed:{},createdAt:{type:"Date",remoteName:"created_at"},updatedAt:{type:"Date",remoteName:"updated_at"}});var Y=W,J=(r(39),function(e){e.classList.remove("notice"),e.classList.remove("alert"),e.classList.remove("warning")}),G=function(e,t,r){null!=e[t]&&(r.classList.add(t),document.querySelector(".flash p").textContent=e[t])},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e3;setTimeout((function(){document.querySelector(".flash").classList.add("none")}),e)},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hide,r=document.querySelector(".flash");J(r),G(e,"notice",r),G(e,"alert",r),G(e,"warning",r),r.classList.remove("none"),t&&K()};function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=oe(e);if(t){var o=oe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ne(this,r)}}function ne(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(a,e);var t,r,n,o=re(a);function a(){return Z(this,a),o.apply(this,arguments)}return t=a,(r=[{key:"disconnectedForTooLong",value:function(){Q({alert:"You have been disconnected from the server for too long. Reload page!",hide:!1})}}])&&ee(t.prototype,r),n&&ee(t,n),a}(o.Controllers.Base),ie=r(0),ce=r.n(ie),ue=r(6),se=(r(24),r(2)),le=r.n(se);r(29),r(40);function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var me=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(o.getLocale)();fe(this,e),this.date=t,this.skope=o.I18n[r].date}var t,r,n;return t=e,(r=[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=this.skope.formats;switch(e){case"default":return this.strftime(t.default);case"short":return this.strftime(t.short);case"long":return this.strftime(t.long);default:console.log("Services.Date#toString: unknown format.")}}},{key:"strftime",value:function(e){e=(e=e.replace("%Y",this.date.getFullYear())).replace("%y",this.date.getFullYear().toString().substr(-2,2));var t=this.date.getMonth()+1;return t=t>=10?t:"0".concat(t),(e=(e=(e=(e=(e=(e=e.replace("%m",t)).replace("%b",this.skope.abbr_month_names[this.date.getMonth()])).replace("%B",this.skope.month_names[this.date.getMonth()])).replace("%d",this.date.getDate()>=10?this.date.getDate():"0".concat(this.date.getDate()))).replace("%H",this.date.getHours()>=10?this.date.getHours():"0".concat(this.date.getHours()))).replace("%M",this.date.getMinutes()>=10?this.date.getMinutes():"0".concat(this.date.getMinutes()))).replace("%S",this.date.getSeconds()>=10?this.date.getSeconds():"0".concat(this.date.getSeconds()))}}])&&pe(t.prototype,r),n&&pe(t,n),e}();function de(e){var t=e.comment,r=new me(t.createdAt).strftime("%d %b %y");return ce.a.createElement("p",{id:"comment_".concat(t.id)},ce.a.createElement("b",null,t.author)," on ",ce.a.createElement("i",null,r)," (",ce.a.createElement("a",{href:"/admin/articles/".concat(t.articleId,"/comments/").concat(t.id,"/edit")},"edit"),")",ce.a.createElement("br",null),t.text)}de.propTypes={comment:le.a.instanceOf(L).isRequired};var ye=de;function be(e){var t=e.comments;return 0===t.length?ce.a.createElement("p",null,"No comments"):ce.a.createElement(ce.a.Fragment,null,t.map((function(e){return ce.a.createElement(ye,{comment:e,key:e.id})})))}be.propTypes={comments:le.a.arrayOf(le.a.instanceOf(L)).isRequired};var he=be;function ve(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var ge=function(e){document.getElementById("article_author").textContent=e.author,document.getElementById("article_title").textContent=e.title,document.getElementById("article_text").textContent=e.content},we=function(e){return function(){var t,r=(t=regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next="updated"===t.t0?3:7;break;case 3:return t.next=5,e.reload();case 5:n=t.sent,ge(n);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){ve(a,n,o,i,c,"next",e)}function c(e){ve(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}()},Oe=function(e){Object(o.subscribe)({to:e,with:we(e)}),ge(e)},Ee=function(e){Object(ue.render)(ce.a.createElement(he,{comments:e}),document.getElementById("comments"))},je=function(e){e.setDefaultValuesForAdminReview(),new a.UI.Form({id:"edit_article_form",for:e}).render()};function Se(e){var t=e.article,r=new me(t.publishedAt).toString("short");return ce.a.createElement("article",{id:"article_".concat(t.id)},ce.a.createElement("h2",null,t.title),ce.a.createElement("p",null,ce.a.createElement("i",null,t.author," wrote this on ",r," /"," ",ce.a.createElement("span",{className:"comments_quantity"},t.commentsCount," comment",1===t.commentsCount?"":"s"))),ce.a.createElement("p",null,t.content),ce.a.createElement("p",null,ce.a.createElement("a",{href:"/admin/articles/".concat(t.id,"/edit")},"Review")))}Se.propTypes={article:le.a.instanceOf(P).isRequired};var _e=Se;function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xe(e){var t=ke(Object(ie.useState)(e.articles),2),r=t[0],n=t[1];Object(ie.useEffect)((function(){var e=g.subscribe((function(){return n(g.getState().articles)}));return function(){e()}}),[]);var o=r.map((function(e){return ce.a.createElement(_e,{key:e.id,article:e})}));return ce.a.createElement(ce.a.Fragment,null,o)}xe.propTypes={articles:le.a.arrayOf(le.a.instanceOf(P)).isRequired};var Ae=xe;function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Ce(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Pe(a,n,o,i,c,"next",e)}function c(e){Pe(a,n,o,i,c,"throw",e)}i(void 0)}))}}var Te=function(){var e=Ce(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.find(o.helpers.params.id);case 2:t=e.sent,Oe(t),je(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=Ce(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.all({articleId:o.helpers.params.id});case 2:t=e.sent,Ee(t.resources);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n,o,a;return t=e,(r=[{key:"published",value:(a=Ce(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.get("published");case 2:t=e.sent,g.dispatch(u(t.resources)),Object(ue.render)(ce.a.createElement(Ae,{articles:t.resources}),document.getElementById("articles"));case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"edit",value:(o=Ce(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Te(),De();case 2:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}])&&Ie(t.prototype,r),n&&Ie(t,n),e}();function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ne=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"edit",value:function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new a.UI.Form({for:new L({id:e.commentId,resource:"admin"}),id:"edit_comment_".concat(e.commentId),initObj:!0});t.render(),window.test={commentFormObj:t.getObj()}}({commentId:o.helpers.params.id})}}])&&ze(t.prototype,r),n&&ze(t,n),e}(),Be=function(){return window.location.href="/admin"};function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"new",value:function(){new a.UI.Form({id:"sign_in_admin",callbackSuccess:Be}).render()}}])&&Le(t.prototype,r),n&&Le(t,n),e}(),qe=function(e){var t=e.user;return ce.a.createElement("tr",{id:"user_".concat(t.id)},ce.a.createElement("td",null,t.email),ce.a.createElement("td",null,t.username),ce.a.createElement("td",{className:"confirmed"},t.confirmed?"Yes":"No"),ce.a.createElement("td",null,ce.a.createElement("a",{href:"/admin/users/".concat(t.id)},"Show")," |"," ",ce.a.createElement("a",{href:"/admin/users/".concat(t.id,"/edit")},"Edit")," |"," ",ce.a.createElement("a",{href:"/admin/users/".concat(t.id),"data-method":"delete","data-confirm":"Are you sure?"},"Delete")," ","|"," ",ce.a.createElement("a",{href:"#",onClick:function(e){return function(e,t){e.preventDefault(),Object(o.emit)({type:"PING",user_id:t})}(e,t.id)}},"Ping")))};qe.propTypes={user:le.a.instanceOf(Y).isRequired};var Fe=qe;function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function He(e){var t=$e(Object(ie.useState)(e.users),2),r=t[0],n=t[1];Object(ie.useEffect)((function(){var e=g.subscribe((function(){return n(g.getState().users)}));return function(){e()}}),[]);var o=r.map((function(e){return ce.a.createElement(Fe,{key:"user_".concat(e.id),user:e})}));return ce.a.createElement(ce.a.Fragment,null,o)}He.propTypes={users:le.a.arrayOf(le.a.instanceOf(Y)).isRequired};var We=He,Ye=function(e){document.getElementById("user_email").textContent=e.email,document.getElementById("user_username").textContent=e.username,document.getElementById("user_confirmed").textContent=e.confirmed?"Yes":"No",function(e){var t=document.getElementById("edit_link"),r=t.getAttribute("href");t.setAttribute("href",r.replace("/0/","/".concat(e.id,"/")))}(e)};function Je(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Ge(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Je(a,n,o,i,c,"next",e)}function c(e){Je(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Qe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n,i,c;return t=e,(r=[{key:"index",value:(c=Ge(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.get("all");case 2:t=e.sent,g.dispatch({type:"PREPEND_USERS",users:t.resources}),Object(ue.render)(ce.a.createElement(We,{users:t.resources}),document.querySelector("table tbody"));case 5:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},{key:"show",value:(i=Ge(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.find(o.helpers.params.id);case 2:t=e.sent,Ye(t);case 4:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"edit",value:function(){var e;e=new Y({id:o.helpers.params.id}),new a.UI.Form({for:e,initObj:!0,id:"admin_user_form"}).render()}}])&&Ke(t.prototype,r),n&&Ke(t,n),e}();function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ot(e);if(t){var o=ot(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return nt(this,r)}}function nt(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(a,e);var t,r,n,o=rt(a);function a(){return Ze(this,a),o.apply(this,arguments)}return t=a,(r=[{key:"initialize",value:function(){this.setScope("admin")}}])&&et(t.prototype,r),n&&et(t,n),a}(ae);at.Articles=Me,at.Comments=Ne,at.Sessions=Ue,at.Users=Qe;var it=at,ct=function(e,t){return e.comments[t]};function ut(e){var t=e.comment,r=new me(t.createdAt).strftime("%d %b %y");return ce.a.createElement("p",{id:"comment_".concat(t.id)},ce.a.createElement("b",null,t.author)," on ",ce.a.createElement("i",null,r)," wrote:",ce.a.createElement("br",null),t.text)}ut.propTypes={comment:le.a.instanceOf(L).isRequired};var st=ut;function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pt(e){var t=e.articleId,r=lt(Object(ie.useState)(e.comments),2),n=r[0],o=r[1];Object(ie.useEffect)((function(){var e=g.subscribe((function(){o(ct(g.getState(),t))}));return function(){e()}}),[]);var a=n.map((function(e){return ce.a.createElement(st,{key:e.id,comment:e})}));return 0===n.length?ce.a.createElement("p",{id:"no_comments"},"No comments."):ce.a.createElement(ce.a.Fragment,null,a)}pt.propTypes={articleId:le.a.number.isRequired,comments:le.a.arrayOf(le.a.instanceOf(L)).isRequired};var mt=pt;function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bt(e){var t=dt(Object(ie.useState)(e.comments),2),r=t[0],n=t[1];return Object(ie.useEffect)((function(){var t=g.subscribe((function(){n(ct(g.getState(),e.articleId))}));return function(){t()}}),[]),ce.a.createElement(ce.a.Fragment,null,"".concat(r.length," comment").concat(1===r.length?"":"s"))}bt.propTypes={articleId:le.a.number.isRequired,comments:le.a.arrayOf(le.a.instanceOf(L)).isRequired};var ht=bt,vt=(r(133),function(e){return(e=(e=e.replace(/\r\n?/,"\n")).trim()).length>0&&(e="<p>"+(e=(e=e.replace(/\n\n+/g,"</p><p>")).replace(/\n/g,"<br>"))+"</p>"),e});function gt(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var wt=function(e){return function(){var t,r=(t=regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next="updating"===t.t0?3:"updated"===t.t0?6:10;break;case 3:return Q({warning:"Author is currently editing article. Be aware of possible changes."}),t.abrupt("break",10);case 6:return t.next=8,e.reload();case 8:n=t.sent,Ot(n,!0);case 10:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){gt(a,n,o,i,c,"next",e)}function c(e){gt(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}()},Ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!1===t&&Object(o.subscribe)({to:e,with:wt(e)}),document.getElementById("title").textContent=e.title,document.getElementById("author").textContent=e.author;var r=new me(e.publishedAt);document.getElementById("pub_date").textContent=r.toString("short");var n=document.getElementById("text");n.innerHTML="";var a=vt(e.content);n.insertAdjacentHTML("beforeend",a)},Et={renderArticle:Ot,renderForm:function(e){new a.UI.Form({for:e,initObj:!0,id:"new_comment"}).render()}};function jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function St(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function _t(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){St(a,n,o,i,c,"next",e)}function c(e){St(a,n,o,i,c,"throw",e)}i(void 0)}))}}var kt=function(){var e=_t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.find(o.helpers.params.id);case 2:t=e.sent,g.dispatch(u([t])),Et.renderArticle(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rt=function(){var e=_t(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("count",{articleId:o.helpers.params.id});case 2:return t=e.sent,e.next=5,L.all({articleId:o.helpers.params.id,total:t.total});case 5:r=e.sent,g.dispatch(f(r,o.helpers.params.id)),Object(ue.render)(ce.a.createElement(mt,{articleId:o.helpers.params.id,comments:r}),document.getElementById("comments")),Object(ue.render)(ce.a.createElement(ht,{articleId:o.helpers.params.id,comments:r}),document.getElementById("comments_count"));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n,a;return t=e,(r=[{key:"show",value:(a=_t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new L({articleId:o.helpers.params.id}),Et.renderForm(t),kt(),Rt();case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})}])&&jt(t.prototype,r),n&&jt(t,n),e}();function At(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function It(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){At(a,n,o,i,c,"next",e)}function c(e){At(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tt(){var e=Pt(Object(ie.useState)(1),2),t=e[0],r=e[1],n=Pt(Object(ie.useState)(!1),2),o=n[0],a=n[1];function i(e){return u.apply(this,arguments)}function u(){return(u=It(regeneratorRuntime.mark((function e(n){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r(o=t+1),i=null,e.prev=4,e.next=7,P.get("all",{page:o});case 7:i=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),alert("Invalid URL: ".concat(e.t0)),e.abrupt("return");case 14:i.resources.length>0?g.dispatch(c(i.resources)):a(!0);case 15:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}return o?ce.a.createElement("span",null,"No more posts."):ce.a.createElement("a",{href:"#",id:"load_more",onClick:i},"Load more…")}function Dt(e){var t=e.article,r=new me(t.publishedAt).toString("short");return ce.a.createElement("article",{id:"article_".concat(t.id)},ce.a.createElement("h2",null,t.title),ce.a.createElement("p",null,ce.a.createElement("i",null,t.author," wrote this on ",r," /"," ",ce.a.createElement("a",{href:"/articles/".concat(t.id,"#comments"),className:"comments_quantity"},t.commentsCount," comment",1===t.commentsCount?"":"s"))),ce.a.createElement("p",null,t.content),ce.a.createElement("p",null,ce.a.createElement("a",{href:"/articles/".concat(t.id)},"Continued…")))}Dt.propTypes={article:le.a.instanceOf(P).isRequired};var Mt=Dt;function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bt(e){var t=zt(Object(ie.useState)(e.articles),2),r=t[0],n=t[1];Object(ie.useEffect)((function(){var e=g.subscribe((function(){return n(g.getState().articles)}));return function(){e()}}),[]);var o=r.map((function(e){return ce.a.createElement(Mt,{key:e.id,article:e})}));return ce.a.createElement(ce.a.Fragment,null,o)}Bt.propTypes={articles:le.a.arrayOf(le.a.instanceOf(P)).isRequired};var Lt=Bt;function Ut(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ft=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n,o,a;return t=e,(r=[{key:"index",value:(o=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(ue.render)(ce.a.createElement(Tt,null),document.getElementById("load_more_wrapper")),e.next=3,P.get("all",{page:1});case 3:t=e.sent,g.dispatch(u(t.resources)),Object(ue.render)(ce.a.createElement(Lt,{articles:t.resources}),document.getElementById("articles"));case 6:case"end":return e.stop()}}),e)})),a=function(){var e=this,t=arguments;return new Promise((function(r,n){var a=o.apply(e,t);function i(e){Ut(a,r,n,i,c,"next",e)}function c(e){Ut(a,r,n,i,c,"throw",e)}i(void 0)}))},function(){return a.apply(this,arguments)})}])&&qt(t.prototype,r),n&&qt(t,n),e}(),$t=function(e){switch(e){case"confirming":document.getElementById("verification_info").textContent=document.getElementById("verification_progress").textContent;break;case"confirmed":window.location.href="/user/sessions/new?event=confirmed"}},Vt=function(e){Object(o.subscribe)({to:new Y({id:e.id}),with:$t}),document.querySelector("form").style.display="none",document.getElementById("sign_in_paragraph").classList.remove("none"),document.getElementById("verification_info").classList.remove("none"),Q({notice:e.notice})};function Ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"new",value:function(){new a.UI.Form({for:new Y,callbackSuccess:Vt}).render()}}])&&Ht(t.prototype,r),n&&Ht(t,n),e}();function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Zt(e);if(t){var o=Zt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Xt(this,r)}}function Xt(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(a,e);var t,r,n,o=Qt(a);function a(){return Jt(this,a),o.apply(this,arguments)}return t=a,(r=[{key:"initialize",value:function(){this.setScope("main")}}])&&Gt(t.prototype,r),n&&Gt(t,n),a}(ae);er.Articles=xt,er.Pages=Ft,er.Users=Wt;var tr=er;function rr(e){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nr(e,t){return(nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function or(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ir(e);if(t){var o=ir(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ar(this,r)}}function ar(e,t){return!t||"object"!==rr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nr(e,t)}(r,e);var t=or(r);function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.call(this,e)}return r}(o.Models.Base);cr(ur,"identity","Room.Member"),cr(ur,"resources",{url:"/user/rooms/:roomId/members",paginate:{per:100}});var sr=ur;r(136);function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=dr(e);if(t){var o=dr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return mr(this,r)}}function mr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yr,br,hr,vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(r,e);var t=pr(r);function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.call(this,e)}return r}(o.Models.Base);hr="Room",(br="identity")in(yr=vr)?Object.defineProperty(yr,br,{value:hr,enumerable:!0,configurable:!0,writable:!0}):yr[br]=hr;var gr=vr,wr=function(e){document.querySelector("#room_".concat(e," td.members"))},Or=function(e,t){switch(e){case"Room member_joined":o=t.room_id,(a=wr(o)).textContent=parseInt(a.text())+1;break;case"Room member_left":!function(e){var t=wr(e);t.textContent=parseInt(t.text())-1}(t.room_id);break;case"Room created":document.getElementById("rooms_list").insertAdjacentHTML("beforeend",(n=t.room,void"\n  <tr id='room_".concat(n.id,"'>\n    <td>").concat(n.name,"</td>\n    <td class='members'>0</td>\n    <td>\n      <a rel='nofollow' data-method='patch' href='/user/rooms/").concat(n.id,"/join'>Join</a> |\n      <a data-confirm='R U sure?' rel='nofollow' data-method='delete'\n        href='/user/rooms/").concat(n.id,"'>Destroy</a>\n    </td>\n  </tr>\n  ")));break;case"Room destroyed":var r=document.getElementById("room_".concat(t.room_id));r.parentNode.removeChild(r)}var n,o,a};function Er(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Sr=function(e){var t="<li id='user_".concat(e.id,"'>").concat(e.username,"</li>");document.getElementById("members").insertAdjacentHTML("beforeend",t)},_r=function(e){return function(t,r){switch(t){case"Room member_joined":if(r.room_id!==e)return;Sr(r.member);break;case"Room member_left":if(r.room_id!==e)return;n=r.member,(o=document.querySelector("#members li#user_".concat(n.id))).parentNode.removeChild(o)}var n,o}},kr=function(e){Object(o.subscribe)({to:gr,with:_r(e)}),function(e){document.querySelector("[data-behavior~=room-speaker]").addEventListener("keypress",(function(t){13===t.keyCode&&(t.preventDefault(),Object(o.emit)({type:"NEW_MESSAGE",txt:t.target.value,room_id:e}),t.target.value="")}))}(e)},Rr=function(e){var t,r=Er(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;Sr(n)}}catch(e){r.e(e)}finally{r.f()}},xr=function(e,t){var r='<p class="msg"><b>'.concat(t,"</b>: ").concat(e,"</p>");document.getElementById("messages").insertAdjacentHTML("beforeend",r)};function Ar(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Pr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callbacks={}}var t,r,n,a,i;return t=e,(r=[{key:"index",value:function(){Object(o.subscribe)({to:gr,with:Or})}},{key:"show",value:(a=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.callbacks.receivedMessage=xr,kr(o.helpers.params.id),e.next=4,sr.all({roomId:o.helpers.params.id});case 4:t=e.sent,Rr(t.resources);case 6:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=a.apply(e,t);function i(e){Ar(o,r,n,i,c,"next",e)}function c(e){Ar(o,r,n,i,c,"throw",e)}i(void 0)}))},function(){return i.apply(this,arguments)})}])&&Ir(t.prototype,r),n&&Ir(t,n),e}();function Cr(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Tr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Cr(a,n,o,i,c,"next",e)}function c(e){Cr(a,n,o,i,c,"throw",e)}i(void 0)}))}}var Dr=function(e){document.getElementById("article_title").textContent=e.title,document.getElementById("article_text").textContent=e.content;var t=document.getElementById("publish_article");t&&null!=e.publishedAt?t.style.display="none":t&&(t.style.display="")},Mr=function(e){return function(){var t=Tr(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next="updated"===t.t0?3:"destroyed"===t.t0?8:9;break;case 3:return t.next=5,e.reload();case 5:return e.applyChanges(),Dr(e),t.abrupt("break",9);case 8:window.location.href="/user/articles?message=deleted";case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},zr=function(e){var t,r;null!==e&&(Object(o.subscribe)({to:e,with:Mr(e)}),function(e){document.getElementById("publish_article").addEventListener("click",function(){var t=Tr(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),r.target.textContent="Publishing...",t.prev=2,t.next=5,e.put("publish");case 5:document.getElementById("publish_article").outerHTML="<span>Published!</span>",t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),document.getElementById("publish_article").textContent="Publish",Q({alert:"Connection error!"});case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}())}(e),t=e.id,r=document.getElementById("edit_link").getAttribute("href"),document.getElementById("edit_link").setAttribute("href",r.replace("/0/","/".concat(t,"/"))),Dr(e))};r(137),r(139),r(142),r(144);function Nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Br(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(r),!0).forEach((function(t){Lr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ur(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $r(e){var t,r=e.comment,n=e.isAdmin,o=void 0!==n&&n,a=qr(Object(ie.useState)(!1),2),i=a[0],c=a[1],u=new me(r.createdAt).strftime("%d %b %y"),s=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(!0),r.approved=!0,e.next=5,r.updateAttribute("approved");case 5:if(e.sent.ok){e.next=8;break}return e.abrupt("return");case 8:g.dispatch(p(new L(Br(Br({},r),{},{approved:!0})),r.articleId));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ur(a,n,o,i,c,"next",e)}function c(e){Ur(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return ce.a.createElement("p",{id:"comment_".concat(r.id)},ce.a.createElement("b",null,r.author)," on ",ce.a.createElement("i",null,u),o?(t=r.approved?ce.a.createElement(ce.a.Fragment,null,ce.a.createElement("span",null,"approved")," |"," "):i?ce.a.createElement(ce.a.Fragment,null,ce.a.createElement("span",null,"approving...")," |"," "):ce.a.createElement(ce.a.Fragment,null,ce.a.createElement("a",{href:"/user/articles/".concat(r.articleId,"/comments/").concat(r.id,"/approve"),className:"approve",onClick:s},"approve")," ","|"," "),ce.a.createElement(ce.a.Fragment,null," ","(",t,ce.a.createElement("a",{href:"/user/articles/".concat(r.articleId,"/comments/").concat(r.id,"/edit")},"edit")," ","|"," ",ce.a.createElement("a",{href:"/user/articles/".concat(r.articleId,"/comments/").concat(r.id),"data-method":"delete","data-confirm":"Are you sure?"},"delete"),")")):"",ce.a.createElement("br",null),r.text)}$r.propTypes={comment:le.a.instanceOf(L).isRequired,isAdmin:le.a.bool};var Vr=$r;function Hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yr(e){var t=e.articleId,r=e.isAdmin||!1,n=Hr(Object(ie.useState)(e.comments),2),o=n[0],a=n[1];if(Object(ie.useEffect)((function(){var e=g.subscribe((function(){return a(ct(g.getState(),t))}));return function(){e()}}),[]),0===o.length)return ce.a.createElement("p",null,"No comments.");var i=o.map((function(e){return ce.a.createElement(Vr,{key:e.id,comment:e,isAdmin:r})}));return ce.a.createElement(ce.a.Fragment,null,i)}Yr.propTypes={articleId:le.a.number.isRequired,isAdmin:le.a.bool,comments:le.a.arrayOf(le.a.instanceOf(L)).isRequired};var Jr=Yr;function Gr(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Kr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Gr(a,n,o,i,c,"next",e)}function c(e){Gr(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zr,en=function(e){for(var t=0,r=Object.entries(e.changes());t<r.length;t++){var n=Qr(r[t],1)[0],o=document.querySelector("a.apply_changes[data-for=".concat(e.getAttrRemoteName(n),"]"));o&&o.classList.remove("none")}},tn=function(e){return function(){var t=Kr(regeneratorRuntime.mark((function t(r,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next="updating"===t.t0?3:"updated"===t.t0?5:"destroyed"===t.t0?9:10;break;case 3:return document.querySelector("h1").getAttribute("data-mark")!==n.mark&&Q({warning:"Uuups someone else started editing this article."}),t.abrupt("break",10);case 5:return t.next=7,e.reload();case 7:return en(e),t.abrupt("break",10);case 9:window.location.href="/user/articles?message=deleted";case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},rn={render:function(e){g.dispatch(c([e])),Object(o.subscribe)({to:e,with:tn(e)});var t=new a.UI.Form({for:e});t.render(),function(e){for(var t=0,r=Array.from(document.querySelectorAll("a.apply_changes"));t<r.length;t++){r[t].addEventListener("click",(function(t){t.preventDefault();var r=e.getObj(),n=r.getAttrName(t.target.getAttribute("data-for"));r[n]=r.changes()[n].is,e.fill(n),t.target.classList.add("none")}))}}(t)},renderComments:(Zr=Kr(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.all({articleId:t});case 2:r=e.sent,g.dispatch(f(r.resources,t)),Object(ue.render)(ce.a.createElement(Jr,{articleId:t,comments:r.resources,isAdmin:!0}),document.getElementById("comments"));case 5:case"end":return e.stop()}}),e)}))),function(e){return Zr.apply(this,arguments)})};function nn(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function on(e){var t=e.article,r=e.onArticleDestroyed,n=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),confirm("Are you sure?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.delete(null);case 5:(o=e.sent).success&&g.dispatch({type:"REMOVE_ARTICLE",id:o.id}),r(o);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){nn(a,n,o,i,c,"next",e)}function c(e){nn(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return ce.a.createElement("tr",{id:"article_".concat(t.id)},ce.a.createElement("td",null,t.title),ce.a.createElement("td",null,t.content),ce.a.createElement("td",{className:"comments_quantity"},t.commentsCount),ce.a.createElement("td",{className:"published"},t.publishedAt?"yes":"no"),ce.a.createElement("td",null,ce.a.createElement("a",{href:"/user/articles/".concat(t.id)},"Show")," |",ce.a.createElement("a",{href:"/user/articles/".concat(t.id,"/edit")},"Edit")," |",ce.a.createElement("a",{href:"/user/articles/".concat(t.id),className:"delete_article",onClick:n},"Delete")))}on.propTypes={article:le.a.instanceOf(P).isRequired,onArticleDestroyed:le.a.func.isRequired};var an=on;function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return un(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sn(e){var t=cn(Object(ie.useState)(e.articles),2),r=t[0],n=t[1];Object(ie.useEffect)((function(){var e=g.subscribe((function(){return n(g.getState().articles)}));return function(){e()}}),[]);var o=r.map((function(t){return ce.a.createElement(an,{key:t.id,article:t,onArticleDestroyed:e.onArticleDestroyed})}));return ce.a.createElement(ce.a.Fragment,null,o)}sn.propTypes={articles:le.a.arrayOf(le.a.instanceOf(P)).isRequired,onArticleDestroyed:le.a.func.isRequired};var ln=sn;function fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pn(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function mn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){pn(a,n,o,i,c,"next",e)}function c(e){pn(a,n,o,i,c,"throw",e)}i(void 0)}))}}var dn=function(){var e=mn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.find(o.helpers.params.id);case 2:t=e.sent,g.dispatch(u([t])),zr(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yn=function(){var e=mn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.all({articleId:o.helpers.params.id});case 2:t=e.sent,g.dispatch(f(t.resources,o.helpers.params.id)),Object(ue.render)(ce.a.createElement(Jr,{articleId:o.helpers.params.id,comments:t.resources}),document.getElementById("comments"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bn=function(e){e.success?Q({notice:e.notice}):Q({alert:e.alert})},hn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n,a,i;return t=e,(r=[{key:"index",value:(i=mn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"deleted"===o.helpers.params.message&&Q({alert:"Article has been deleted."}),e.next=3,P.get("all");case 3:t=e.sent,g.dispatch(u(t.resources)),Object(ue.render)(ce.a.createElement(ln,{articles:t.resources,onArticleDestroyed:bn}),document.getElementById("article_list"));case 6:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"show",value:function(){dn(),yn()}},{key:"new",value:function(){rn.render(new P)}},{key:"edit",value:(a=mn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rn.renderComments(o.helpers.params.id),e.next=3,P.find(o.helpers.params.id);case 3:t=e.sent,rn.render(t);case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})}])&&fn(t.prototype,r),n&&fn(t,n),e}();function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=jn(e);if(t){var o=jn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return En(this,r)}}function En(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(r,e);var t=On(r);function r(){return gn(this,r),t.apply(this,arguments)}return r}(ae);Sn.Articles=hn,Sn.Rooms=Pr;var _n=Sn;function kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(r),!0).forEach((function(t){xn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function An(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return In(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return In(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pn(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Cn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Pn(a,n,o,i,c,"next",e)}function c(e){Pn(a,n,o,i,c,"throw",e)}i(void 0)}))}}var Tn=function(){var e=Cn(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,o.Env.namespaceController.constructor===_n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,P.find({id:r,abbr:!0});case 5:n=e.sent,g.dispatch(c([n]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dn=function(){var e=Cn(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,o.Env.namespaceController.constructor!==it){e.next=8;break}return e.next=4,P.find({id:r,abbr:!0,resource:"admin"});case 4:n=e.sent,g.dispatch({type:"PREPEND_ARTICLES",articles:[n]}),e.next=12;break;case 8:return e.next=10,P.find({id:r,abbr:!0});case 10:a=e.sent,g.dispatch(c([a]));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mn=function(){var e=Cn(regeneratorRuntime.mark((function e(t){var r,n,a,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,n={id:r,abbr:!0},o.Env.namespaceController.constructor===it&&(n.resource="admin"),a=O(g.getState(),r),i=An(a,2),c=i[0],u=i[1],c){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,P.find(n);case 8:c=e.sent,g.dispatch(s(c,u));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zn=function(e,t){var r=e.article_id,n=An(O(g.getState(),r),2),o=n[0],a=n[1];if(o){var i=new P(Rn(Rn({},o),{},{commentsCount:o.commentsCount+t}));g.dispatch(s(i,a))}},Nn=function(){var e=Cn(regeneratorRuntime.mark((function e(t){var r,n,a,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.article_id,n=t.id,a={articleId:r,id:n},o.Env.namespaceController.constructor===tr&&(a.resource="main"),i=O(g.getState(),r),c=An(i,1),c[0]){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,L.find(a);case 8:if(null!==(u=e.sent)){e.next=11;break}return e.abrupt("return");case 11:g.dispatch(l([u],r)),zn({article_id:r},1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bn=function(){var e=Cn(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.article_id,n=t.id,o=E(g.getState(),n,{parentId:r}),a=An(o,2),i=a[0],c=a[1],i){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,i.reload();case 6:u=e.sent,g.dispatch(p(u,r,c));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ln=function(){var e=Cn(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="PING"===e.t0?3:"NEW_MESSAGE"===e.t0?5:"Article created"===e.t0?7:"Article published"===e.t0?9:"Article updated"===e.t0?11:"Article.Comment created"===e.t0?13:"Article.Comment destroyed"===e.t0?15:"Article.Comment updated"===e.t0?18:"User created"===e.t0?20:25;break;case 3:return o.Env.namespaceController.constructor===_n&&alert("Ping!"),e.abrupt("break",25);case 5:return(c=void 0,c=function(){},o.Env.namespaceController.constructor!==_n||o.Env.controller.constructor!==Pr||"show"!==o.Env.action?c:o.Env.controller.callbacks.receivedMessage)(t.message,t.author),e.abrupt("break",25);case 7:return Tn(t.payload),e.abrupt("break",25);case 9:return Dn(t.payload),e.abrupt("break",25);case 11:return Mn(t.payload),e.abrupt("break",25);case 13:return Nn(t.payload),e.abrupt("break",25);case 15:return zn(t.payload,-1),n=t.payload,a=void 0,i=void 0,a=n.article_id,i=n.id,g.dispatch(function(e,t){return{type:"REMOVE_COMMENT",id:e,articleId:t}}(i,a)),e.abrupt("break",25);case 18:return Bn(t.payload),e.abrupt("break",25);case 20:return e.next=22,Y.find(t.payload.id);case 22:return r=e.sent,g.dispatch({type:"PREPEND_USERS",users:[r]}),e.abrupt("break",25);case 25:case"end":return e.stop()}var n,a,i,c}),e)})));return function(t){return e.apply(this,arguments)}}();P.Comment=L,gr.Member=sr,Object(o.init)({cable:Object(i.createConsumer)(),controllers:{Admin:it,Main:tr,User:_n},models:{Article:P,Room:gr,User:Y},notificationCenter:Ln,notifications:{log:!0,size:10},postInit:function(){"test"===document.querySelector("body").getAttribute("data-rails-env")&&Object(o.getWire)().setPollingTime(1e3)}}),Object(a.connect)(o.connector);var Un,qn;r(148);function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Yn(e);if(t){var o=Yn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Wn(this,r)}}function Wn(e,t){return!t||"object"!==Fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}o.Validators.Vulgarity=(qn=Un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(i,e);var t,r,n,a=Hn(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this)}return t=i,(r=[{key:"validate",value:function(){if(null!=this.val)switch(Fn(this.val)){case"string":var e=this._getVulgarWord();if(!new RegExp("".concat(e),["i"]).exec(this.val))return;this._addErrorMessage();break;default:throw new TypeError("Vulgarity validator is applicable only for strings and ".concat(this.attr," isn't."))}}},{key:"_addErrorMessage",value:function(){var e=o.I18n[Object(o.getLocale)()].errors.messages.vulgarity;this.obj.addErrorMessage(e,{for:this.attr})}},{key:"_getVulgarWord",value:function(){switch(Object(o.getLocale)()){case"pl":return"kurwa";case"en":return"fuck"}}}])&&$n(t.prototype,r),n&&$n(t,n),i}(o.Validators.Base),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Un,"identity","Vulgarity"),qn);o.I18n.pl={variants:{few:function(e){var t,r=parseInt((t=String(e))[t.length-1]);-1!==[2,3,4].indexOf(r)&&(2!==String(e).length||String(e)[0])}},models:{},attributes:{},ui:{form:{sending:"Wysyłam...",success:"Sukces",errors:{connection:"Błąd z połączeniem",invalid_data:"Nieprawidłowe dane"}}},date:{formats:{default:"%d-%m-%Y",short:"%d %b",long:"%B %d, %Y"},day_names:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],abbr_day_names:["nie","pon","wto","śro","czw","pią","sob"],month_names:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],abbr_month_names:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru"]},errors:{messages:{accepted:"musi zostać zaakceptowane",blank:"nie może być puste",confirmation:"nie zgadza się z polem %{attribute}",empty:"nie może być puste",equal_to:"musi być równe %{count}",even:"musi być parzyste",exclusion:"jest zarezerwowane",greater_than:"musi być większe od %{count}",greater_than_or_equal_to:"musi być większe lub równe %{count}",inclusion:"nie znajduje się na liście dopuszczalnych wartości",invalid:"jest nieprawidłowe",less_than:"musi być mniejsze od %{count}",less_than_or_equal_to:"musi być mniejsze lub równe %{count}",not_a_number:"nie jest liczbą",not_an_integer:"musi być liczbą całkowitą",odd:"musi być nieparzyste",present:"musi być puste",too_long:{few:"jest za długie (maksymalnie %{count} znaki)",many:"jest za długie (maksymalnie %{count} znaków)",one:"jest za długie (maksymalnie jeden znak)",other:"jest za długie (maksymalnie %{count} znaków)"},too_short:{few:"jest za krótkie (przynajmniej %{count} znaki)",many:"jest za krótkie (przynajmniej %{count} znaków)",one:"jest za krótkie (przynajmniej jeden znak)",other:"jest za krótkie (przynajmniej %{count} znaków)"},wrong_length:{few:"ma nieprawidłową długość (powinna wynosić %{count} znaki)",many:"ma nieprawidłową długość (powinna wynosić %{count} znaków)",one:"ma nieprawidłową długość (powinna wynosić jeden znak)",other:"ma nieprawidłową długość (powinna wynosić %{count} znaków)"},other_than:"musi być inna niż %{count}"}}},o.I18n.pl.models.User="Użytkownik",o.I18n.pl.attributes.User={password:"Hasło",passwordConfirmation:"Powtórz hasło"},o.I18n.en.errors.messages.vulgarity="contains strong language.",o.I18n.pl.errors.messages.vulgarity="zawiera mocny język.",o.I18n.en.date={formats:{default:"%Y-%m-%d",short:"%b %d",long:"%B %d, %Y"},day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},window.test={getLine:o.getLine,getWire:o.getWire}}});
//# sourceMappingURL=application.js.map