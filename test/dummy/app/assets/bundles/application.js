!function(){var e,t={78443:function(e){var t;self,t=()=>(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}e.r(t),e.d(t,{Config:()=>o,I18n:()=>i,Models:()=>B,Validators:()=>M,connector:()=>L});const o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.localeVar="en",this.protocolWithHostVar=null,this.scopeVar=null}var t,r;return t=e,(r=[{key:"locale",get:function(){return this.localeVar},set:function(e){this.localeVar=e}},{key:"protocolWithHost",get:function(){return this.protocolWithHostVar},set:function(e){e?"/"===e[e.length-1]?this.protocolWithHostVar=e.slice(0,e.length-1):this.protocolWithHostVar=e:this.protocolWithHostVar=null}},{key:"scope",get:function(){return this.scopeVar},set:function(e){this.scopeVar=e}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()),i={en:{variants:{},models:{},attributes:{},errors:{messages:{accepted:"must be accepted",blank:"can't be blank",confirmation:"doesn't match %{attribute}",empty:"can't be empty",equal_to:"must be equal to %{count}",even:"must be even",exclusion:"is reserved",greater_than:"must be greater than %{count}",greater_than_or_equal_to:"must be greater than or equal to %{count}",inclusion:"is not included in the list",invalid:"is invalid",less_than:"must be less than %{count}",less_than_or_equal_to:"must be less than or equal to %{count}",not_a_number:"is not a number",not_an_integer:"must be an integer",odd:"must be odd",present:"must be blank",too_long:{one:"is too long (maximum is 1 character)",other:"is too long (maximum is %{count} characters)"},too_short:{one:"is too short (minimum is 1 character)",other:"is too short (minimum is %{count} characters)"},wrong_length:{one:"is the wrong length (should be 1 character)",other:"is the wrong length (should be %{count} characters)"},other_than:"must be other than %{count}"}}}};function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var a={},c=function(e,t){if(-1!==e.indexOf(t))return null;var r=function(e){var t=e.length;return e.find((function(e,r){if(null===e)return t=r,!0})),t}(e);return e[r]=t,r},l=function(e,t,r){var n,o,i;void 0!==(null===(n=a)||void 0===n||null===(o=n[e])||void 0===o||null===(i=o[t])||void 0===i?void 0:i[r])&&(a[e][t][r]=null)},u=function(e){var t=e.getIdentity();void 0===a[t]&&(a[t]={}),void 0===a[t][e.id]&&(a[t][e.id]=[]),a[t][e.id][0]=e};const d={get imap(){return a},clear:function(){return a={}},subscribe:function(e){var t=function(){};if("object"===s(e.to)){var r=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).with;u(t);var r=a[t.getIdentity()][t.id];return c(r,e)}(e.with,{with:e.to});return null===r?t:function(){l(e.to.getIdentity(),e.to.id,r)}}if("function"==typeof e.to){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===a[e]&&(a[e]={}),void 0===a[e].collection&&(a[e].collection=[]);var r=a[e].collection;return c(r,t.to)}(e.to.getIdentity(),{to:e.with});return null===n?t:function(){l(e.to.getIdentity(),"collection",n)}}},unsubscribe:l,add:u,find:function(e,t){return void 0!==a[e]&&null!=a[e][t]?a[e][t][0]:null},findConnected:function(e,t){return void 0!==a[e]&&void 0!==a[e][t]&&a[e][t].length>1?a[e][t].slice(1):[]}},p=function(){function e(){this.obj=null,this.attr=null,this.val=null,this.opts=null}return e.sharedInstances={},e.instance=function(e,t,r){var n,o;return o=this.identity,null==this.sharedInstances[o]&&(this.sharedInstances[o]=new M[o]),(n=this.sharedInstances[o]).assignAttribs(e,t,r),n},e.prototype.assignAttribs=function(e,t,r){return this.obj=e,this.attr=t,this.val=this.obj[this.attr],this.opts=r},e}();var m={}.hasOwnProperty;const h=function(e){function t(){t.__super__.constructor.call(this)}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.identity="Absence",t.prototype.validate=function(){if("string"==typeof this.val){if(null!=this.val&&0===this.val.length)return}else if(null==this.val)return;return this._addErrorMessage()},t.prototype._addErrorMessage=function(){var e;return e=null!=this.opts.message?this.opts.message:i[o.locale].errors.messages.present,this.obj.addErrorMessage(e,{for:this.attr})},t}(p);var f={}.hasOwnProperty;const y=function(e){function t(){t.__super__.constructor.call(this)}return function(e,t){for(var r in t)f.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.identity="Confirmation",t.prototype.validate=function(){var e;if(e=this.obj[this._properAttr()],null==this.val||null==e||this.val!==e)return this._addErrorMessage()},t.prototype._addErrorMessage=function(){var e,t,r,n;return r=this.attr.charAt(0).toUpperCase()+this.attr.slice(1),e=(t=i[o.locale].attributes[this.obj.getIdentity()])&&t[this.attr]||r,n=(n=null!=this.opts.message?this.opts.message:i[o.locale].errors.messages.confirmation).replace("%{attribute}",e),this.obj.addErrorMessage(n,{for:this._properAttr()})},t.prototype._properAttr=function(){return this.attr+"Confirmation"},t}(p);var g={}.hasOwnProperty;const b=function(e){function t(){t.__super__.constructor.call(this)}return function(e,t){for(var r in t)g.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.identity="Exclusion",t.prototype.validate=function(){if(-1!==(this.opts.in||this.opts.within||[]).indexOf(this.val))return this._addErrorMessage()},t.prototype._addErrorMessage=function(){var e;return e=null!=this.opts.message?this.opts.message:i[o.locale].errors.messages.exclusion,this.obj.addErrorMessage(e,{for:this.attr})},t}(p);var _={}.hasOwnProperty;const v=function(e){function t(){t.__super__.constructor.call(this)}return function(e,t){for(var r in t)_.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.identity="Format",t.prototype.validate=function(){if(null==this.opts.with.exec(this.val))return this._addErrorMessage()},t.prototype._addErrorMessage=function(){var e;return e=null!=this.opts.message?this.opts.message:i[o.locale].errors.messages.invalid,this.obj.addErrorMessage(e,{for:this.attr})},t}(p);var w={}.hasOwnProperty;const E=function(e){function t(){t.__super__.constructor.call(this)}return function(e,t){for(var r in t)w.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.identity="Inclusion",t.prototype.validate=function(){if(-1===(this.opts.in||this.opts.within||[]).indexOf(this.val))return this._addErrorMessage()},t.prototype._addErrorMessage=function(){var e;return e=null!=this.opts.message?this.opts.message:i[o.locale].errors.messages.inclusion,this.obj.addErrorMessage(e,{for:this.attr})},t}(p);var S={}.hasOwnProperty;const I=function(e){function t(){t.__super__.constructor.call(this)}return function(e,t){for(var r in t)S.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.identity="Length",t.prototype.validate=function(){var e;if(null!=this.val&&null!==(e=null!=this._range()[0]&&null!=this._range()[1]&&this._range()[0]===this._range()[1]&&this.val.length!==this._range()[0]?this._selectErrorMessage("wrong_length",this._range()[0]):null!=this._range()[0]&&this.val.length<this._range()[0]?this._selectErrorMessage("too_short",this._range()[0]):null!=this._range()[1]&&this.val.length>this._range()[1]?this._selectErrorMessage("too_long",this._range()[1]):null))return this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._range=function(){return[this.opts.minimum||this.opts.is||null!=this.opts.within&&this.opts.within[0]||null,this.opts.maximum||this.opts.is||null!=this.opts.within&&this.opts.within[1]||null]},t.prototype._selectErrorMessage=function(e,t){var r,n,s,a,c;if(1===t)return i[o.locale].errors.messages[e].one;for(s=null,r=0,n=(a=["few","many"]).length;r<n;r++)if(c=a[r],this._checkVariant(c,t)){s=i[o.locale].errors.messages[e][c];break}return null==s&&(s=i[o.locale].errors.messages[e].other),null!=this.opts.message&&(s=this.opts.message),/%{count}/.exec(s)&&(s=s.replace("%{count}",t)),s},t.prototype._checkVariant=function(e,t){if(null!=i[o.locale].variants[e])return i[o.locale].variants[e](t)},t}(p);var k={}.hasOwnProperty;const O=function(e){function t(){t.__super__.constructor.call(this)}return function(e,t){for(var r in t)k.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.identity="Numericality",t.prototype.validate=function(){return isNaN(this.val)?this._addNaNErrorMessage():null!=this.opts.only_integer&&Number(this.val)!==parseInt(this.val)?this._addIntErrorMessage():null!=this.opts.greater_than&&Number(this.val)<=this.opts.greater_than?this._addGreatherThanErrorMessage():null!=this.opts.greater_than_or_equal_to&&Number(this.val)<this.opts.greater_than_or_equal_to?this._addGreatherThanOrEqualToErrorMessage():null!=this.opts.equal_to&&Number(this.val)!==this.opts.equal_to?this._addEqualToErrorMessage():null!=this.opts.less_than&&Number(this.val)>=this.opts.less_than?this._addLessThanErrorMessage():null!=this.opts.less_than_or_equal_to&&Number(this.val)>this.opts.less_than_or_equal_to?this._addLessThanOrEqualToErrorMessage():null!=this.opts.other_than&&Number(this.val)===this.opts.other_than?this._addOtherThanErrorMessage():null!=this.opts.odd&&Number(this.val)%2!=1?this._addOddErrorMessage():null!=this.opts.even&&Number(this.val)%2!=0?this._addEvenErrorMessage():void 0},t.prototype._addNaNErrorMessage=function(){var e;return e=null!=this.opts.message?this.opts.message:i[o.locale].errors.messages.not_a_number,this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._addIntErrorMessage=function(){var e;return e=i[o.locale].errors.messages.not_an_integer,this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._addGreatherThanErrorMessage=function(){var e;return e=(e=i[o.locale].errors.messages.greater_than).replace("%{count}",this.opts.greater_than),this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._addGreatherThanOrEqualToErrorMessage=function(){var e;return e=(e=i[o.locale].errors.messages.greater_than_or_equal_to).replace("%{count}",this.opts.greater_than_or_equal_to),this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._addEqualToErrorMessage=function(){var e;return e=(e=i[o.locale].errors.messages.equal_to).replace("%{count}",this.opts.equal_to),this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._addLessThanErrorMessage=function(){var e;return e=(e=i[o.locale].errors.messages.less_than).replace("%{count}",this.opts.less_than),this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._addLessThanOrEqualToErrorMessage=function(){var e;return e=(e=i[o.locale].errors.messages.less_than_or_equal_to).replace("%{count}",this.opts.less_than_or_equal_to),this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._addOtherThanErrorMessage=function(){var e;return e=(e=i[o.locale].errors.messages.other_than).replace("%{count}",this.opts.other_than),this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._addOddErrorMessage=function(){var e;return e=i[o.locale].errors.messages.odd,this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._addEvenErrorMessage=function(){var e;return e=i[o.locale].errors.messages.even,this.obj.addErrorMessage(e,{for:this.attr})},t}(p);var j={}.hasOwnProperty;const A=function(e){function t(){t.__super__.constructor.call(this)}return function(e,t){for(var r in t)j.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.identity="Presence",t.prototype.validate=function(){if("string"==typeof this.val){if(null!=this.val&&this.val.length>0)return}else if(null!=this.val)return;return this._addErrorMessage()},t.prototype._addErrorMessage=function(){var e;return e=null!=this.opts.message?this.opts.message:i[o.locale].errors.messages.blank,this.obj.addErrorMessage(e,{for:this.attr})},t}(p);var T,C={}.hasOwnProperty;T=function(e){function t(){t.__super__.constructor.call(this)}return function(e,t){for(var r in t)C.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.identity="Size",t.prototype.validate=function(){return I.instance(this.obj,this.attr,this.opts).validate()},t}(p);const M={Absence:h,Base:p,Confirmation:y,Exclusion:b,Format:v,Inclusion:E,Length:I,Numericality:O,Presence:A,Size:T};var R,N=function(e,t,r){var n,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=function(e){var t={};if(!e)return t;var r=["resource","total","count"];return Object.keys(e).forEach((function(n){-1===r.indexOf(n)&&(t[n]=e[n])})),t}(r),a="GET"===e?"".concat(t,"?").concat((n=s,o="",Object.keys(n).forEach((function(e){""!==o&&(o="".concat(o,"&")),o="".concat(o).concat(e,"=").concat(encodeURIComponent(n[e]))})),o)):t,c=document.querySelector("meta[name='csrf-token']"),l=new XMLHttpRequest;return l.withCredentials=!0===i.cookiesByCORS,l.open(e,a),l.setRequestHeader("Accept","application/json"),l.setRequestHeader("Content-Type","application/json"),c&&l.setRequestHeader("X-CSRF-Token",c.content),null!=i.authorizationHeader&&l.setRequestHeader("Authorization",i.authorizationHeader),l.send(JSON.stringify(s)),l};R=function(){function e(e){null==e&&(e={}),this.id=null,this.errors=null,this.resource=e.resource,null!=this.constructor.attributes&&this.__initAttributes(),null!=e&&this.__assignAttributes(e)}return e.getIdentity=function(){if(null!=this.identity)return this.identity;throw"Specify Model's identity!"},e.getRemoteName=function(){return null!=this.remoteName?this.remoteName:this.getIdentity()},e.all=function(e){return null==e&&(e={}),this.get("all",e)},e.get=function(e,t){return null==t&&(t={}),this.__send("GET",e,t)},e.post=function(e,t){return null==t&&(t={}),this.__send("POST",e,t)},e.put=function(e,t){return null==t&&(t={}),this.__send("PUT",e,t)},e.patch=function(e,t){return null==t&&(t={}),this.__send("PATCH",e,t)},e.delete=function(e,t){return null==t&&(t={}),this.__send("DELETE",e,t)},e.find=function(e){var t,r,n,o,i;return o={},"object"==typeof e?(o=e,t=e.id,delete o.id):t=e,n=this.__getResourcesUrl(o)+"/"+t,r=N("GET",n,o,this.__requestOpts()),new Promise((i=this,function(t,n){return r.onerror=function(e){return n(e)},r.onload=function(r){var n;if(404!==r.target.status)return n=JSON.parse(r.target.response),t(i.__initFromJSON(n,e.resource));t(null)}}))},e.getAttribRemoteName=function(e){return null==this.attributes||null==this.attributes[e]?null:null==this.attributes[e].remoteName?e:this.attributes[e].remoteName},e.getResourcesUrlParams=function(e){var t,r,n,o;for(o=this.__getResourcesUrl({resource:e.resource}),n=/:(\w+)\/?/,r=[];t=n.exec(o);)r.push(t[1]),o=o.replace(t[0],t[1]);return r},e.__getResourcesUrl=function(e){var t,r;return r=null==this.resources?"/"+this.getRemoteName().toLowerCase()+"s":e.resource?this.resources[e.resource].url:null!=o.scope&&null!=this.resources[o.scope]?this.resources[o.scope].url:this.resources.url,null!=this.protocolWithHost?r=""+this.protocolWithHost+r:null!=o.protocolWithHost&&(r=""+o.protocolWithHost+r),null==(t=/:([a-zA-Z]+)\/?/.exec(r))||(null!=e[t[1]]?(r=r.replace(":"+t[1],e[t[1]]),delete e[t[1]]):null!=e.obj&&null!=e.obj[t[1]]&&(r=r.replace(":"+t[1],e.obj[t[1]]))),r},e.__requestOpts=function(){return{authorizationHeader:o.authorizationHeader||this.authorizationHeader,cookiesByCORS:null!=this.cookiesByCORS?this.cookiesByCORS:o.cookiesByCORS}},e.__page=function(e,t,r){var n,o,i;return o=t.url,t.params[t.pageParam]=e,n=N(t.method,o,t.params,this.__requestOpts()),new Promise((i=this,function(e,o){return n.onerror=function(e){return o(e)},n.onload=function(n){var o,s,a,c,l,u,d,p,m,h;if((o=JSON.parse(n.target.response)).constructor===Array)for(s=0,l=o.length;s<l;s++)p=o[s],d=i.__initFromJSON(p,t.resource),r.push(d);else if(null!=o.resources){for(r.constructor===Array&&(r={resources:[],count:0}),a=0,u=(m=o.resources).length;a<u;a++)p=m[a],d=i.__initFromJSON(p,t.resource),r.resources.push(d);r.count=o.count}else for(c in o)h=o[c],r[c]=h;return e(r)}}))},e.__paginate=function(e){var t,r;return t={method:e.method,url:e.url,params:e.params,pageParam:e.pageParam,resource:e.resource},this.__page(e.pageNum||1,t,[]).then((r=this,function(n){var o,i,s,a,c,l,u;if(u=n.count||e.total,c=Promise.resolve(n),null!=e.pageNum)return c;if(u<=e.perPage)return c;if((a=parseInt(u/e.perPage))!==u/e.perPage&&(a+=1),1===a)return c;for(i=s=2,l=a;2<=l?s<=l:s>=l;i=2<=l?++s:--s)o=function(e){return c=c.then((function(o){return r.__page(e,t,n)}))},o(i);return c}))},e.__getPaginationParam=function(e){var t,r,n,i,s,a;return t="page",null!=e&&null!=this.resources&&this.resources[e]?(null!=(r=this.resources[e].paginate)?r.param:void 0)||t:null!=o.scope&&null!=this.resources&&null!=this.resources[o.scope]?(null!=(n=this.resources[o.scope])&&null!=(i=n.paginate)?i.param:void 0)||t:null!=(null!=(s=this.resources)&&null!=(a=s.paginate)?a.param:void 0)?this.resources.paginate.param:t},e.__getPaginationPer=function(e){var t,r,n,i,s;return null!=e&&null!=this.resources&&this.resources[e]?null!=(t=this.resources[e].paginate)?t.per:void 0:null!=o.scope&&null!=this.resources&&null!=this.resources[o.scope]?null!=(r=this.resources[o.scope])&&null!=(n=r.paginate)?n.per:void 0:null!=(null!=(i=this.resources)&&null!=(s=i.paginate)?s.per:void 0)?this.resources.paginate.per:null},e.__send=function(e,t,r){var n,o;return o=this.__getResourcesUrl(r),"all"!==t&&(o=o+"/"+t),n={method:e,url:o,params:r,resource:r.resource,perPage:this.__getPaginationPer(r.resource),pageNum:r.page,pageParam:this.__getPaginationParam(r.resource),total:r.total||r.count},this.__paginate(n)},e.__initFromJSON=function(e,t){var r;return(r=new this(e)).resource=t,d.add(r),r},e.prototype.setResource=function(e){return this.resource=e},e.prototype.getIdentity=function(){return this.constructor.getIdentity()},e.prototype.getAttrRemoteName=function(e){return null==this.constructor.attributes||null==this.constructor.attributes[e]?null:this.constructor.attributes[e].remoteName||e},e.prototype.getAttrName=function(e){var t,r;if(null==this.constructor.attributes)return e;if(null!=this.constructor.attributes[e])return e;for(t in r=this.constructor.attributes)if(r[t].remoteName===e)return t;return e},e.prototype.getAttrType=function(e){return null==this.constructor.attributes||null==this.constructor.attributes[e]?null:this.constructor.attributes[e].type},e.prototype.assignAttr=function(e,t){var r;if(r=this.getAttrType(e),null!=t){switch(r){case"Date":t=new Date(Date.parse(t));break;case"Integer":case"Int":t=parseInt(t);break;case"Float":t=parseFloat(t);break;case"Boolean":case"Bool":t="boolean"==typeof t?t:Boolean(parseInt(t));break;case"Number":t=Number(t);break;case"String":t=String(t)}return this[e]=t}this[e]=null},e.prototype.attributes=function(){var e,t,r;if(e={id:this.id},null==this.constructor.attributes)return e;for(t in r=this.constructor.attributes)r[t],e[t]=this[t];return e},e.prototype.isValid=function(){var e,t,r,n,o,i,s,a,c,l,u;if(null==this.constructor.attributes)return!0;for(n in this.errors=null,i=this.constructor.attributes)if(null!=(e=i[n]).validations)for(c in s=e.validations)l=s[c],null!=this.id&&"create"===l.on||null==this.id&&"update"===l.on||(null==l.if||l.if(this))&&(u=c.charAt(0).toUpperCase()+c.slice(1),null!=M[u]?(o=this.__processedValidationSettings(l),M[u].instance(this,n,o).validate()):console.warn('"'+u+'" validator is not implemented!'));if(null!=this.constructor.validate)for(t=0,r=(a=this.constructor.validate).length;t<r;t++)this[a[t]]();return null==this.errors},e.prototype.isInvalid=function(){return!this.isValid()},e.prototype.isEmpty=function(){var e,t;for(e in t=this.attributes())if(t[e],null!==this[e])return!1;return!0},e.prototype.addErrorMessage=function(e,t){return null==t&&(t={}),null==this.errors&&(this.errors={}),null==this.errors[t.for]&&(this.errors[t.for]=[]),this.errors[t.for].push(e)},e.prototype.save=function(){var e,t,r;return e=null!=this.id?"PUT":"POST",t=N(e,this.__getResourceUrl(),this.serialize(),this.constructor.__requestOpts()),new Promise((r=this,function(e,n){return t.onerror=function(e){return n(e)},t.onload=function(t){var n;if(!(n=JSON.parse(t.target.response)).success)return null!=n.errors&&r.__assignRemoteErrorMessages(n.errors),e(n);e(n)}}))},e.prototype.updateAttribute=function(e){var t,r;return t=N("PUT",this.__getResourceUrl(),this.serialize(e),this.constructor.__requestOpts()),new Promise((r=this,function(e,n){return t.onerror=function(e){return n(e)},t.onload=function(t){var o;return t.target.status>=200&&t.target.status<400?(o=JSON.parse(t.target.response)).success?void e(o):(null!=o.errors&&r.__assignRemoteErrorMessages(o.errors),e(o)):t.target.status>=500?n(t):void 0}}))},e.prototype.serialize=function(e){var t,r,n,o;if(null==e&&(e=null),null==this.constructor.attributes)return{};for(e in(r={})[n=this.constructor.getRemoteName().toLowerCase()]={},t={},null!=e?t[e]=null:t=this.constructor.attributes,t)t[e],o=this.getAttrRemoteName(e),r[n][o]=this[e];return r},e.prototype.reload=function(){var e,t,r,n,o;for(e={id:this.id,resource:this.resource},t=0,r=(o=this.constructor.getResourcesUrlParams({resource:this.resource})).length;t<r;t++)e[n=o[t]]=this[n];return this.constructor.find(e)},e.prototype.changes=function(){var e,t,r,n,o;for(t in n={},e=d.find(this.getIdentity(),this.id),r=this.attributes())if((o=r[t])!==e[t]){if(null!=o&&o.constructor===Date&&e[t]-o==0)continue;o!==e[t]&&(n[t]={is:e[t],was:o})}return n},e.prototype.applyChanges=function(){var e,t,r,n;for(e in r=[],t=this.changes())n=t[e],r.push(this[e]=n.is);return r},e.prototype.toKey=function(){return this.getIdentity().toLowerCase()+"_"+this.id},e.prototype.get=function(e,t){return null==t&&(t={}),this.__send("GET",e,t)},e.prototype.post=function(e,t){return null==t&&(t={}),this.__send("POST",e,t)},e.prototype.put=function(e,t){return null==t&&(t={}),this.__send("PUT",e,t)},e.prototype.patch=function(e,t){return null==t&&(t={}),this.__send("PATCH",e,t)},e.prototype.delete=function(e,t){return null==t&&(t={}),this.__send("DELETE",e,t)},e.prototype.__send=function(e,t,r){var n,o;return o=this.__getResourceUrl(),null!=t&&(o=o+"/"+t),n=N(e,o,r,this.constructor.__requestOpts()),new Promise((function(e,t){return n.onerror=function(e){return t(e)},n.onload=function(n){return n.target.status>=200&&n.target.status<400?(r=JSON.parse(n.target.response),e(r)):n.target.status>=500?t(n):void 0}}))},e.prototype.__assignAttributes=function(e){var t,r,n,o;for(r in n=[],e)o=e[r],t=this.getAttrName(r),n.push(this.assignAttr(t,o));return n},e.prototype.__initAttributes=function(){var e,t,r;for(e in r=[],t=this.constructor.attributes)t[e],r.push(this[e]=null);return r},e.prototype.__assignRemoteErrorMessages=function(e){var t,r,n,o,i;for(o in i=[],e)n=e[o],t=this.getAttrName(o),i.push(function(){var e,o,i;for(i=[],e=0,o=n.length;e<o;e++)r=n[e],i.push(this.addErrorMessage(r,{for:t}));return i}.call(this));return i},e.prototype.__getResourceUrl=function(){var e;return e=this.constructor.__getResourcesUrl({resource:this.resource,obj:this}),null==this.id?e:e+"/"+this.id},e.prototype.__processedValidationSettings=function(e){var t,r,n;for(t in n={},e)r=e[t],n[t]="function"==typeof r?r(this):r;return n},e}();const P=R;function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===z(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}P.prototype.clone=function(){return new this.constructor(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.attributes()))};const B={Base:P};var L={IdentityMap:d,Models:B};return t})(),e.exports=t()},84223:function(e){var t;self,t=()=>(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{connectWithModel:()=>A,init:()=>O,subscribe:()=>j});const r=function(){function e(){}return e.toURIParams=function(e){var t,r,n;for(t in r="",e)n=e[t],""!==r&&(r+="&"),r+=t+"="+encodeURIComponent(n);return r},e}(),n=function(e,t,r){var n=document.querySelector("meta[name='csrf-token']"),o=new XMLHttpRequest;return o.withCredentials=!0===r.cookiesByCORS,o.open(e,t),o.setRequestHeader("Accept","application/json"),n&&o.setRequestHeader("X-CSRF-Token",n.content),null!=r.authorizationHeader&&o.setRequestHeader("Authorization",r.authorizationHeader),o};var o=null,i=null,s=[];const a=function(e){return!!s.includes(e)||(s.unshift(e),s.length>100&&s.pop(),!1)};var c;function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}c=function(){var e,t,r,n,o;for(e in r=[],o=/^[A-Z]/,i)if(i[e],o.exec(e)&&"Base"!==e)for(t in r.push(e),n=i[e])n[t],o.exec(t)&&r.push(e+"."+t);return r};var p=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null!=e&&e(null==n?t:{type:n,payload:t},r)};const m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.log&&console.log(e);var r,n=function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{for(i=(r=r.call(e)).next;!(c=(n=i.call(r)).done)&&(a.push(n.value),4!==a.length);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(r)||u(r,4)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=n[0],d=n[1],m=n[2],h=n[3];if(a(h.loco.idempotency_key))return!1;if(delete h.loco,null==s&&null==m)return p(t.notificationCenter,h,t.emit),!0;var f=function(e){var t,r,n,o;for(t=0,r=(o=c()).length;t<r;t++)if(1===(n=o[t].split(".")).length){if(i[n[0]].getRemoteName()===e)return i[n[0]]}else if(2===n.length&&i[n[0]][n[1]].getRemoteName()===e)return i[n[0]][n[1]]}(s);return void 0===f?(p(t.notificationCenter,h,t.emit,"".concat(s," ").concat(m)),!1):(function(e,t,r,n,i,s){var a=e.getIdentity();p(i,n,s,"".concat(a," ").concat(r)),void 0!==o.imap[a]&&(void 0!==o.imap[a][t]&&function(e,t,r,n,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null===s&&(s=new n({id:e}));var a,c=l(o.findConnected(i,e));try{for(c.s();!(a=c.n()).done;)(0,a.value)(t,r)}catch(e){c.e(e)}finally{c.f()}}(t,r,n,e,a),void 0!==o.imap[a].collection&&0!==o.imap[a].collection.length&&function(e,t,r){var n,i=l(o.imap[r].collection.filter((function(e){return null!==e})));try{for(i.s();!(n=i.n()).done;)(0,n.value)("".concat(r," ").concat(e),t)}catch(e){i.e(e)}finally{i.f()}}(r,n,a))}(f,d,m,h,t.notificationCenter,t.emit),!0)};var h;h=function(){function e(e,t,r){var n,o,i,s;this.pollingTime=null!=(n=e.pollingTime)?n:3e3,this.log=!(null==e.log||!e.log),this.ssl=e.ssl,this.location=null!=(o=e.location)?o:"notification-center",this.size=null!=(i=e.size)?i:100,this.protocolWithHost=e.protocolWithHost,this.allowedDisconnectionTime=null!=(s=e.allowedDisconnectionTime)?s:10,this.disconnectedForTooLong=e.disconnectedForTooLong,this.notificationCenter=t,this.reqOpts=r,this.syncTime=null,this.token=null,this.pollingInterval=null,this.disconnectedSinceTime=null,this.uuid=null,this.line=null}return e.prototype.setDisconnectedForTooLong=function(e){return this.disconnectedForTooLong=e},e.prototype.setLine=function(e){return this.line=e},e.prototype.setPollingTime=function(e){var t;if(this.pollingTime=e,!(null!=(t=this.line)?t.isConnected:void 0))return this.disconnect(),this.connect()},e.prototype.connect=function(){return this.check(),this.pollingInterval=setInterval((e=this,function(){var t;if(!(null!=(t=e.line)?t.isConnected:void 0))return e.check();e.disconnect()}),this.pollingTime);var e},e.prototype.disconnect=function(){return window.clearInterval(this.pollingInterval)},e.prototype.check=function(){var e,t;return(e=n("GET",this._getURL()+"?"+r.toURIParams(this._requestParams()),this.reqOpts)).onload=(t=this,function(e){var r,n,o,i,s;if(e.target.status>=200&&e.target.status<400){if(r=JSON.parse(e.target.response),t.disconnectedSinceTime=null,t.syncTime=r[1],0===(s=r[0]).length)return;for(n=0,o=s.length;n<o;n++)i=s[n],m(i,{log:t.log,notificationCenter:t.notificationCenter,emit:t.line.send});if(s.length===t.size)return t.check()}else if(e.target.status>=500)return t._handleDisconnection()}),e.onerror=function(e){return function(){return e._handleDisconnection()}}(this),e.send()},e.prototype.fetchSyncTime=function(e){var t,r;return null==e&&(e={}),(t=n("GET",this._getURL()+"/sync-time",this.reqOpts)).onerror=(r=this,function(){if(null!=e.after)return r[e.after]()}),t.onload=function(t){return function(r){var n;if(r.target.status>=200&&r.target.status<400){if(n=JSON.parse(r.target.response),t.syncTime=n.sync_time,null!=e.after)return t[e.after]()}else if(r.target.status>=500&&null!=e.after)return t[e.after]()}}(this),t.send()},e.prototype._requestParams=function(){var e;return e={synced_at:this.syncTime},null!=this.token&&(e.token=this.token),null!=this.uuid&&(e.uuid=this.uuid),e},e.prototype._getURL=function(){var e,t,r,n;return t=(r=window.location.href.split("/"))[0],r[1],e=r[2],null!=this.protocolWithHost&&(t=(n=this.protocolWithHost.split("//"))[0],e=n[1]),null!=this.ssl&&(t=this.ssl?"https:":"http:"),t+"//"+e+"/"+this.location},e.prototype._handleDisconnection=function(){if(null==this.disconnectedSinceTime&&(this.disconnectedSinceTime=new Date),(new Date-this.disconnectedSinceTime)/1e3>this.allowedDisconnectionTime&&null!=this.disconnectedForTooLong)return this.disconnectedForTooLong(this.disconnectedSinceTime)},e}();const f=h;function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:String(t)}var _=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t,this.notificationCenter=r,this.wire=n,this.isConnected=!1}var t,r;return t=e,r=[{key:"connect",value:function(){this.client.connect(this)}},{key:"disconnect",value:function(){return this.client.disconnect()}},{key:"send",value:function(e){return!!this.isConnected&&this.client.send(e)}},{key:"pong",value:function(){var e=this;setTimeout((function(){return e.send({loco:{pong:!0}})}),3e3)}},{key:"connected",value:function(){console.log("WS connected"),this.isConnected=!0,null!==this.wire&&this.wire.check(),this.notificationCenter({loco:"connected"}),this.pong()}},{key:"disconnected",value:function(){console.log("WS disconnected"),this.isConnected=!1,null!==this.wire&&(this.wire.uuid=null,this.wire.fetchSyncTime({after:"connect"})),this.notificationCenter({loco:"disconnected"})}},{key:"rejected",value:function(){console.log("WS rejected"),this.notificationCenter({loco:"rejected"})}},{key:"received",value:function(e){if(null!=e.loco){var t=function(e,t){if(!0===e.ping&&t.pong(),null!=t.wire)return"string"==typeof e.sync_time&&(t.wire.syncTime=e.sync_time),"string"==typeof e.uuid&&(console.log("uuid: ".concat(e.uuid)),t.wire.uuid=e.uuid),"object"===y(e.notification)&&"Array"===e.notification.constructor.name&&m(e.notification,{log:t.wire.log,notificationCenter:t.notificationCenter,emit:t.send}),"string"!=typeof e.idempotency_key||!a(e.idempotency_key)}(e.loco,this);if(!0!==t)return;delete e.loco}0!==Object.keys(e).length&&this.notificationCenter(e)}}],r&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const v=_;function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:String(t)}var S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.consumer=t,this.subscription=null}var t,r;return t=e,r=[{key:"connect",value:function(e){this.subscription=this.consumer.subscriptions.create({channel:"Loco::NotificationCenterChannel"},{connected:function(){e.connected()},disconnected:function(){e.disconnected()},rejected:function(){e.rejected()},received:function(t){e.received(t)}})}},{key:"disconnect",value:function(){this.consumer.disconnect()}},{key:"send",value:function(e){this.subscription.send(e)}}],r&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const I=S,k=function(){function e(e){this.models=e,this.wire=null,this.line=null}return e.prototype.getModels=function(){return this.models},e.prototype.getLine=function(){return this.line},e.prototype.getWire=function(){return this.wire},e.prototype.setAuthorizationHeader=function(e){var t,r,n,o;for(t in o=[],n=this.models)r=n[t],o.push(r.authorizationHeader=e);return o},e.prototype.setDisconnectedForTooLong=function(e){return this.wire.setDisconnectedForTooLong(e)},e.prototype.init=function(e){var t,r,n,o;return(t=null!=(r=e.notifications)?r:{}).protocolWithHost=e.protocolWithHost,!1!==t.enable&&(n={cookiesByCORS:e.cookiesByCORS,authorizationHeader:e.authorizationHeader},this.wire=new f(t,e.notificationCenter,n),this.wire.fetchSyncTime({after:"connect"})),null!=(o=this._initWsClient(e))&&(this.line=new v(o,e.notificationCenter,this.wire),this.line.connect(),null!=this.wire&&this.wire.setLine(this.line)),this._ready((function(){if(null!=e.postInit)return e.postInit()}))},e.prototype.emit=function(e){return this.line.send(e)},e.prototype._initWsClient=function(e){return null!=e.wsClient?e.wsClient:null!=e.cable?new I(e.cable):null},e.prototype._ready=function(e){return(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)},e}();var O=function(e){var t=function(e){var t=e.models||{};if(null===i)return t;for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];i[o]=t[o]}return t}(e),r=new k(t);return r.init(e),r},j=function(){},A=function(e){var t,r;t=e.IdentityMap,(o=t).clear(),r=e.Models,i=r,j=e.IdentityMap.subscribe};return t})(),e.exports=t()},64557:function(e,t,r){"use strict";r(84315),r(8559),document.addEventListener("turbo:before-render",(e=>{const{namespace:t,controller:r,action:n}=e.detail.newBody.dataset;document.body.dataset.namespace=t,document.body.dataset.controller=r,document.body.dataset.action=n}));var n=r(35742),o=r(78443),i=class{setScope(e){o.Config.scope=e}},s=r(96540),a=r(40961);const c="ADD_ARTICLES",l="PREPEND_ARTICLES",u="REMOVE_ARTICLE",d="SET_ARTICLES",p="UPDATE_ARTICLE",m="ADD_COMMENTS",h="REMOVE_COMMENT",f="SET_COMMENTS",y="UPDATE_COMMENT",g="PREPEND_USERS";function b(e){return{type:c,articles:e}}function _(e){return{type:d,articles:e}}function v(e,t){return{type:p,article:e,index:t}}function w(e,t){return{type:f,comments:e,articleId:t}}function E(e,t,r){return{type:y,comment:e,articleId:t,index:r}}var S=r(82960),I=r(16535),k=(0,I.Ay)(((e=[],t)=>{switch(t.type){case c:{const r=t.articles.filter((t=>!e.some((e=>e.id===t.id))));return void e.push(...r)}case l:return t.articles.concat(e);case u:return e.filter((e=>e.id!==t.id));case d:return t.articles;case p:e[t.index]=t.article;break;default:return e}})),O=(0,I.Ay)(((e={},t)=>{switch(t.type){case m:void 0===e[t.articleId]&&(e[t.articleId]=[]),e[t.articleId]=e[t.articleId].concat(t.comments);break;case h:if(null==e[t.articleId])return e;e[t.articleId]=e[t.articleId].filter((e=>e.id!==t.id));break;case f:e[t.articleId]=t.comments;break;case y:{const r=t.articleId;let n=t.index;if(!n){const o=e[r].find((e=>e.id===t.comment.id));n=e[r].indexOf(o)}e[r][n]=t.comment;break}default:return e}})),j=(0,I.Ay)(((e=[],t)=>{switch(t.type){case"SET_USERS":return t.users;case g:return t.users.concat(e);default:return e}})),A=(0,S.HY)({articles:k,comments:O,users:j}),T=(0,S.y$)(A);class C extends o.Models.Base{static identity="Article";static resources={url:"/user/articles",paginate:{per:5},main:{url:"/articles",paginate:{per:3}},admin:{url:"/admin/articles",paginate:{per:4}}};static attributes={title:{validations:{presence:!0,length:{within:[3,255]}}},content:{validations:{presence:!0,length:{minimum:100}},remoteName:"text"},createdAt:{type:"Date",remoteName:"created_at"},updatedAt:{type:"Date",remoteName:"updated_at"},commentsCount:{type:"Int",remoteName:"comments_count"},publishedAt:{type:"Date",remoteName:"published_at"},published:{},adminReview:{remoteName:"admin_review"},adminRate:{type:"Int",remoteName:"admin_rate"},categoryId:{type:"Int",remoteName:"category_id"},adminReviewStartedAt:{remoteName:"admin_review_started_at"}};static validate=["vulgarityLevel"];constructor(e){super(e),this.published=null!=this.publishedAt}vulgarityLevel(){(null!=this.title&&/fuck/i.exec(this.title)||null!=this.content&&/fuck/i.exec(this.content))&&this.addErrorMessage("Article contains strong language.",{for:"base"})}setDefaultValuesForAdminReview(){this.adminRate=null==this.adminRate?3:this.adminRate,this.categoryId=null==this.categoryId?6:this.categoryId,this.adminReviewStartedAt=Date.now()}}var M=C;class R extends o.Models.Base{static identity="Article.Comment";static remoteName="Comment";static resources={url:"/user/articles/:articleId/comments",paginate:{per:10},main:{url:"/articles/:articleId/comments",paginate:{per:5,param:"page-num"}},admin:{url:"/admin/articles/:articleId/comments",paginate:{per:5}}};static attributes={author:{validations:{presence:!0}},text:{validations:{presence:!0,vulgarity:!0}},articleId:{type:"Int",validations:{presence:!0},remoteName:"article_id"},createdAt:{type:"Date",remoteName:"created_at"},updatedAt:{type:"Date",remoteName:"updated_at"},emotion:{type:"Int"},pinned:{type:"Boolean"},adminRate:{type:"Int",remoteName:"admin_rate"},approved:{type:"Boolean"}};constructor(e){super(e)}}var N=R,P=r(84223),z=r(5556),q=r.n(z),x=class{constructor(e,t=o.Config.locale){this.date=e,this.skope=o.I18n[t].date}toString(e="default"){const t=this.skope.formats;switch(e){case"default":return this.strftime(t.default);case"short":return this.strftime(t.short);case"long":return this.strftime(t.long);default:console.log("Services.Date#toString: unknown format.")}}strftime(e){e=(e=e.replace("%Y",this.date.getFullYear())).replace("%y",this.date.getFullYear().toString().substr(-2,2));let t=this.date.getMonth()+1;return t=t>=10?t:`0${t}`,(e=(e=(e=(e=(e=(e=e.replace("%m",t)).replace("%b",this.skope.abbr_month_names[this.date.getMonth()])).replace("%B",this.skope.month_names[this.date.getMonth()])).replace("%d",this.date.getDate()>=10?this.date.getDate():`0${this.date.getDate()}`)).replace("%H",this.date.getHours()>=10?this.date.getHours():`0${this.date.getHours()}`)).replace("%M",this.date.getMinutes()>=10?this.date.getMinutes():`0${this.date.getMinutes()}`)).replace("%S",this.date.getSeconds()>=10?this.date.getSeconds():`0${this.date.getSeconds()}`)}};function B({comment:e}){const t=new x(e.createdAt).strftime("%d %b %y");return s.createElement("p",{id:`comment_${e.id}`},s.createElement("b",null,e.author)," on ",s.createElement("i",null,t)," (",s.createElement("a",{href:`/admin/articles/${e.articleId}/comments/${e.id}/edit`},"edit"),")",s.createElement("br",null),e.text)}B.propTypes={comment:q().instanceOf(N).isRequired};var L=B;function D({comments:e}){return 0===e.length?s.createElement("p",null,"No comments"):s.createElement(s.Fragment,null,e.map((e=>s.createElement(L,{comment:e,key:e.id}))))}D.propTypes={comments:q().arrayOf(q().instanceOf(N)).isRequired};var $=D;const H=e=>{document.getElementById("article_author").textContent=e.author,document.getElementById("article_title").textContent=e.title,document.getElementById("article_text").textContent=e.content},F=e=>async function(t){if("updated"===t){const t=await e.reload();H(t)}};var U=r(1228);function W({article:e}){const t=new x(e.publishedAt).toString("short");return s.createElement("article",{id:`article_${e.id}`},s.createElement("h2",null,e.title),s.createElement("p",null,s.createElement("i",null,e.author," wrote this on ",t," /"," ",s.createElement("span",{className:"comments_quantity"},e.commentsCount," comment",1===e.commentsCount?"":"s"))),s.createElement("p",null,e.content),s.createElement("p",null,s.createElement("a",{href:`/admin/articles/${e.id}/edit`},"Review")))}W.propTypes={article:q().instanceOf(M).isRequired};var V=W;function J(e){const[t,r]=(0,s.useState)(e.articles);(0,s.useEffect)((()=>{const e=T.subscribe((()=>r(T.getState().articles)));return()=>{e()}}),[]);const n=t.map((e=>s.createElement(V,{key:e.id,article:e})));return s.createElement(s.Fragment,null,n)}J.propTypes={articles:q().arrayOf(q().instanceOf(M)).isRequired};var G=J;const Y=async()=>{const e=await M.find(n.helpers.params.id);(e=>{(0,P.subscribe)({to:e,with:F(e)}),H(e)})(e),(e=>{e.setDefaultValuesForAdminReview(),new U.UI.Form({id:"edit_article_form",for:e}).render()})(e)};const X=()=>window.location.href="/admin";class Z extends o.Models.Base{static identity="User";static resources={url:"/users",admin:{url:"/admin/users"}};static paginate={per:10};static attributes={email:{validations:{presence:!0,format:{with:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i}}},username:{validations:{presence:!0,format:{with:/^[a-z][a-z0-9_-]*$/i}}},password:{validations:{presence:{on:"create"},confirmation:!0}},passwordConfirmation:{remoteName:"password_confirmation"},confirmed:{},createdAt:{type:"Date",remoteName:"created_at"},updatedAt:{type:"Date",remoteName:"updated_at"}};constructor(e){super(e)}}var K=Z,Q=r(5997);const ee=e=>function(t,r,n={}){let o=t[e];if(n.parentId&&(o=o[n.parentId]),void 0===o)return[null,null];const i=o.find((e=>e.id===r));return i?[i,o.indexOf(i)]:[null,null]},te=ee("articles"),re=ee("comments"),ne=(e,t)=>e.comments[t];function oe({comment:e}){const t=new x(e.createdAt).strftime("%d %b %y");return s.createElement("p",{id:`comment_${e.id}`},s.createElement("b",null,e.author)," on ",s.createElement("i",null,t)," wrote:",s.createElement("br",null),e.text)}oe.propTypes={comment:q().instanceOf(N).isRequired};var ie=oe;function se(e){const t=e.articleId,[r,n]=(0,s.useState)(e.comments);(0,s.useEffect)((()=>{const e=T.subscribe((()=>{n(ne(T.getState(),t))}));return()=>{e()}}),[]);const o=r.map((e=>s.createElement(ie,{key:e.id,comment:e})));return 0===r.length?s.createElement("p",{id:"no_comments"},"No comments."):s.createElement(s.Fragment,null,o)}se.propTypes={articleId:q().number.isRequired,comments:q().arrayOf(q().instanceOf(N)).isRequired};var ae=se;function ce(e){const[t,r]=(0,s.useState)(e.comments);return(0,s.useEffect)((()=>{const t=T.subscribe((()=>{r(ne(T.getState(),e.articleId))}));return()=>{t()}}),[]),s.createElement(s.Fragment,null,`${t.length} comment${1===t.length?"":"s"}`)}ce.propTypes={articleId:q().number.isRequired,comments:q().arrayOf(q().instanceOf(N)).isRequired};var le=ce;const ue=(e,t,r)=>{null!=e[t]&&(r.classList.add(t),document.querySelector(".flash p").textContent=e[t])};var de=(e={})=>{const{hide:t}=e,r=document.querySelector(".flash");(e=>{e.classList.remove("notice"),e.classList.remove("alert"),e.classList.remove("warning")})(r),ue(e,"notice",r),ue(e,"alert",r),ue(e,"warning",r),r.classList.remove("none"),t&&((e=4e3)=>{setTimeout((()=>{document.querySelector(".flash").classList.add("none")}),e)})()};const pe=e=>async function(t){switch(t){case"updating":de({warning:"Author is currently editing article. Be aware of possible changes."});break;case"updated":{const t=await e.reload();me(t,!0)}}},me=(e,t=!1)=>{!1===t&&(0,P.subscribe)({to:e,with:pe(e)}),document.getElementById("title").textContent=e.title,document.getElementById("author").textContent=e.author;const r=new x(e.publishedAt);document.getElementById("pub_date").textContent=r.toString("short");const n=document.getElementById("text");n.innerHTML="";const o=((i=(i=(i=e.content).replace(/\r\n?/,"\n")).trim()).length>0&&(i="<p>"+(i=(i=i.replace(/\n\n+/g,"</p><p>")).replace(/\n/g,"<br>"))+"</p>"),i);var i;n.insertAdjacentHTML("beforeend",o)};var he={renderArticle:me,renderForm:e=>{new U.UI.Form({for:e,initObj:!0,id:"new_comment"}).render()}};function fe(){const[e,t]=(0,s.useState)(1),[r,n]=(0,s.useState)(!1);return r?s.createElement("span",null,"No more posts."):s.createElement("a",{href:"#",id:"load_more",onClick:async function(r){r.preventDefault();const o=e+1;t(o);let i=null;try{i=await M.get("all",{page:o})}catch(r){return void alert(`Invalid URL: ${r}`)}i.resources.length>0?T.dispatch(b(i.resources)):n(!0)}},"Load more…")}function ye({article:e}){const t=new x(e.publishedAt).toString("short");return s.createElement("article",{id:`article_${e.id}`},s.createElement("h2",null,e.title),s.createElement("p",null,s.createElement("i",null,e.author," wrote this on ",t," /"," ",s.createElement("a",{href:`/articles/${e.id}#comments`,className:"comments_quantity"},e.commentsCount," comment",1===e.commentsCount?"":"s"))),s.createElement("p",null,e.content),s.createElement("p",null,s.createElement("a",{href:`/articles/${e.id}`},"Continued…")))}ye.propTypes={article:q().instanceOf(M).isRequired};var ge=ye;function be(e){const[t,r]=(0,s.useState)(e.articles);(0,s.useEffect)((()=>{const e=T.subscribe((()=>r(T.getState().articles)));return()=>{e()}}),[]);const n=t.map((e=>s.createElement(ge,{key:e.id,article:e})));return s.createElement(s.Fragment,null,n)}be.propTypes={articles:q().arrayOf(q().instanceOf(M)).isRequired};var _e=be;const ve=e=>{switch(e){case"confirming":document.getElementById("verification_info").textContent=document.getElementById("verification_progress").textContent;break;case"confirmed":window.location.href="/user/sessions/new?event=confirmed"}},we=e=>{et.getWire().token=e.access_token,(0,P.subscribe)({to:new K({id:e.id}),with:ve}),document.querySelector("form").style.display="none",document.getElementById("sign_in_paragraph").classList.remove("none"),document.getElementById("verification_info").classList.remove("none"),de({notice:e.notice})};class Ee extends i{initialize(){this.setScope("main")}}Ee.Articles=class{async show(){const e=new N({articleId:n.helpers.params.id});he.renderForm(e),(async()=>{const e=await M.find(n.helpers.params.id);T.dispatch(_([e])),he.renderArticle(e)})(),(async()=>{const e=await N.get("count",{articleId:n.helpers.params.id}),t=await N.all({articleId:n.helpers.params.id,total:e.total});T.dispatch(w(t,n.helpers.params.id)),(0,a.render)(s.createElement(ae,{articleId:n.helpers.params.id,comments:t}),document.getElementById("comments")),(0,a.render)(s.createElement(le,{articleId:n.helpers.params.id,comments:t}),document.getElementById("comments_count"))})()}},Ee.Pages=class{async index(){(0,a.render)(s.createElement(fe,null),document.getElementById("load_more_wrapper"));const e=await M.get("all",{page:1});T.dispatch(_(e.resources)),(0,a.render)(s.createElement(_e,{articles:e.resources}),document.getElementById("articles"))}},Ee.Users=class{new(){new U.UI.Form({for:new K,callbackSuccess:we}).render()}};var Se=Ee;class Ie extends o.Models.Base{static identity="Room.Member";static resources={url:"/user/rooms/:roomId/members",paginate:{per:100}};constructor(e){super(e)}}var ke=Ie;class Oe extends o.Models.Base{static identity="Room";constructor(e){super(e)}}var je=Oe;let Ae=[];const Te=({id:e,name:t,members_count:r,joined:n})=>`\n  <tr id="room_${e}">\n    <td>${t}</td>\n    <td class="members">${r}</td>\n    <td>\n      <a\n        rel="nofollow"\n        data-turbo-method="patch"\n        href="${n?`/user/rooms/${e}/leave`:`/user/rooms/${e}/join`}"\n      >\n        ${n?"Leave":"Join"}\n      </a>\n      |\n      <a\n        rel="nofollow"\n        data-turbo-method="delete"\n        data-turbo-confirm="R U sure?"\n        href="/user/rooms/${e}"\n      >\n        Destroy\n      </a>\n    </td>\n  </tr>\n  `,Ce=e=>{document.querySelector("#rooms_list tbody").insertAdjacentHTML("beforeend",Te(e))},Me=(e,t,r)=>{const n=Ae.find((t=>t.id===e));n.members_count+=t,r===(()=>{const e=document.getElementById("current-user-data");return JSON.parse(e.textContent)})().id&&(n.joined=t>0),(e=>{const t=Ae.find((t=>t.id===e));document.getElementById(`room_${e}`).innerHTML=Te(t)})(e)},Re=(e,t)=>{switch(e){case"Room member_joined":Me(t.room_id,1,t.member.id);break;case"Room member_left":Me(t.room_id,-1,t.member.id);break;case"Room created":t.room.members_count=0,Ae.push(t.room),Ce(t.room);break;case"Room destroyed":{const e=document.getElementById(`room_${t.room_id}`);e.parentNode.removeChild(e)}}};const Ne=e=>{if(document.querySelector(`#members li#user_${e.id}`))return;const t=`<li id='user_${e.id}'>${e.username}</li>`;document.getElementById("members").insertAdjacentHTML("beforeend",t)},Pe=e=>function(t,r){switch(t){case"Room member_joined":if(r.room_id!==e)return;Ne(r.member);break;case"Room member_left":if(r.room_id!==e)return;(e=>{const t=document.querySelector(`#members li#user_${e.id}`);t.parentNode.removeChild(t)})(r.member)}};var ze=(e,t)=>{const r=`<p class="msg"><b>${t}</b>: ${e}</p>`;document.getElementById("messages").insertAdjacentHTML("beforeend",r)},qe=class{constructor(){this.callbacks={},this.unsubscribe=null}deinitialize(){null!==this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}index(){this.unsubscribe=function(){let e=document.getElementById("rooms-data");return Ae=JSON.parse(e.textContent),Ae.forEach((e=>Ce(e))),(0,P.subscribe)({to:je,with:Re})}()}async show(){this.callbacks.receivedMessage=ze,this.unsubscribe=(e=>{(e=>{document.querySelector("[data-behavior~=room-speaker]").addEventListener("keypress",(t=>{13===t.keyCode&&(t.preventDefault(),et.emit({type:"NEW_MESSAGE",txt:t.target.value,room_id:e,message_type:document.querySelector("[name='message_type']:checked").value}),t.target.value="")}))})(e);const t=(e=>{const t=setInterval((()=>{et.emit({type:"HEARTBEAT",room_id:e}),console.log("heartbeat",e)}),3e3);return()=>clearInterval(t)})(e),r=(0,P.subscribe)({to:je,with:Pe(e)});return()=>{t(),r()}})(n.helpers.params.id);(e=>{for(const t of e)Ne(t)})((await ke.all({roomId:n.helpers.params.id})).resources)}};const xe=e=>{document.getElementById("article_title").textContent=e.title,document.getElementById("article_text").textContent=e.content;const t=document.getElementById("publish_article");t&&null!=e.publishedAt?t.style.display="none":t&&(t.style.display="")},Be=e=>async function(t){switch(t){case"updated":await e.reload(),e.applyChanges(),xe(e);break;case"destroyed":window.location.href="/user/articles?message=deleted"}};function Le({comment:e,isAdmin:t=!1}){const[r,n]=(0,s.useState)(!1),o=new x(e.createdAt).strftime("%d %b %y"),i=async t=>{t.preventDefault(),n(!0),e.approved=!0,(await e.updateAttribute("approved")).ok&&T.dispatch(E(new N({...e,approved:!0}),e.articleId))};return s.createElement("p",{id:`comment_${e.id}`},s.createElement("b",null,e.author)," on ",s.createElement("i",null,o),t?(()=>{let t;return t=e.approved?s.createElement(s.Fragment,null,s.createElement("span",null,"approved")," |"," "):r?s.createElement(s.Fragment,null,s.createElement("span",null,"approving...")," |"," "):s.createElement(s.Fragment,null,s.createElement("a",{href:`/user/articles/${e.articleId}/comments/${e.id}/approve`,className:"approve",onClick:i},"approve")," ","|"," "),s.createElement(s.Fragment,null," ","(",t,s.createElement("a",{href:`/user/articles/${e.articleId}/comments/${e.id}/edit`},"edit")," ","|"," ",s.createElement("a",{href:`/user/articles/${e.articleId}/comments/${e.id}`,"data-method":"delete","data-confirm":"Are you sure?"},"delete"),")")})():"",s.createElement("br",null),e.text)}Le.propTypes={comment:q().instanceOf(N).isRequired,isAdmin:q().bool};var De=Le;function $e(e){const t=e.articleId,r=e.isAdmin||!1,[n,o]=(0,s.useState)(e.comments);if((0,s.useEffect)((()=>{const e=T.subscribe((()=>o(ne(T.getState(),t))));return()=>{e()}}),[]),0===n.length)return s.createElement("p",null,"No comments.");const i=n.map((e=>s.createElement(De,{key:e.id,comment:e,isAdmin:r})));return s.createElement(s.Fragment,null,i)}$e.propTypes={articleId:q().number.isRequired,isAdmin:q().bool,comments:q().arrayOf(q().instanceOf(N)).isRequired};var He=$e;const Fe=e=>async function(t,r){switch(t){case"updating":document.querySelector("h1").getAttribute("data-mark")!==r.mark&&de({warning:"Uuups someone else started editing this article."});break;case"updated":await e.reload(),(e=>{for(const[t]of Object.entries(e.changes())){const r=document.querySelector(`a.apply_changes[data-for=${e.getAttrRemoteName(t)}]`);r&&r.classList.remove("none")}})(e);break;case"destroyed":window.location.href="/user/articles?message=deleted"}};var Ue=e=>{T.dispatch(b([e]));const t=(0,P.subscribe)({to:e,with:Fe(e)}),r=new U.UI.Form({for:e});return r.render(),(e=>{for(const t of Array.from(document.querySelectorAll("a.apply_changes")))t.addEventListener("click",(t=>{t.preventDefault();const r=e.getObj(),n=r.getAttrName(t.target.getAttribute("data-for"));r[n]=r.changes()[n].is,e.fill(n),t.target.classList.add("none")}))})(r),t};function We({article:e,onArticleDestroyed:t}){return s.createElement("tr",{id:`article_${e.id}`},s.createElement("td",{className:"title"},e.title),s.createElement("td",null,e.content),s.createElement("td",{className:"comments_quantity"},e.commentsCount),s.createElement("td",{className:"published"},e.publishedAt?"yes":"no"),s.createElement("td",null,s.createElement("a",{href:`/user/articles/${e.id}`},"Show")," |",s.createElement("a",{href:`/user/articles/${e.id}/edit`},"Edit")," |",s.createElement("a",{href:`/user/articles/${e.id}`,className:"delete_article",onClick:async r=>{if(r.preventDefault(),!confirm("Are you sure?"))return;const n=await e.delete(null);var o;n.success&&T.dispatch((o=n.id,{type:u,id:o})),t(n)}},"Delete")))}We.propTypes={article:q().instanceOf(M).isRequired,onArticleDestroyed:q().func.isRequired};var Ve=We;function Je(e){const[t,r]=(0,s.useState)(e.articles);(0,s.useEffect)((()=>{const e=T.subscribe((()=>r(T.getState().articles)));return()=>{e()}}),[]);const n=t.map((t=>s.createElement(Ve,{key:t.id,article:t,onArticleDestroyed:e.onArticleDestroyed})));return s.createElement(s.Fragment,null,n)}Je.propTypes={articles:q().arrayOf(q().instanceOf(M)).isRequired,onArticleDestroyed:q().func.isRequired};var Ge=Je;const Ye=e=>{e.success?de({notice:e.notice}):de({alert:e.alert})};class Xe extends i{initialize(){this.setScope(null)}}Xe.Articles=class{initialize(){this.unsubscribe=null}deinitialize(){null!==this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}async index(){"deleted"===n.helpers.params.message&&de({alert:"Article has been deleted."});const e=await M.get("all");T.dispatch(_(e.resources)),(0,a.render)(s.createElement(Ge,{articles:e.resources,onArticleDestroyed:Ye}),document.getElementById("article_list"))}show(){(async()=>{const e=await M.find(n.helpers.params.id);T.dispatch(_([e])),(e=>{null!==e&&((0,P.subscribe)({to:e,with:Be(e)}),(e=>{document.getElementById("publish_article").addEventListener("click",(async t=>{t.preventDefault(),t.target.textContent="Publishing...";try{await e.put("publish"),document.getElementById("publish_article").outerHTML="<span>Published!</span>"}catch(e){document.getElementById("publish_article").textContent="Publish",de({alert:"Connection error!"})}}))})(e),(e=>{const t=document.getElementById("edit_link").getAttribute("href");document.getElementById("edit_link").setAttribute("href",t.replace("/0/",`/${e}/`))})(e.id),xe(e))})(e)})(),(async()=>{const e=await N.all({articleId:n.helpers.params.id});T.dispatch(w(e.resources,n.helpers.params.id)),(0,a.render)(s.createElement(He,{articleId:n.helpers.params.id,comments:e.resources}),document.getElementById("comments"))})()}new(){this.unsubscribe=Ue(new M)}async edit(){(async e=>{const t=await N.all({articleId:e});T.dispatch(w(t.resources,e)),(0,a.render)(s.createElement(He,{articleId:e,comments:t.resources,isAdmin:!0}),document.getElementById("comments"))})(n.helpers.params.id);const e=await M.find(n.helpers.params.id);this.unsubscribe=Ue(e)}},Xe.Rooms=qe;var Ze=Xe;const Ke=({article_id:e},t)=>{const[r,n]=te(T.getState(),e);if(!r)return;const o=new M({...r,commentsCount:r.commentsCount+t});T.dispatch(v(o,n))};(0,P.connectWithModel)(o.connector),M.Comment=N,je.Member=ke;const Qe=(0,P.init)({cable:(0,Q.Be)(),models:{Article:M,Room:je,User:K},notificationCenter:async e=>{switch(e.type){case"PING":lt().namespaceController.constructor===Ze&&alert("Ping!");break;case"NEW_MESSAGE":(lt().namespaceController.constructor!==Ze||lt().controller.constructor!==qe||"show"!==lt().action?()=>{}:lt().controller.callbacks.receivedMessage)(e.message,e.author);break;case"Article created":(async({id:e})=>{if(lt().namespaceController.constructor!==Ze)return;const t=await M.find({id:e,abbr:!0});T.dispatch(b([t]))})(e.payload);break;case"Article published":(async({id:e})=>{if(lt().namespaceController.constructor===st){const t=await M.find({id:e,abbr:!0,resource:"admin"});T.dispatch(function(e){return{type:l,articles:e}}([t]))}else{const t=await M.find({id:e,abbr:!0});T.dispatch(b([t]))}})(e.payload);break;case"Article updated":(async({id:e})=>{const t={id:e,abbr:!0};lt().namespaceController.constructor===st&&(t.resource="admin");let[r,n]=te(T.getState(),e);r&&(r=await M.find(t),T.dispatch(v(r,n)))})(e.payload);break;case"Article.Comment created":(async({article_id:e,id:t})=>{const r={articleId:e,id:t};lt().namespaceController.constructor===Se&&(r.resource="main");const[n]=te(T.getState(),e);if(!n)return;const o=await N.find(r);null!==o&&(T.dispatch(function(e,t){return{type:m,articleId:t,comments:e}}([o],e)),Ke({article_id:e},1))})(e.payload);break;case"Article.Comment destroyed":Ke(e.payload,-1),(({article_id:e,id:t})=>{T.dispatch(function(e,t){return{type:h,id:e,articleId:t}}(t,e))})(e.payload);break;case"Article.Comment updated":(async({article_id:e,id:t})=>{const[r,n]=re(T.getState(),t,{parentId:e});if(!r)return;const o=await r.reload();T.dispatch(E(o,e,n))})(e.payload);break;case"USER_CONFIRMED":window.location.href="/user/sessions/new?event=confirmed";break;case"User created":{const t=await K.find(e.payload.id);T.dispatch(function(e){return{type:g,users:e}}([t]));break}}},notifications:{log:!0,size:10,disconnectedForTooLong:()=>{de({alert:"You have been disconnected from the server for too long. Reload page!",hide:!1})}},postInit:()=>{"test"===document.querySelector("body").getAttribute("data-rails-env")&&Qe.getWire().setPollingTime(1e3)}});var et=Qe;const tt=({user:e})=>s.createElement("tr",{id:`user_${e.id}`},s.createElement("td",null,e.email),s.createElement("td",null,e.username),s.createElement("td",{className:"confirmed"},e.confirmed?"Yes":"No"),s.createElement("td",null,s.createElement("a",{href:`/admin/users/${e.id}`},"Show")," |"," ",s.createElement("a",{href:`/admin/users/${e.id}/edit`},"Edit")," |"," ",s.createElement("a",{href:`/admin/users/${e.id}`,"data-method":"delete","data-confirm":"Are you sure?"},"Delete")," ","|"," ",s.createElement("a",{href:"#",onClick:t=>((e,t)=>{e.preventDefault(),et.emit({type:"PING",user_id:t})})(t,e.id)},"Ping")));tt.propTypes={user:q().instanceOf(K).isRequired};var rt=tt;function nt(e){const[t,r]=(0,s.useState)(e.users);(0,s.useEffect)((()=>{const e=T.subscribe((()=>r(T.getState().users)));return()=>{e()}}),[]);const n=t.map((e=>s.createElement(rt,{key:`user_${e.id}`,user:e})));return s.createElement(s.Fragment,null,n)}nt.propTypes={users:q().arrayOf(q().instanceOf(K)).isRequired};var ot=nt;class it extends i{initialize(){this.setScope("admin")}}it.Articles=class{async published(){const e=await M.get("published");T.dispatch(_(e.resources)),(0,a.render)(s.createElement(G,{articles:e.resources}),document.getElementById("articles"))}async edit(){Y(),(async()=>{(e=>{(0,a.render)(s.createElement($,{comments:e}),document.getElementById("comments"))})((await N.all({articleId:n.helpers.params.id})).resources)})()}},it.Comments=class{edit(){((e={})=>{const t=new U.UI.Form({for:new N({id:e.commentId,resource:"admin"}),id:`edit_comment_${e.commentId}`,initObj:!0});t.render(),window.test={commentFormObj:t.getObj()}})({commentId:n.helpers.params.id})}},it.Sessions=class{new(){new U.UI.Form({id:"sign_in_admin",callbackSuccess:X}).render()}},it.Users=class{async index(){const e=await K.get("all");T.dispatch(function(e){return{type:g,users:e}}(e.resources)),(0,a.render)(s.createElement(ot,{users:e.resources}),document.querySelector("table tbody"))}async show(){(e=>{document.getElementById("user_email").textContent=e.email,document.getElementById("user_username").textContent=e.username,document.getElementById("user_confirmed").textContent=e.confirmed?"Yes":"No",(e=>{const t=document.getElementById("edit_link"),r=t.getAttribute("href");t.setAttribute("href",r.replace("/0/",`/${e.id}/`))})(e)})(await K.find(n.helpers.params.id))}edit(){var e;e=new K({id:n.helpers.params.id}),new U.UI.Form({for:e,initObj:!0,id:"admin_user_form"}).render()}};var st=it;const at={Admin:st,Main:Se,User:Ze};let ct=null;document.addEventListener("turbo:load",(()=>{ct=(0,n.init)(at)})),["turbo:click","turbo:submit-start"].forEach((e=>{document.addEventListener(e,(()=>{null!==ct&&null!=ct.controller.cleanup&&(ct.controller.cleanup(),ct.controller.cleanup=null)}))}));var lt=()=>ct;(0,U.connect)({getLocale:()=>o.Config.locale,loco:et,I18n:o.I18n}),o.Validators.Vulgarity=class extends o.Validators.Base{static identity="Vulgarity";constructor(){super()}validate(){if(null!=this.val)switch(typeof this.val){case"string":{const e=this._getVulgarWord();if(!new RegExp(`${e}`,["i"]).exec(this.val))return;this._addErrorMessage();break}default:throw new TypeError(`Vulgarity validator is applicable only for strings and ${this.attr} isn't.`)}}_addErrorMessage(){const e=o.I18n[o.Config.locale].errors.messages.vulgarity;this.obj.addErrorMessage(e,{for:this.attr})}_getVulgarWord(){switch(o.Config.locale){case"pl":return"kurwa";case"en":return"fuck"}}},o.I18n.pl={variants:{few(e){const t=parseInt((r=String(e))[r.length-1]);var r;-1!==[2,3,4].indexOf(t)&&(2!==String(e).length||String(e)[0])}},models:{},attributes:{},ui:{form:{sending:"Wysyłam...",success:"Sukces",errors:{connection:"Błąd z połączeniem",invalid_data:"Nieprawidłowe dane"}}},date:{formats:{default:"%d-%m-%Y",short:"%d %b",long:"%B %d, %Y"},day_names:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],abbr_day_names:["nie","pon","wto","śro","czw","pią","sob"],month_names:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],abbr_month_names:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru"]},errors:{messages:{accepted:"musi zostać zaakceptowane",blank:"nie może być puste",confirmation:"nie zgadza się z polem %{attribute}",empty:"nie może być puste",equal_to:"musi być równe %{count}",even:"musi być parzyste",exclusion:"jest zarezerwowane",greater_than:"musi być większe od %{count}",greater_than_or_equal_to:"musi być większe lub równe %{count}",inclusion:"nie znajduje się na liście dopuszczalnych wartości",invalid:"jest nieprawidłowe",less_than:"musi być mniejsze od %{count}",less_than_or_equal_to:"musi być mniejsze lub równe %{count}",not_a_number:"nie jest liczbą",not_an_integer:"musi być liczbą całkowitą",odd:"musi być nieparzyste",present:"musi być puste",too_long:{few:"jest za długie (maksymalnie %{count} znaki)",many:"jest za długie (maksymalnie %{count} znaków)",one:"jest za długie (maksymalnie jeden znak)",other:"jest za długie (maksymalnie %{count} znaków)"},too_short:{few:"jest za krótkie (przynajmniej %{count} znaki)",many:"jest za krótkie (przynajmniej %{count} znaków)",one:"jest za krótkie (przynajmniej jeden znak)",other:"jest za krótkie (przynajmniej %{count} znaków)"},wrong_length:{few:"ma nieprawidłową długość (powinna wynosić %{count} znaki)",many:"ma nieprawidłową długość (powinna wynosić %{count} znaków)",one:"ma nieprawidłową długość (powinna wynosić jeden znak)",other:"ma nieprawidłową długość (powinna wynosić %{count} znaków)"},other_than:"musi być inna niż %{count}"}}},o.I18n.pl.models.User="Użytkownik",o.I18n.pl.attributes.User={password:"Hasło",passwordConfirmation:"Powtórz hasło"},o.I18n.en.errors.messages.vulgarity="contains strong language.",o.I18n.pl.errors.messages.vulgarity="zawiera mocny język.",o.I18n.en.date={formats:{default:"%Y-%m-%d",short:"%b %d",long:"%B %d, %Y"},day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},window.test={getLine:()=>et.getLine(),getWire:()=>et.getWire()}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e].call(i.exports,i,i.exports,n),i.exports}n.m=t,e=[],n.O=function(t,r,o,i){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],i=e[u][2];for(var a=!0,c=0;c<r.length;c++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(a=!1,i<s&&(s=i));if(a){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.e=function(){return Promise.resolve()},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={543:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,i,s=r[0],a=r[1],c=r[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(c)var u=c(n)}for(t&&t(r);l<s.length;l++)i=s[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var o=n.O(void 0,[121],(function(){return n(64557)}));o=n.O(o)}();
//# sourceMappingURL=application.js.map