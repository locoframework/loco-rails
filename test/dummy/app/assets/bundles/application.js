!function(e){function t(t){for(var r,a,c=t[0],u=t[1],l=t[2],f=0,p=[];f<c.length;f++)a=c[f],o[a]&&p.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(s&&s(t);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var s=u;i.push([129,1]),n()}({129:function(e,t,n){"use strict";n.r(t);n(96),n(97);var r=n(93);n.n(r).a.start();var o=n(1),i=n(94),a=n.n(i),c=(n(5),n(6),n(7),n(4),n(31),n(15),n(16),n(3),n(8),n(9),{}.hasOwnProperty),u=function(e){function t(e){var n,r,o,i;null==e&&(e={}),t.__super__.constructor.call(this,e),this.notice=null!=(n=e.notice)?n:null,this.alert=null!=(r=e.alert)?r:null,this.warning=null!=(o=e.warning)?o:null,this.hide=null==(i=e.hide)||i}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Views"].Base),t.prototype.setNotice=function(e){return this.notice=e},t.prototype.setAlert=function(e){return this.alert=e},t.prototype.setWarning=function(e){return this.warning=e},t.prototype.render=function(){var e;if((e=document.querySelector(".flash")).classList.remove("notice"),e.classList.remove("alert"),e.classList.remove("warning"),null!=this.notice?(e.classList.add("notice"),document.querySelector(".flash p").textContent=this.notice):null!=this.alert?(e.classList.add("alert"),document.querySelector(".flash p").textContent=this.alert):null!=this.warning&&(e.classList.add("warning"),document.querySelector(".flash p").textContent=this.warning),e.classList.remove("none"),this.hide)return this.hideAfterTime()},t.prototype.hideAfterTime=function(e){return null==e&&(e=4e3),setTimeout(function(){return document.querySelector(".flash").classList.add("none")},e)},t}(),l=function(){function e(){}return e.prototype.disconnectedForTooLong=function(e){return"You have been disconnected from the server for too long. Reload page!",new u({alert:"You have been disconnected from the server for too long. Reload page!",hide:!1}).render()},e}(),s=n(0),f=n.n(s),p=n(11),d=n(17);n(22),n(38),n(32),n(39),n(24);function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n(33),n(90),n(54),n(55),n(56);function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){b(e,t,n[t])})}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=Object(d.a)({articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLES":return[].concat(y(e),y(t.payload.articles));case"REMOVE_ARTICLE":return e.filter(function(e){return e.id!==t.payload.id});case"SET_ARTICLES":return y(t.payload.articles);case"UPDATE_ARTICLE":return[].concat(y(e.slice(0,t.payload.index)),[t.payload.article],y(e.slice(t.payload.index+1)));default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENTS":return h({},e,b({},t.payload.articleId,[].concat(m(e[t.payload.articleId]),m(t.payload.comments))));case"REMOVE_COMMENT":return null==e[t.payload.articleId]?e:h({},e,b({},t.payload.articleId,e[t.payload.articleId].filter(function(e){return e.id!==t.payload.id})));case"SET_COMMENTS":return b({},t.payload.articleId,t.payload.comments);case"UPDATE_COMMENT":var n=t.payload.articleId,r=t.payload.index;if(!r){var o=e[n].find(function(e){return e.id===t.payload.comment.id});r=e[n].indexOf(o)}return h({},e,b({},n,[].concat(m(e[n].slice(0,r)),[t.payload.comment],m(e[n].slice(r+1)))));default:return e}}}),_=Object(d.b)(v,{articles:[],comments:{}}),g={}.hasOwnProperty,w=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)g.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Views"].Base),t}(),E={}.hasOwnProperty,O=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.call(this,e),this.article=null}return function(e,t){for(var n in t)E.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Views"].Base),t.prototype.renderArticle=function(e){var t;return null==e&&(e=null),null==this.article&&(this.connectWith(e,{receiver:"articleReceivedSignal"}),this.article=e),document.getElementById("article_title").textContent=this.article.title,document.getElementById("article_text").textContent=this.article.content,(t=document.getElementById("publish_article"))&&null!=this.article.publishedAt?t.style.display="none":t&&(t.style.display=""),this._handlePublishing(),this._updateEditLink()},t.prototype.articleReceivedSignal=function(e,t){switch(e){case"updated":return this.article.reload().then((n=this,function(){return n.article.applyChanges(),n.renderArticle()}));case"destroyed":return window.location.href="/user/articles?message=deleted"}var n},t.prototype._handlePublishing=function(){return document.getElementById("publish_article").addEventListener("click",(e=this,function(t){return t.preventDefault(),t.target.textContent="Publishing...",e.article.put("publish").then(function(e){return document.getElementById("publish_article").outerHTML="<span>Published!</span>"}).catch(function(e){return t.target.textContent="Publish",new u({alert:"Connection error!"}).render()})}));var e},t.prototype._updateEditLink=function(){var e;return e=document.getElementById("edit_link").getAttribute("href"),document.getElementById("edit_link").setAttribute("href",e.replace("/0/","/"+this.article.id+"/"))},t}(),S={}.hasOwnProperty,j=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)S.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Models"].Base),t.identity="Article.Comment",t.remoteName="Comment",t.resources={url:"/user/articles/:articleId/comments",paginate:{per:10},main:{url:"/articles/:articleId/comments",paginate:{per:5,param:"page-num"}},admin:{url:"/admin/articles/:articleId/comments",paginate:{per:5}}},t.attributes={author:{validations:{presence:!0}},text:{validations:{presence:!0,vulgarity:!0}},articleId:{type:"Int",validations:{presence:!0},remoteName:"article_id"},createdAt:{type:"Date",remoteName:"created_at"},updatedAt:{type:"Date",remoteName:"updated_at"},emotion:{type:"Int"},pinned:{type:"Boolean"},adminRate:{type:"Int",remoteName:"admin_rate"},approved:{type:"Boolean"}},t.receivedSignal=function(e,t){},t.prototype.receivedSignal=function(e,t){},t}(),A=(n(28),n(2)),I=n.n(A),P=function(e,t){return e.comments[t]};function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){T(e,t,n[t])})}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function R(e){var t,n=e.comment,r=e.isAdmin,i=void 0!==r&&r,a=k(Object(s.useState)(!1),2),c=a[0],u=a[1],l=new o.Services.Date(n.createdAt).strftime("%d %b %y"),p=function(e){e.preventDefault(),u(!0),n.approved=!0,n.updateAttribute("approved").then(function(e){e.ok&&_.dispatch({type:"UPDATE_COMMENT",payload:{articleId:n.articleId,comment:new j(C({},n,{approved:!0}))}})})};return f.a.createElement("p",{id:"comment_".concat(n.id)},f.a.createElement("b",null,n.author)," on ",f.a.createElement("i",null,l),i?(t=n.approved?f.a.createElement(f.a.Fragment,null,f.a.createElement("span",null,"approved")," |"," "):c?f.a.createElement(f.a.Fragment,null,f.a.createElement("span",null,"approving...")," |"," "):f.a.createElement(f.a.Fragment,null,f.a.createElement("a",{href:"/user/articles/".concat(n.articleId,"/comments/").concat(n.id,"/approve"),className:"approve",onClick:p},"approve")," ","|"," "),f.a.createElement(f.a.Fragment,null," ","(",t,f.a.createElement("a",{href:"/user/articles/".concat(n.articleId,"/comments/").concat(n.id,"/edit")},"edit")," ","|"," ",f.a.createElement("a",{href:"/user/articles/".concat(n.articleId,"/comments/").concat(n.id),"data-method":"delete","data-confirm":"Are you sure?"},"delete"),")")):"",f.a.createElement("br",null),n.text)}R.propTypes={comment:I.a.instanceOf(j).isRequired,isAdmin:I.a.bool};var x=R;function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D(e){var t=e.articleId,n=e.isAdmin||!1,r=B(Object(s.useState)(e.comments),2),o=r[0],i=r[1];if(Object(s.useEffect)(function(){var e=_.subscribe(function(){return i(P(_.getState(),t))});return function(){e()}}),0===o.length)return f.a.createElement("p",null,"No comments.");var a=o.map(function(e){return f.a.createElement(x,{key:e.id,comment:e,isAdmin:n})});return f.a.createElement(f.a.Fragment,null,a)}D.propTypes={articleId:I.a.number.isRequired,isAdmin:I.a.bool,comments:I.a.arrayOf(I.a.instanceOf(j)).isRequired};var z=D,M={}.hasOwnProperty,N=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.call(this,e),this.article=null,this.form=null,this.changes=null}return function(e,t){for(var n in t)M.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Views"].Base),t.prototype.render=function(e){return _.dispatch({type:"ADD_ARTICLES",payload:{articles:[e]}}),this.article=e,this.connectWith(this.article),this._handleApplyingChanges(),this.form=new o.UI.Form({for:this.article}),this.form.render()},t.prototype.renderComments=function(e){return j.all({articleId:e}).then(function(t){return _.dispatch({type:"SET_COMMENTS",payload:{articleId:e,comments:t.resources}}),Object(p.render)(f.a.createElement(z,{articleId:e,comments:t.resources,isAdmin:!0}),document.getElementById("comments"))})},t.prototype.receivedSignal=function(e,t){var n;switch(e){case"updating":if(document.querySelector("h1").getAttribute("data-mark")!==t.mark)return new u({warning:"Uuups someone else started editing this article."}).render();break;case"updated":return this.article.reload().then((n=this,function(){return n.changes=n.article.changes(),n._displayChanges()}));case"destroyed":return window.location.href="/user/articles?message=deleted"}},t.prototype._displayChanges=function(){var e,t,n,r;for(e in n=[],t=this.changes)t[e],(r=document.querySelector("a.apply_changes[data-for="+this.article.getAttrRemoteName(e)+"]"))&&n.push(r.classList.remove("none"));return n},t.prototype._handleApplyingChanges=function(){var e,t,n,r,o;for(r=[],e=0,t=(n=document.querySelectorAll("a.apply_changes")).length;e<t;e++)o=n[e],r.push(o.addEventListener("click",function(e){return function(t){var n;return t.preventDefault(),n=e.article.getAttrName(t.target.getAttribute("data-for")),e.article[n]=e.changes[n].is,e.form.fill(n),t.target.classList.add("none")}}(this)));return r},t}(),L={}.hasOwnProperty,q=function(e){function t(e){t.__super__.constructor.call(this,e),this.published=null!=this.publishedAt}return function(e,t){for(var n in t)L.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Models"].Base),t.identity="Article",t.resources={url:"/user/articles",paginate:{per:5},main:{url:"/articles",paginate:{per:3}},admin:{url:"/admin/articles",paginate:{per:4}}},t.attributes={title:{validations:{presence:!0,length:{within:[3,255]}}},content:{validations:{presence:!0,length:{minimum:100}},remoteName:"text"},createdAt:{type:"Date",remoteName:"created_at"},updatedAt:{type:"Date",remoteName:"updated_at"},commentsCount:{type:"Int",remoteName:"comments_count"},publishedAt:{type:"Date",remoteName:"published_at"},published:{},adminReview:{remoteName:"admin_review"},adminRate:{type:"Int",remoteName:"admin_rate"},categoryId:{type:"Int",remoteName:"category_id"},adminReviewStartedAt:{remoteName:"admin_review_started_at"}},t.receivedSignal=function(e,t){},t.validate=["vulgarityLevel"],t.prototype.receivedSignal=function(e,t){},t.prototype.vulgarityLevel=function(){if(null!=this.title&&/fuck/i.exec(this.title)||null!=this.content&&/fuck/i.exec(this.content))return this.addErrorMessage("Article contains strong language.",{for:"base"})},t.prototype.setDefaultValuesForAdminReview=function(){return null==this.adminRate&&(this.adminRate=3),null==this.categoryId&&(this.categoryId=6),this.adminReviewStartedAt=Date.now()},t}();function U(e){var t=e.article,n=e.onArticleDestroyed;return f.a.createElement("tr",{id:"article_".concat(t.id)},f.a.createElement("td",null,t.title),f.a.createElement("td",null,t.content),f.a.createElement("td",{className:"comments_quantity"},t.commentsCount),f.a.createElement("td",{className:"published"},t.publishedAt?"yes":"no"),f.a.createElement("td",null,f.a.createElement("a",{href:"/user/articles/".concat(t.id)},"Show")," |",f.a.createElement("a",{href:"/user/articles/".concat(t.id,"/edit")},"Edit")," |",f.a.createElement("a",{href:"/user/articles/".concat(t.id),className:"delete_article",onClick:function(e){e.preventDefault(),confirm("Are you sure?")&&t.delete(null).then(function(e){e.success&&_.dispatch({type:"REMOVE_ARTICLE",payload:{id:e.id}}),n(e)})}},"Delete")))}U.propTypes={article:I.a.instanceOf(q).isRequired,onArticleDestroyed:I.a.func.isRequired};var V=U;function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function W(e){var t=F(Object(s.useState)(e.articles),2),n=t[0],r=t[1];Object(s.useEffect)(function(){var e=_.subscribe(function(){return r(_.getState().articles)});return function(){e()}});var o=n.map(function(t){return f.a.createElement(V,{key:t.id,article:t,onArticleDestroyed:e.onArticleDestroyed})});return f.a.createElement(f.a.Fragment,null,o)}W.propTypes={articles:I.a.arrayOf(I.a.instanceOf(q)).isRequired,onArticleDestroyed:I.a.func.isRequired};var H=W,J={}.hasOwnProperty,Y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)J.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Controllers"].Base),t.prototype.initialize=function(){return this.layout=new w},t.prototype.onArticleDestroyed=function(e){var t;return t=new u,e.success?t.setNotice(e.notice):t.setAlert(e.alert),t.render()},t.prototype.index=function(){var e;return"deleted"===this.params.message&&new u({alert:"Article has been deleted."}).render(),q.get("all").then((e=this,function(t){return _.dispatch({type:"SET_ARTICLES",payload:{articles:t.resources}}),Object(p.render)(f.a.createElement(H,{articles:t.resources,onArticleDestroyed:e.onArticleDestroyed}),document.getElementById("article_list"))}))},t.prototype.show=function(){var e;return this.showView=new O,q.find(this.params.id).then((e=this,function(t){return _.dispatch({type:"SET_ARTICLES",payload:{articles:[t]}}),e.showView.renderArticle(t)})),j.all({articleId:this.params.id}).then(function(e){return function(t){return _.dispatch({type:"SET_COMMENTS",payload:{articleId:e.params.id,comments:t.resources}}),Object(p.render)(f.a.createElement(z,{articleId:e.params.id,comments:t.resources}),document.getElementById("comments"))}}(this))},t.prototype.new=function(){return(new N).render(new q)},t.prototype.edit=function(){var e;return e=new N,q.find(this.params.id).then(function(t){return e.render(t)}),e.renderComments(this.params.id)},t}(),$={}.hasOwnProperty,G=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)$.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Models"].Base),t.identity="Room.Member",t.resources={url:"/user/rooms/:roomId/members",paginate:{per:100}},t.attributes={},t.receivedSignal=function(e,t){},t.validate=[],t.prototype.receivedSignal=function(e,t){},t}(),K={}.hasOwnProperty,Q=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)K.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Models"].Base),t.identity="Room",t.resources={},t.attributes={},t.receivedSignal=function(e,t){},t.validate=[],t.prototype.receivedSignal=function(e,t){},t}(),X={}.hasOwnProperty,Z=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)X.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Views"].Base),t.prototype.render=function(){return this.connectWith(Q)},t.prototype.receivedSignal=function(e,t){var n,r;switch(e){case"Room member_joined":return this._memberJoined(t.room_id);case"Room member_left":return this._memberLeft(t.room_id);case"Room created":return n=this._renderRoom(t.room),document.getElementById("rooms_list").insertAdjacentHTML("beforeend",n);case"Room destroyed":return(r=document.getElementById("room_"+t.room_id)).parentNode.removeChild(r)}},t.prototype._memberJoined=function(e){var t;return(t=this._membersNode(e)).textContent=parseInt(t.text())+1},t.prototype._memberLeft=function(e){var t;return(t=this._membersNode(e)).textContent=parseInt(t.text())-1},t.prototype._membersNode=function(e){return document.querySelector("#room_"+e+" td.members")},t.prototype._renderRoom=function(e){return"<tr id='room_"+e.id+"'> <td>"+e.name+"</td> <td class='members'>0</td> <td> <a rel='nofollow' data-method='patch' href='/user/rooms/"+e.id+"/join'>Join</a> | <a data-confirm='R U sure?' rel='nofollow' data-method='delete' href='/user/rooms/"+e.id+"'>Destroy</a> </td> </tr>"},t}(),ee={}.hasOwnProperty,te=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.call(this,e),this.roomId=e.id}return function(e,t){for(var n in t)ee.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Views"].Base),t.prototype.render=function(){return this.connectWith(Q),this._handleSendingMessage()},t.prototype.renderMembers=function(e){var t,n,r,o;for(o=[],t=0,n=e.length;t<n;t++)r=e[t],o.push(this._memberJoined(r));return o},t.prototype.receivedMessage=function(e,t){var n;return n="<p><b>"+t+"</b>: "+e+"</p>",document.getElementById("messages").insertAdjacentHTML("beforeend",n)},t.prototype.receivedSignal=function(e,t){switch(e){case"Room member_joined":if(t.room_id!==this.roomId)return;return this._memberJoined(t.member);case"Room member_left":if(t.room_id!==this.roomId)return;return this._memberLeft(t.member)}},t.prototype._handleSendingMessage=function(){return document.querySelector("[data-behavior~=room-speaker]").addEventListener("keypress",(e=this,function(t){if(13===t.keyCode)return t.preventDefault(),o.Env.loco.emit({signal:"message",txt:t.target.value,room_id:e.roomId}),t.target.value=""}));var e},t.prototype._memberJoined=function(e){var t;return t="<li id='user_"+e.id+"'>"+e.username+"</li>",document.getElementById("members").insertAdjacentHTML("beforeend",t)},t.prototype._memberLeft=function(e){var t;return(t=document.querySelector("#members li#user_"+e.id)).parentNode.removeChild(t)},t}(),ne={}.hasOwnProperty,re=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)ne.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Controllers"].Base),t.prototype.initialize=function(){},t.prototype.index=function(){return(new Z).render()},t.prototype.show=function(){var e;return e=new te({id:this.params.id}),this.setView("show",e),e.render(),G.all({roomId:this.params.id}).then(function(t){return e.renderMembers(t.resources)})},t}();function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ie(this,ae(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,Object(o["Mix"])(o["Controllers"].Base,l)),t}();Object.assign(ue,{Articles:Y,Rooms:re});var le=ue,se=function(){function e(){}return e.prototype.receivedSignal=function(e){switch(e.signal){case"ping":return this._pingSignal();case"message":return this._messageSignal(e)}},e.prototype._pingSignal=function(){if(o.Env.namespaceController.constructor===le)return alert("Ping!")},e.prototype._messageSignal=function(e){var t;if(t=this._getRoomView())return t.receivedMessage(e.message,e.author)},e.prototype._getRoomView=function(){return o.Env.namespaceController.constructor===le&&(o.Env.controller.constructor===re&&("show"===o.Env.action&&o.Env.controller.getView("show")))},e}();function fe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var de=Object(d.a)({articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PREPEND_ARTICLE":return[].concat(fe(t.payload.articles),fe(e));case"SET_ARTICLES":return fe(t.payload.articles);case"UPDATE_ARTICLE":return[].concat(fe(e.slice(0,t.payload.index)),[t.payload.article],fe(e.slice(t.payload.index+1)));default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPEND_USER":return[].concat(pe(e),pe(t.payload.users));case"SET_USERS":return pe(t.payload.users);case"PREPEND_USER":return[].concat(pe(t.payload.users),pe(e));default:return e}}}),ye=Object(d.b)(de,{users:[],articles:[]});function me(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function he(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ve(e,t,n[t])})}return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=Object(d.a)({articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLES":return[].concat(me(e),me(t.payload.articles));case"SET_ARTICLES":return me(t.payload.articles);case"UPDATE_ARTICLE":return[].concat(me(e.slice(0,t.payload.index)),[t.payload.article],me(e.slice(t.payload.index+1)));default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENTS":return be({},e,ve({},t.payload.articleId,[].concat(he(e[t.payload.articleId]),he(t.payload.comments))));case"REMOVE_COMMENT":return null==e[t.payload.articleId]?e:be({},e,ve({},t.payload.articleId,e[t.payload.articleId].filter(function(e){return e.id!==t.payload.id})));case"SET_COMMENTS":return ve({},t.payload.articleId,t.payload.comments);case"UPDATE_COMMENT":var n=t.payload.articleId;return be({},e,ve({},n,[].concat(he(e[n].slice(0,t.payload.index)),[t.payload.comment],he(e[n].slice(t.payload.index+1)))));default:return e}}}),ge=Object(d.b)(_e,{articles:[],comments:{}}),we=function(e){return function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t[e];r.parentId&&(o=o[r.parentId]);var i=o.find(function(e){return e.id===n});return i?[i,o.indexOf(i)]:[null,null]}},Ee=we("articles"),Oe=we("comments"),Se={}.hasOwnProperty,je=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)Se.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Models"].Base),t.identity="User",t.resources={url:"/users",admin:{url:"/admin/users"}},t.paginate={per:10},t.attributes={email:{validations:{presence:!0,format:{with:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i}}},username:{validations:{presence:!0,format:{with:/^[a-z][a-z0-9_\-]*$/i}}},password:{validations:{presence:{on:"create"},confirmation:!0}},passwordConfirmation:{remoteName:"password_confirmation"},confirmed:{},createdAt:{type:"Date",remoteName:"created_at"},updatedAt:{type:"Date",remoteName:"updated_at"}},t.receivedSignal=function(e,t){return console.log("User.receivedSignal: "+e)},t.prototype.receivedSignal=function(e,t){return console.log("User#receivedSignal: "+e)},t}();function Ae(e){var t=e.comment,n=new o.Services.Date(t.createdAt).strftime("%d %b %y");return f.a.createElement("p",{id:"comment_".concat(t.id)},f.a.createElement("b",null,t.author)," on ",f.a.createElement("i",null,n)," (",f.a.createElement("a",{href:"/admin/articles/".concat(t.articleId,"/comments/").concat(t.id,"/edit")},"edit"),")",f.a.createElement("br",null),t.text)}Ae.propTypes={comment:I.a.instanceOf(j).isRequired};var Ie=Ae;function Pe(e){var t=e.comments;return 0===t.length?f.a.createElement("p",null,"No comments"):f.a.createElement(f.a.Fragment,null,t.map(function(e){return f.a.createElement(Ie,{comment:e,key:e.id})}))}Pe.propTypes={comments:I.a.arrayOf(I.a.instanceOf(j)).isRequired};var Ce=Pe;function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Re(this,xe(t).call(this,n))).article=null,e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,o["Views"].Base),n=t,(r=[{key:"receivedSignal",value:function(e){var t=this;switch(e){case"updated":this.article.reload().then(function(){t.article.applyChanges(),t._renderArticle()})}}},{key:"render",value:function(e){this.article=e,this.connectWith(e),this._renderArticle()}},{key:"renderComments",value:function(e){Object(p.render)(f.a.createElement(Ce,{comments:e}),document.getElementById("comments"))}},{key:"_renderArticle",value:function(){document.getElementById("article_author").textContent=this.article.author,document.getElementById("article_title").textContent=this.article.title,document.getElementById("article_text").textContent=this.article.content}}])&&ke(n.prototype,r),i&&ke(n,i),t}();function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ne(this,Le(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,o["Views"].Base),n=t,(r=[{key:"render",value:function(e){e.setDefaultValuesForAdminReview(),new o.UI.Form({id:"edit_article_form",for:e}).render()}}])&&Me(n.prototype,r),i&&Me(n,i),t}();function Ve(e){var t=e.article,n=new o.Services.Date(t.publishedAt).toString("short");return f.a.createElement("article",{id:"article_".concat(t.id)},f.a.createElement("h2",null,t.title),f.a.createElement("p",null,f.a.createElement("i",null,t.author," wrote this on ",n," /"," ",f.a.createElement("span",{className:"comments_quantity"},t.commentsCount," comment",1===t.commentsCount?"":"s"))),f.a.createElement("p",null,t.content),f.a.createElement("p",null,f.a.createElement("a",{href:"/admin/articles/".concat(t.id,"/edit")},"Review")))}Ve.propTypes={article:I.a.instanceOf(q).isRequired};var Fe=Ve;function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function He(e){var t=We(Object(s.useState)(e.articles),2),n=t[0],r=t[1];Object(s.useEffect)(function(){var e=ye.subscribe(function(){return r(ye.getState().articles)});return function(){e()}});var o=n.map(function(e){return f.a.createElement(Fe,{key:e.id,article:e})});return f.a.createElement(f.a.Fragment,null,o)}He.propTypes={articles:I.a.arrayOf(I.a.instanceOf(q)).isRequired};var Je=He;function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ge(this,Ke(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,o["Controllers"].Base),n=t,(r=[{key:"published",value:function(){q.get("published").then(function(e){ye.dispatch({type:"SET_ARTICLES",payload:{articles:e.resources}}),Object(p.render)(f.a.createElement(Je,{articles:e.resources}),document.getElementById("articles"))})}},{key:"edit",value:function(){var e=new De;q.find(this.params.id).then(function(t){e.render(t),(new Ue).render(t)}),j.all({articleId:this.params.id}).then(function(t){e.renderComments(t.resources)})}}])&&$e(n.prototype,r),i&&$e(n,i),t}();function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ot=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tt(this,nt(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,o["Views"].Base),n=t,(r=[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new o.UI.Form({for:new j({id:e.commentId,resource:"admin"}),id:"edit_comment_".concat(e.commentId),initObj:!0});t.render(),o.Env.test={commentFormObj:t.getObj()}}}])&&et(n.prototype,r),i&&et(n,i),t}();function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var st=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ct(this,ut(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(t,o["Controllers"].Base),n=t,(r=[{key:"edit",value:function(){(new ot).render({commentId:this.params.id})}}])&&at(n.prototype,r),i&&at(n,i),t}(),ft={}.hasOwnProperty,pt=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)ft.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Views"].Base),t.prototype.render=function(){return new o.UI.Form({id:"sign_in_admin",delegator:this,callbackSuccess:"_signedIn"}).render()},t.prototype._signedIn=function(){return window.location.href="/admin"},t}(),dt={}.hasOwnProperty,yt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)dt.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Controllers"].Base),t.prototype.new=function(){return(new pt).render()},t}(),mt=function(e){var t=e.user;return f.a.createElement("tr",{id:"user_".concat(t.id)},f.a.createElement("td",null,t.email),f.a.createElement("td",null,t.username),f.a.createElement("td",{className:"confirmed"},t.confirmed?"Yes":"No"),f.a.createElement("td",null,f.a.createElement("a",{href:"/admin/users/".concat(t.id)},"Show")," |"," ",f.a.createElement("a",{href:"/admin/users/".concat(t.id,"/edit")},"Edit")," |"," ",f.a.createElement("a",{href:"/admin/users/".concat(t.id),"data-method":"delete","data-confirm":"Are you sure?"},"Delete")," ","|"," ",f.a.createElement("a",{href:"#",onClick:function(e){return function(e,t){e.preventDefault(),o.Env.loco.emit({signal:"ping",user_id:t})}(e,t.id)}},"Ping")))};mt.propTypes={user:I.a.instanceOf(je).isRequired};var ht=mt;function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function vt(e){var t=bt(Object(s.useState)(e.users),2),n=t[0],r=t[1];Object(s.useEffect)(function(){var e=ye.subscribe(function(){return r(ye.getState().users)});return function(){e()}});var o=n.map(function(e){return f.a.createElement(ht,{key:"user_".concat(e.id),user:e})});return f.a.createElement(f.a.Fragment,null,o)}vt.propTypes={users:I.a.arrayOf(I.a.instanceOf(je)).isRequired};var _t=vt;n(125);function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Et(this,Ot(t).call(this,n))).user=n.user,e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(t,o["Views"].Base),n=t,(r=[{key:"render",value:function(){document.getElementById("user_email").textContent=this.user.email,document.getElementById("user_username").textContent=this.user.username,document.getElementById("user_confirmed").textContent=this.user.confirmed?"Yes":"No",this._updateEditLink()}},{key:"_updateEditLink",value:function(){var e=document.getElementById("edit_link"),t=e.getAttribute("href");e.setAttribute("href",t.replace("/0/","/#{@user.id}/"))}}])&&wt(n.prototype,r),i&&wt(n,i),t}();function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Pt(this,Ct(t).call(this,n))).user=n.user,e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(t,o["Views"].Base),n=t,(r=[{key:"render",value:function(){new o.UI.Form({for:this.user,initObj:!0,id:"admin_user_form"}).render()}}])&&It(n.prototype,r),i&&It(n,i),t}();function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zt(e,t){return(zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bt(this,Dt(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(t,o["Controllers"].Base),n=t,(r=[{key:"index",value:function(){je.get("all").then(function(e){ye.dispatch({type:"SET_USERS",payload:{users:e.resources}}),Object(p.render)(f.a.createElement(_t,{users:e.resources}),document.querySelector("table tbody"))})}},{key:"show",value:function(){je.find(this.params.id).then(function(e){return new jt({user:e}).render()})}},{key:"edit",value:function(){new kt({user:new je({id:this.params.id})}).render()}}])&&xt(n.prototype,r),i&&xt(n,i),t}();function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qt(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ft=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qt(this,Ut(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(t,Object(o["Mix"])(o["Controllers"].Base,l)),n=t,(r=[{key:"initialize",value:function(){this.setScope("admin")}}])&&Lt(n.prototype,r),i&&Lt(n,i),t}();Object.assign(Ft,{Articles:Xe,Comments:st,Sessions:yt,Users:Mt});var Wt=Ft;function Ht(e){var t=e.comment,n=new o.Services.Date(t.createdAt).strftime("%d %b %y");return f.a.createElement("p",{id:"comment_".concat(t.id)},f.a.createElement("b",null,t.author)," on ",f.a.createElement("i",null,n)," wrote:",f.a.createElement("br",null),t.text)}Ht.propTypes={comment:I.a.instanceOf(j).isRequired};var Jt=Ht;function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $t(e){var t=e.articleId,n=Yt(Object(s.useState)(e.comments),2),r=n[0],o=n[1];Object(s.useEffect)(function(){var e=ge.subscribe(function(){o(P(ge.getState(),t))});return function(){e()}});var i=r.map(function(e){return f.a.createElement(Jt,{key:e.id,comment:e})});return 0===r.length?f.a.createElement("p",{id:"no_comments"},"No comments."):f.a.createElement(f.a.Fragment,null,i)}$t.propTypes={articleId:I.a.number.isRequired,comments:I.a.arrayOf(I.a.instanceOf(j)).isRequired};var Gt=$t;function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Qt(e){var t=Kt(Object(s.useState)(e.comments),2),n=t[0],r=t[1];return Object(s.useEffect)(function(){var t=ge.subscribe(function(){r(P(ge.getState(),e.articleId))});return function(){t()}}),f.a.createElement(f.a.Fragment,null,"".concat(n.length," comment").concat(1===n.length?"":"s"))}Qt.propTypes={articleId:I.a.number.isRequired,comments:I.a.arrayOf(I.a.instanceOf(j)).isRequired};var Xt=Qt;function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var on=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=tn(this,nn(t).call(this,n))).article=null,e.newComment=n.comment,e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(t,o["Views"].Base),n=t,(r=[{key:"render",value:function(){new o.UI.Form({for:this.newComment,initObj:!0,id:"new_comment"}).render()}},{key:"renderArticle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.article||(this.article=e,this.connectWith(this.article,{receiver:"_articleReceivedSignal"})),document.getElementById("title").textContent=this.article.title,document.getElementById("author").textContent=this.article.author;var t=new o.Services.Date(this.article.publishedAt);document.getElementById("pub_date").textContent=t.toString("short");var n=document.getElementById("text");n.innerHTML="";var r=(new o.Helpers.Text).simpleFormat(this.article.content);n.insertAdjacentHTML("beforeend",r)}},{key:"_articleReceivedSignal",value:function(e){var t=this;switch(e){case"updating":new u({warning:"Author is currently editing article. Be aware of possible changes."}).render();break;case"updated":this.article.reload().then(function(){t.article.applyChanges(),t.renderArticle()})}}}])&&en(n.prototype,r),i&&en(n,i),t}();function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function un(e,t){return!t||"object"!==an(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),un(this,ln(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(t,o["Controllers"].Base),n=t,(r=[{key:"show",value:function(){var e=this,t=new j({articleId:this.params.id}),n=new on({comment:t});n.render(),q.find(this.params.id).then(function(e){ge.dispatch({type:"SET_ARTICLES",payload:{articles:[e]}}),n.renderArticle(e)}),j.get("count",{articleId:this.params.id}).then(function(t){j.all({articleId:e.params.id,total:t.total}).then(function(t){ge.dispatch({type:"SET_COMMENTS",payload:{articleId:e.params.id,comments:t}}),Object(p.render)(f.a.createElement(Gt,{articleId:e.params.id,comments:t}),document.getElementById("comments")),Object(p.render)(f.a.createElement(Xt,{articleId:e.params.id,comments:t}),document.getElementById("comments_count"))})})}}])&&cn(n.prototype,r),i&&cn(n,i),t}();function pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function dn(){var e=pn(Object(s.useState)(1),2),t=e[0],n=e[1],r=pn(Object(s.useState)(!1),2),o=r[0],i=r[1];function a(e){e.preventDefault();var r=t+1;n(r),q.get("all",{page:r}).then(function(e){e.resources.length>0?ge.dispatch({type:"ADD_ARTICLES",payload:{articles:e.resources}}):i(!0)}).catch(function(e){return alert("Invalid URL: ".concat(e))})}return o?f.a.createElement("span",null,"No more posts."):f.a.createElement("a",{href:"#",id:"load_more",onClick:a},"Load more…")}function yn(e){var t=e.article,n=new o.Services.Date(t.publishedAt).toString("short");return f.a.createElement("article",{id:"article_".concat(t.id)},f.a.createElement("h2",null,t.title),f.a.createElement("p",null,f.a.createElement("i",null,t.author," wrote this on ",n," /"," ",f.a.createElement("a",{href:"/articles/".concat(t.id,"#comments"),className:"comments_quantity"},t.commentsCount," comment",1===t.commentsCount?"":"s"))),f.a.createElement("p",null,t.content),f.a.createElement("p",null,f.a.createElement("a",{href:"/articles/".concat(t.id)},"Continued…")))}yn.propTypes={article:I.a.instanceOf(q).isRequired};var mn=yn;function hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function bn(e){var t=hn(Object(s.useState)(e.articles),2),n=t[0],r=t[1];Object(s.useEffect)(function(){var e=ge.subscribe(function(){return r(ge.getState().articles)});return function(){e()}});var o=n.map(function(e){return f.a.createElement(mn,{key:e.id,article:e})});return f.a.createElement(f.a.Fragment,null,o)}bn.propTypes={articles:I.a.arrayOf(I.a.instanceOf(q)).isRequired};var vn=bn;function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wn(e,t){return!t||"object"!==_n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wn(this,En(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(t,o["Controllers"].Base),n=t,(r=[{key:"index",value:function(){Object(p.render)(f.a.createElement(dn,null),document.getElementById("load_more_wrapper")),q.get("all",{page:1}).then(function(e){ge.dispatch({type:"SET_ARTICLES",payload:{articles:e.resources}}),Object(p.render)(f.a.createElement(vn,{articles:e.resources}),document.getElementById("articles"))})}}])&&gn(n.prototype,r),i&&gn(n,i),t}(),jn={}.hasOwnProperty,An=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)jn.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Views"].Base),t.prototype.render=function(){return new o.UI.Form({for:new je,delegator:this,callbackSuccess:"_created"}).render()},t.prototype.receivedSignal=function(e,t){switch(e){case"confirming":return this._confirming();case"confirmed":return this._confirmed()}},t.prototype._created=function(e){return this.connectWith(new je({id:e.id})),document.querySelector("form").style.display="none",document.getElementById("sign_in_paragraph").classList.remove("none"),document.getElementById("verification_info").classList.remove("none"),new u({notice:e.notice}).render()},t.prototype._confirming=function(){return document.getElementById("verification_info").textContent=document.getElementById("verification_progress").textContent},t.prototype._confirmed=function(){return window.location.href="/user/sessions/new?event=confirmed"},t}(),In={}.hasOwnProperty,Pn=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)In.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Controllers"].Base),t.prototype.new=function(){return(new An).render()},t}();function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t){return!t||"object"!==Cn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kn(this,Rn(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(t,Object(o["Mix"])(o["Controllers"].Base,l)),n=t,(r=[{key:"initialize",value:function(){this.setScope("main")}}])&&Tn(n.prototype,r),i&&Tn(n,i),t}();Object.assign(Bn,{Articles:fn,Pages:Sn,Users:Pn});var Dn=Bn;function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t){return!t||"object"!==zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Vn(e,t,n[t])})}return e}function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Wn=function(e,t){var n=e.article_id,r=ge;o.Env.namespaceController.constructor===Wt?r=ye:o.Env.namespaceController.constructor===le&&(r=_);var i=Fn(Ee(r.getState(),n),2),a=i[0],c=i[1];console.log(a),console.log(c),a&&r.dispatch({type:"UPDATE_ARTICLE",payload:{article:new q(Un({},a,{commentsCount:a.commentsCount+t})),index:c}})},Hn=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Nn(this,Ln(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(t,o["Views"].Base),n=t,(r=[{key:"receivedSignal",value:function(e,t){switch(e){case"Article created":n=t.id,o.Env.namespaceController.constructor===le&&q.find({id:n,abbr:!0}).then(function(e){_.dispatch({type:"ADD_ARTICLES",payload:{articles:[e]}})});break;case"Article published":!function(e){var t=e.id;o.Env.namespaceController.constructor===Wt?q.find({id:t,abbr:!0,resource:"admin"}).then(function(e){ye.dispatch({type:"PREPEND_ARTICLE",payload:{articles:[e]}})}):q.find({id:t,abbr:!0}).then(function(e){ge.dispatch({type:"ADD_ARTICLES",payload:{articles:[e]}})})}(t);break;case"Article updated":!function(e){var t=e.id,n={id:t,abbr:!0},r=ge;o.Env.namespaceController.constructor===Wt?(n.resource="admin",r=ye):o.Env.namespaceController.constructor===le&&(r=_);var i=Fn(Ee(r.getState(),t),2),a=i[0],c=i[1];a&&q.find(n).then(function(e){return r.dispatch({type:"UPDATE_ARTICLE",payload:{article:e,index:c}})})}(t);break;case"Article.Comment created":Wn(t,1),function(e){var t=e.article_id,n=e.id,r=_,i={articleId:t,id:n};o.Env.namespaceController.constructor===Dn&&(r=ge,i.resource="main"),Fn(Ee(r.getState(),t),1)[0]&&j.find(i).then(function(e){return r.dispatch({type:"ADD_COMMENTS",payload:{articleId:t,comments:[e]}})})}(t);break;case"Article.Comment destroyed":Wn(t,-1),function(e){var t=e.article_id,n=e.id,r=ge;o.Env.namespaceController.constructor===le&&(r=_),r.dispatch({type:"REMOVE_COMMENT",payload:{id:n,articleId:t}})}(t);break;case"Article.Comment updated":!function(e){var t=e.article_id,n=e.id,r=ge;o.Env.namespaceController.constructor===le&&(r=_);var i=Fn(Oe(r.getState(),n,{parentId:t}),2),a=i[0],c=i[1];a&&a.reload().then(function(){a.applyChanges(),r.dispatch({type:"UPDATE_COMMENT",payload:{comment:a,index:c,articleId:t}})})}(t);break;case"User created":je.find(t.id).then(function(e){return ye.dispatch({type:"PREPEND_USER",payload:{users:[e]}})})}var n}},{key:"call",value:function(){this.connectWith([q,j,je])}}])&&Mn(n.prototype,r),i&&Mn(n,i),t}();o.Deps.cable=a.a.createConsumer(),o.Deps.NotificationCenter=se;var Jn=new Hn;new o.Loco({notifications:{enable:!0,log:!0,size:10},postInit:function(){Jn.call(),"test"===document.querySelector("body").getAttribute("data-rails-env")&&o.Env.loco.getWire().setPollingTime(1e3)}}).init();var Yn={}.hasOwnProperty,$n=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)Yn.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o["Validators"].Base),t.identity="Vulgarity",t.prototype.validate=function(){var e;if(null!=this.val)switch(typeof this.val){case"string":if(e=this._getVulgarWord(),RegExp(""+e,"i").exec(this.val))return this._addErrorMessage();break;default:throw new TypeError("Vulgarity validator is applicable only for strings and "+this.attr+" isn't.")}},t.prototype._addErrorMessage=function(){var e;return e=o.I18n[o.Env.loco.getLocale()].errors.messages.vulgarity,this.obj.addErrorMessage(e,{for:this.attr})},t.prototype._getVulgarWord=function(){switch(o.Env.loco.getLocale()){case"pl":return"kurwa";case"en":return"fuck"}},t}();Object.assign(o.Validators,{Vulgarity:$n}),o.I18n.pl={variants:{few:function(e){var t;return t=parseInt(o.Utils.String.last(String(e))),-1!==[2,3,4].indexOf(t)&&!(2===String(e).length&&"1"===String(e)[0])}},models:{},attributes:{},ui:{form:{sending:"Wysyłam...",success:"Sukces",errors:{connection:"Błąd z połączeniem",invalid_data:"Nieprawidłowe dane"}}},date:{formats:{default:"%d-%m-%Y",short:"%d %b",long:"%B %d, %Y"},day_names:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],abbr_day_names:["nie","pon","wto","śro","czw","pią","sob"],month_names:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],abbr_month_names:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru"]},errors:{messages:{accepted:"musi zostać zaakceptowane",blank:"nie może być puste",confirmation:"nie zgadza się z polem %{attribute}",empty:"nie może być puste",equal_to:"musi być równe %{count}",even:"musi być parzyste",exclusion:"jest zarezerwowane",greater_than:"musi być większe od %{count}",greater_than_or_equal_to:"musi być większe lub równe %{count}",inclusion:"nie znajduje się na liście dopuszczalnych wartości",invalid:"jest nieprawidłowe",less_than:"musi być mniejsze od %{count}",less_than_or_equal_to:"musi być mniejsze lub równe %{count}",not_a_number:"nie jest liczbą",not_an_integer:"musi być liczbą całkowitą",odd:"musi być nieparzyste",present:"musi być puste",too_long:{few:"jest za długie (maksymalnie %{count} znaki)",many:"jest za długie (maksymalnie %{count} znaków)",one:"jest za długie (maksymalnie jeden znak)",other:"jest za długie (maksymalnie %{count} znaków)"},too_short:{few:"jest za krótkie (przynajmniej %{count} znaki)",many:"jest za krótkie (przynajmniej %{count} znaków)",one:"jest za krótkie (przynajmniej jeden znak)",other:"jest za krótkie (przynajmniej %{count} znaków)"},wrong_length:{few:"ma nieprawidłową długość (powinna wynosić %{count} znaki)",many:"ma nieprawidłową długość (powinna wynosić %{count} znaków)",one:"ma nieprawidłową długość (powinna wynosić jeden znak)",other:"ma nieprawidłową długość (powinna wynosić %{count} znaków)"},other_than:"musi być inna niż %{count}"}}},o.I18n.pl.models.User="Użytkownik",o.I18n.pl.attributes.User={password:"Hasło",passwordConfirmation:"Powtórz hasło"},o.I18n.en.errors.messages.vulgarity="contains strong language.",o.I18n.pl.errors.messages.vulgarity="zawiera mocny język.",Object.assign(o.Controllers,{Admin:Wt,Main:Dn,User:le}),Object.assign(q,{Comment:j}),Object.assign(Q,{Member:G}),Object.assign(o.Models,{Article:q,Room:Q,User:je}),window.test={Channels:o.Channels,Env:o.Env}},96:function(e,t,n){},97:function(e,t,n){}});
//# sourceMappingURL=application.js.map